<?xml version="1.0" encoding="UTF-8"?>
<Flow xmlns="http://soap.sforce.com/2006/04/metadata">
    <actionCalls>
        <name>Email_to_person_contact</name>
        <label>Email to person contact</label>
        <locationX>209</locationX>
        <locationY>5387</locationY>
        <actionName>Contact.Contact_Alert_Portal_Loan_Status_Change</actionName>
        <actionType>emailAlert</actionType>
        <flowTransactionModel>CurrentTransaction</flowTransactionModel>
        <inputParameters>
            <name>SObjectRowId</name>
            <value>
                <elementReference>$Record.PersonContact.Id</elementReference>
            </value>
        </inputParameters>
        <nameSegment>Contact.Contact_Alert_Portal_Loan_Status_Change</nameSegment>
        <versionSegment>1</versionSegment>
    </actionCalls>
    <apiVersion>55.0</apiVersion>
    <assignments>
        <name>Assign_the_region_and_branch_to_related_opportunities</name>
        <label>Assign the region and branch to related opportunities</label>
        <locationX>297</locationX>
        <locationY>4403</locationY>
        <assignmentItems>
            <assignToReference>Loop_Over_All_Related_Opportunities.CF_Region__c</assignToReference>
            <operator>Assign</operator>
            <value>
                <elementReference>$Record.LLC_BI__Region__c</elementReference>
            </value>
        </assignmentItems>
        <assignmentItems>
            <assignToReference>Loop_Over_All_Related_Opportunities.CF_Branch__c</assignToReference>
            <operator>Assign</operator>
            <value>
                <elementReference>$Record.LLC_BI__Branch__c</elementReference>
            </value>
        </assignmentItems>
        <connector>
            <targetReference>Loop_Over_All_Related_Opportunities</targetReference>
        </connector>
    </assignments>
    <assignments>
        <name>Update_New_Existing_field_on_Opp</name>
        <label>Update New/Existing field on Opp</label>
        <locationX>297</locationX>
        <locationY>2687</locationY>
        <assignmentItems>
            <assignToReference>Loop_each_related_Opp_Record.CF_New_Existing__c</assignToReference>
            <operator>Assign</operator>
            <value>
                <elementReference>$Record.CF_New_Existing__c</elementReference>
            </value>
        </assignmentItems>
        <assignmentItems>
            <assignToReference>OppList</assignToReference>
            <operator>Add</operator>
            <value>
                <elementReference>Loop_each_related_Opp_Record</elementReference>
            </value>
        </assignmentItems>
        <connector>
            <targetReference>Loop_each_related_Opp_Record</targetReference>
        </connector>
    </assignments>
    <decisions>
        <name>Business_or_Person_Account</name>
        <label>Business or Person Account</label>
        <locationX>495</locationX>
        <locationY>3155</locationY>
        <defaultConnector>
            <targetReference>Reset_Same_as_Billing_Address_Checkbox</targetReference>
        </defaultConnector>
        <defaultConnectorLabel>Do Nothing</defaultConnectorLabel>
        <rules>
            <name>Business_Account</name>
            <conditionLogic>and</conditionLogic>
            <conditions>
                <leftValueReference>$Record.IsPersonAccount</leftValueReference>
                <operator>EqualTo</operator>
                <rightValue>
                    <booleanValue>false</booleanValue>
                </rightValue>
            </conditions>
            <conditions>
                <leftValueReference>$Record.BillingStreet</leftValueReference>
                <operator>IsNull</operator>
                <rightValue>
                    <booleanValue>false</booleanValue>
                </rightValue>
            </conditions>
            <connector>
                <targetReference>Copy_Business_Mailing_Address_to_Physical_Address</targetReference>
            </connector>
            <label>Business Account</label>
        </rules>
        <rules>
            <name>Person_Account</name>
            <conditionLogic>and</conditionLogic>
            <conditions>
                <leftValueReference>$Record.IsPersonAccount</leftValueReference>
                <operator>EqualTo</operator>
                <rightValue>
                    <booleanValue>true</booleanValue>
                </rightValue>
            </conditions>
            <conditions>
                <leftValueReference>$Record.PersonMailingStreet</leftValueReference>
                <operator>IsNull</operator>
                <rightValue>
                    <booleanValue>false</booleanValue>
                </rightValue>
            </conditions>
            <connector>
                <targetReference>Copy_Person_Billing_Mailing_Address_to_Physical_Address</targetReference>
            </connector>
            <label>Person Account</label>
        </rules>
    </decisions>
    <decisions>
        <name>Check_for_is_null</name>
        <label>Check for is null</label>
        <locationX>341</locationX>
        <locationY>4187</locationY>
        <defaultConnector>
            <targetReference>Check_Primary_Contact</targetReference>
        </defaultConnector>
        <defaultConnectorLabel>Default Outcome</defaultConnectorLabel>
        <rules>
            <name>Checking_for_is_null</name>
            <conditionLogic>and</conditionLogic>
            <conditions>
                <leftValueReference>Get_Related_Opportunities</leftValueReference>
                <operator>IsNull</operator>
                <rightValue>
                    <booleanValue>false</booleanValue>
                </rightValue>
            </conditions>
            <connector>
                <targetReference>Loop_Over_All_Related_Opportunities</targetReference>
            </connector>
            <label>Checking for is null</label>
        </rules>
    </decisions>
    <decisions>
        <name>Check_if_Branch_is_Changed</name>
        <label>Check if Branch is Changed</label>
        <locationX>495</locationX>
        <locationY>1547</locationY>
        <defaultConnector>
            <targetReference>Check_if_Class_Code_is_Updated</targetReference>
        </defaultConnector>
        <defaultConnectorLabel>Default Outcome</defaultConnectorLabel>
        <rules>
            <name>ISCHANGED</name>
            <conditionLogic>and</conditionLogic>
            <conditions>
                <leftValueReference>$Record.LLC_BI__Branch__c</leftValueReference>
                <operator>IsChanged</operator>
                <rightValue>
                    <booleanValue>true</booleanValue>
                </rightValue>
            </conditions>
            <connector>
                <targetReference>Update_Loan</targetReference>
            </connector>
            <label>ISCHANGED</label>
        </rules>
    </decisions>
    <decisions>
        <name>Check_if_Class_Code_is_Updated</name>
        <label>Check if Class Code is Updated</label>
        <locationX>495</locationX>
        <locationY>1847</locationY>
        <defaultConnector>
            <targetReference>Check_New_Existing_Field</targetReference>
        </defaultConnector>
        <defaultConnectorLabel>Default Outcome</defaultConnectorLabel>
        <rules>
            <name>If_Class_Code_is_Updated</name>
            <conditionLogic>and</conditionLogic>
            <conditions>
                <leftValueReference>$Record.JHJX__CustCode__c</leftValueReference>
                <operator>NotEqualTo</operator>
                <rightValue>
                    <elementReference>$Record__Prior.JHJX__CustCode__c</elementReference>
                </rightValue>
            </conditions>
            <connector>
                <targetReference>CM_Class_Code_Entity_Type_Mappings</targetReference>
            </connector>
            <label>If Class Code is Updated</label>
        </rules>
    </decisions>
    <decisions>
        <name>Check_Is_Null</name>
        <label>Check Is Null</label>
        <locationX>341</locationX>
        <locationY>2471</locationY>
        <defaultConnector>
            <targetReference>Business_or_Person_Account</targetReference>
        </defaultConnector>
        <defaultConnectorLabel>Default Outcome</defaultConnectorLabel>
        <rules>
            <name>Checking_Is_Null</name>
            <conditionLogic>and</conditionLogic>
            <conditions>
                <leftValueReference>Get_Related_Opportunity_Records</leftValueReference>
                <operator>IsNull</operator>
                <rightValue>
                    <booleanValue>false</booleanValue>
                </rightValue>
            </conditions>
            <connector>
                <targetReference>Loop_each_related_Opp_Record</targetReference>
            </connector>
            <label>Checking for Is Null</label>
        </rules>
    </decisions>
    <decisions>
        <name>Check_New_Existing_Field</name>
        <label>Check New/Existing Field</label>
        <locationX>495</locationX>
        <locationY>2255</locationY>
        <defaultConnector>
            <targetReference>Business_or_Person_Account</targetReference>
        </defaultConnector>
        <defaultConnectorLabel>Default Outcome</defaultConnectorLabel>
        <rules>
            <name>Is_not_null</name>
            <conditionLogic>and</conditionLogic>
            <conditions>
                <leftValueReference>$Record.CF_New_Existing__c</leftValueReference>
                <operator>IsChanged</operator>
                <rightValue>
                    <booleanValue>true</booleanValue>
                </rightValue>
            </conditions>
            <conditions>
                <leftValueReference>$Record.RecordType.DeveloperName</leftValueReference>
                <operator>EqualTo</operator>
                <rightValue>
                    <stringValue>IndustriesBusiness</stringValue>
                </rightValue>
            </conditions>
            <connector>
                <targetReference>Get_Related_Opportunity_Records</targetReference>
            </connector>
            <label>Is not null</label>
        </rules>
    </decisions>
    <decisions>
        <name>Check_Primary_Contact</name>
        <label>Check Primary Contact</label>
        <locationX>495</locationX>
        <locationY>4871</locationY>
        <defaultConnector>
            <targetReference>Is_Person_Account</targetReference>
        </defaultConnector>
        <defaultConnectorLabel>Default Outcome</defaultConnectorLabel>
        <rules>
            <name>If_Primary_Contact</name>
            <conditionLogic>(1 AND 3) OR 2</conditionLogic>
            <conditions>
                <leftValueReference>$Record.CF_Account_Primary_Contact__c</leftValueReference>
                <operator>IsNull</operator>
                <rightValue>
                    <booleanValue>false</booleanValue>
                </rightValue>
            </conditions>
            <conditions>
                <leftValueReference>$Record.CF_Account_Primary_Contact__c</leftValueReference>
                <operator>IsChanged</operator>
                <rightValue>
                    <booleanValue>true</booleanValue>
                </rightValue>
            </conditions>
            <conditions>
                <leftValueReference>IsNewRecord</leftValueReference>
                <operator>EqualTo</operator>
                <rightValue>
                    <booleanValue>true</booleanValue>
                </rightValue>
            </conditions>
            <connector>
                <targetReference>Update_Account_Fields</targetReference>
            </connector>
            <label>If Primary Contact</label>
        </rules>
    </decisions>
    <decisions>
        <name>Is_CIF_added</name>
        <label>Is CIF# added ?</label>
        <locationX>495</locationX>
        <locationY>431</locationY>
        <defaultConnector>
            <targetReference>NAICS_Code_Updated</targetReference>
        </defaultConnector>
        <defaultConnectorLabel>Default Outcome</defaultConnectorLabel>
        <rules>
            <name>Yes</name>
            <conditionLogic>and</conditionLogic>
            <conditions>
                <leftValueReference>$Record.CIF__c</leftValueReference>
                <operator>IsNull</operator>
                <rightValue>
                    <booleanValue>false</booleanValue>
                </rightValue>
            </conditions>
            <conditions>
                <leftValueReference>$Record.CIF__c</leftValueReference>
                <operator>NotEqualTo</operator>
                <rightValue>
                    <elementReference>$Record__Prior.CIF__c</elementReference>
                </rightValue>
            </conditions>
            <connector>
                <targetReference>Update_Type_to_Relationship</targetReference>
            </connector>
            <label>Yes</label>
        </rules>
    </decisions>
    <decisions>
        <name>Is_Dataload_user</name>
        <label>Is Dataload user ?</label>
        <locationX>176</locationX>
        <locationY>323</locationY>
        <defaultConnector>
            <targetReference>Is_CIF_added</targetReference>
        </defaultConnector>
        <defaultConnectorLabel>Default Outcome</defaultConnectorLabel>
        <rules>
            <name>Yes1</name>
            <conditionLogic>and</conditionLogic>
            <conditions>
                <leftValueReference>$User.No_Workflow__c</leftValueReference>
                <operator>EqualTo</operator>
                <rightValue>
                    <booleanValue>true</booleanValue>
                </rightValue>
            </conditions>
            <label>Yes</label>
        </rules>
    </decisions>
    <decisions>
        <name>Is_New_Person_Account</name>
        <label>Is New Person Account?</label>
        <locationX>495</locationX>
        <locationY>3671</locationY>
        <defaultConnector>
            <targetReference>Region_and_Branch_Change_on_Account</targetReference>
        </defaultConnector>
        <defaultConnectorLabel>Default Outcome</defaultConnectorLabel>
        <rules>
            <name>Yes_New</name>
            <conditionLogic>and</conditionLogic>
            <conditions>
                <leftValueReference>$Record.RecordType.DeveloperName</leftValueReference>
                <operator>EqualTo</operator>
                <rightValue>
                    <stringValue>PersonAccount</stringValue>
                </rightValue>
            </conditions>
            <conditions>
                <leftValueReference>IsNewRecord</leftValueReference>
                <operator>EqualTo</operator>
                <rightValue>
                    <elementReference>IsNewRecord</elementReference>
                </rightValue>
            </conditions>
            <connector>
                <targetReference>Update_Acc_Prim_Contact</targetReference>
            </connector>
            <label>Yes New</label>
        </rules>
    </decisions>
    <decisions>
        <name>Is_Person_Account</name>
        <label>Is Person Account ?</label>
        <locationX>495</locationX>
        <locationY>5171</locationY>
        <defaultConnectorLabel>Default Outcome</defaultConnectorLabel>
        <rules>
            <name>PersonAccount_Yes</name>
            <conditionLogic>and</conditionLogic>
            <conditions>
                <leftValueReference>$Record.IsPersonAccount</leftValueReference>
                <operator>EqualTo</operator>
                <rightValue>
                    <booleanValue>true</booleanValue>
                </rightValue>
            </conditions>
            <connector>
                <targetReference>Portal_loan_stage_changed</targetReference>
            </connector>
            <label>PersonAccount Yes</label>
        </rules>
    </decisions>
    <decisions>
        <description>Checking if lookup key is blank</description>
        <name>LookupKey_Blank</name>
        <label>LookupKey Blank</label>
        <locationX>341</locationX>
        <locationY>647</locationY>
        <defaultConnector>
            <targetReference>NAICS_Code_Updated</targetReference>
        </defaultConnector>
        <defaultConnectorLabel>Default Outcome</defaultConnectorLabel>
        <rules>
            <name>IsLookupKeyBlank</name>
            <conditionLogic>and</conditionLogic>
            <conditions>
                <leftValueReference>$Record.LLC_BI__lookupKey__c</leftValueReference>
                <operator>IsNull</operator>
                <rightValue>
                    <booleanValue>true</booleanValue>
                </rightValue>
            </conditions>
            <connector>
                <targetReference>Update_Lookup_Key</targetReference>
            </connector>
            <label>Is LookupKey Blank</label>
        </rules>
    </decisions>
    <decisions>
        <name>NAICS_Code_Updated</name>
        <label>NAICS_Code_Updated</label>
        <locationX>495</locationX>
        <locationY>1031</locationY>
        <defaultConnector>
            <targetReference>Check_if_Branch_is_Changed</targetReference>
        </defaultConnector>
        <defaultConnectorLabel>Default Outcome</defaultConnectorLabel>
        <rules>
            <name>Is_NAICS_Code_Updated</name>
            <conditionLogic>and</conditionLogic>
            <conditions>
                <leftValueReference>$Record.cm_Industry_Code__c</leftValueReference>
                <operator>NotEqualTo</operator>
                <rightValue>
                    <elementReference>$Record__Prior.cm_Industry_Code__c</elementReference>
                </rightValue>
            </conditions>
            <conditions>
                <leftValueReference>$Record.cm_Industry_Code__c</leftValueReference>
                <operator>IsNull</operator>
                <rightValue>
                    <booleanValue>false</booleanValue>
                </rightValue>
            </conditions>
            <connector>
                <targetReference>Updating_naics_code_on_account_0</targetReference>
            </connector>
            <label>Is_NAICS_Code_Updated</label>
        </rules>
    </decisions>
    <decisions>
        <name>Portal_loan_stage_changed</name>
        <label>Portal loan stage changed ?</label>
        <locationX>341</locationX>
        <locationY>5279</locationY>
        <defaultConnectorLabel>Default Outcome</defaultConnectorLabel>
        <rules>
            <name>PortalStage_changed</name>
            <conditionLogic>and</conditionLogic>
            <conditions>
                <leftValueReference>$Record.CF_Con_Loan_Portal_Status_Changed__pc</leftValueReference>
                <operator>IsChanged</operator>
                <rightValue>
                    <booleanValue>true</booleanValue>
                </rightValue>
            </conditions>
            <conditions>
                <leftValueReference>$Record.CF_Con_Loan_Portal_Status_Changed__pc</leftValueReference>
                <operator>IsNull</operator>
                <rightValue>
                    <booleanValue>false</booleanValue>
                </rightValue>
            </conditions>
            <conditions>
                <leftValueReference>$Record.PersonContact.Email</leftValueReference>
                <operator>IsNull</operator>
                <rightValue>
                    <booleanValue>false</booleanValue>
                </rightValue>
            </conditions>
            <connector>
                <targetReference>Email_to_person_contact</targetReference>
            </connector>
            <label>PortalStage changed</label>
        </rules>
    </decisions>
    <decisions>
        <description>This decision node was developed for US_ 1437, to populate the every opportunity related to an account whenever the branch or region on account is changed.</description>
        <name>Region_and_Branch_Change_on_Account</name>
        <label>Region and Branch Change on Account</label>
        <locationX>495</locationX>
        <locationY>3971</locationY>
        <defaultConnector>
            <targetReference>Check_Primary_Contact</targetReference>
        </defaultConnector>
        <defaultConnectorLabel>Default Outcome</defaultConnectorLabel>
        <rules>
            <name>Region_Branch_Change</name>
            <conditionLogic>and</conditionLogic>
            <conditions>
                <leftValueReference>$Record.LLC_BI__Region__c</leftValueReference>
                <operator>IsChanged</operator>
                <rightValue>
                    <booleanValue>true</booleanValue>
                </rightValue>
            </conditions>
            <conditions>
                <leftValueReference>$Record.LLC_BI__Region__c</leftValueReference>
                <operator>IsNull</operator>
                <rightValue>
                    <booleanValue>false</booleanValue>
                </rightValue>
            </conditions>
            <connector>
                <targetReference>Get_Related_Opportunities</targetReference>
            </connector>
            <label>Region Branch Change</label>
        </rules>
    </decisions>
    <description>Updated to include the person contact update to correspond with upper environments.</description>
    <environments>Default</environments>
    <formulas>
        <name>First2charsofNAICSCode</name>
        <dataType>String</dataType>
        <expression>LEFT({!$Record.cm_Industry_Code__r.cm_Industry_Code__c},2)</expression>
    </formulas>
    <formulas>
        <name>IsNewRecord</name>
        <dataType>Boolean</dataType>
        <expression>IsNew()</expression>
    </formulas>
    <interviewLabel>ACC_CREATE_UPDATE_Action_RR_FLOW {!$Flow.CurrentDateTime}</interviewLabel>
    <label>ACC_CREATE_UPDATE_Action_RR_FLOW</label>
    <loops>
        <name>Loop_each_related_Opp_Record</name>
        <label>Loop each related Opp Record</label>
        <locationX>209</locationX>
        <locationY>2579</locationY>
        <collectionReference>Get_Related_Opportunity_Records</collectionReference>
        <iterationOrder>Asc</iterationOrder>
        <nextValueConnector>
            <targetReference>Update_New_Existing_field_on_Opp</targetReference>
        </nextValueConnector>
        <noMoreValuesConnector>
            <targetReference>Updated_related_Opp</targetReference>
        </noMoreValuesConnector>
    </loops>
    <loops>
        <name>Loop_Over_All_Related_Opportunities</name>
        <label>Loop Over All Related Opportunities</label>
        <locationX>209</locationX>
        <locationY>4295</locationY>
        <collectionReference>Get_Related_Opportunities</collectionReference>
        <iterationOrder>Asc</iterationOrder>
        <nextValueConnector>
            <targetReference>Assign_the_region_and_branch_to_related_opportunities</targetReference>
        </nextValueConnector>
        <noMoreValuesConnector>
            <targetReference>Update_Related_Opportunites</targetReference>
        </noMoreValuesConnector>
    </loops>
    <processMetadataValues>
        <name>BuilderType</name>
        <value>
            <stringValue>LightningFlowBuilder</stringValue>
        </value>
    </processMetadataValues>
    <processMetadataValues>
        <name>CanvasMode</name>
        <value>
            <stringValue>AUTO_LAYOUT_CANVAS</stringValue>
        </value>
    </processMetadataValues>
    <processMetadataValues>
        <name>OriginBuilderType</name>
        <value>
            <stringValue>LightningFlowBuilder</stringValue>
        </value>
    </processMetadataValues>
    <processType>AutoLaunchedFlow</processType>
    <recordLookups>
        <name>CM_Class_Code_Entity_Type_Mappings</name>
        <label>Get CM_Class_Code_Entity_Type_Mappings</label>
        <locationX>363</locationX>
        <locationY>1955</locationY>
        <assignNullValuesIfNoRecordsFound>false</assignNullValuesIfNoRecordsFound>
        <connector>
            <targetReference>Update_Entity_Type</targetReference>
        </connector>
        <filterLogic>and</filterLogic>
        <filters>
            <field>Class_Code__c</field>
            <operator>EqualTo</operator>
            <value>
                <elementReference>$Record.JHJX__CustCode__c</elementReference>
            </value>
        </filters>
        <getFirstRecordOnly>true</getFirstRecordOnly>
        <object>CM_Class_Code_Entity_Type_Mapping__mdt</object>
        <storeOutputAutomatically>true</storeOutputAutomatically>
    </recordLookups>
    <recordLookups>
        <name>Get_CM_NAICS_Industry_Mapping</name>
        <label>Get_CM_NAICS_Industry_Mapping</label>
        <locationX>363</locationX>
        <locationY>1247</locationY>
        <assignNullValuesIfNoRecordsFound>false</assignNullValuesIfNoRecordsFound>
        <connector>
            <targetReference>Update_Industry</targetReference>
        </connector>
        <filterLogic>and</filterLogic>
        <filters>
            <field>Sector__c</field>
            <operator>EqualTo</operator>
            <value>
                <elementReference>First2charsofNAICSCode</elementReference>
            </value>
        </filters>
        <getFirstRecordOnly>true</getFirstRecordOnly>
        <object>CM_NAICS_Industry_Mapping__mdt</object>
        <storeOutputAutomatically>true</storeOutputAutomatically>
    </recordLookups>
    <recordLookups>
        <name>Get_Related_Opportunities</name>
        <label>Get Related Opportunities</label>
        <locationX>341</locationX>
        <locationY>4079</locationY>
        <assignNullValuesIfNoRecordsFound>false</assignNullValuesIfNoRecordsFound>
        <connector>
            <targetReference>Check_for_is_null</targetReference>
        </connector>
        <filterLogic>and</filterLogic>
        <filters>
            <field>AccountId</field>
            <operator>EqualTo</operator>
            <value>
                <elementReference>$Record.Id</elementReference>
            </value>
        </filters>
        <getFirstRecordOnly>false</getFirstRecordOnly>
        <object>Opportunity</object>
        <queriedFields>Id</queriedFields>
        <queriedFields>CF_Region__c</queriedFields>
        <queriedFields>LLC_BI__Branch__c</queriedFields>
        <storeOutputAutomatically>true</storeOutputAutomatically>
    </recordLookups>
    <recordLookups>
        <name>Get_Related_Opportunity_Records</name>
        <label>Get Related Opportunity Records</label>
        <locationX>341</locationX>
        <locationY>2363</locationY>
        <assignNullValuesIfNoRecordsFound>false</assignNullValuesIfNoRecordsFound>
        <connector>
            <targetReference>Check_Is_Null</targetReference>
        </connector>
        <filterLogic>and</filterLogic>
        <filters>
            <field>AccountId</field>
            <operator>EqualTo</operator>
            <value>
                <elementReference>$Record.Id</elementReference>
            </value>
        </filters>
        <getFirstRecordOnly>false</getFirstRecordOnly>
        <object>Opportunity</object>
        <queriedFields>Id</queriedFields>
        <queriedFields>CF_New_Existing__c</queriedFields>
        <storeOutputAutomatically>true</storeOutputAutomatically>
    </recordLookups>
    <recordUpdates>
        <name>Copy_Business_Mailing_Address_to_Physical_Address</name>
        <label>Copy Business/Mailing Address to Physical Address</label>
        <locationX>231</locationX>
        <locationY>3263</locationY>
        <connector>
            <targetReference>Reset_Same_as_Billing_Address_Checkbox</targetReference>
        </connector>
        <inputAssignments>
            <field>ShippingCity</field>
            <value>
                <elementReference>$Record.BillingCity</elementReference>
            </value>
        </inputAssignments>
        <inputAssignments>
            <field>ShippingCountry</field>
            <value>
                <elementReference>$Record.BillingCountry</elementReference>
            </value>
        </inputAssignments>
        <inputAssignments>
            <field>ShippingPostalCode</field>
            <value>
                <elementReference>$Record.BillingPostalCode</elementReference>
            </value>
        </inputAssignments>
        <inputAssignments>
            <field>ShippingState</field>
            <value>
                <elementReference>$Record.BillingState</elementReference>
            </value>
        </inputAssignments>
        <inputAssignments>
            <field>ShippingStreet</field>
            <value>
                <elementReference>$Record.BillingStreet</elementReference>
            </value>
        </inputAssignments>
        <inputReference>$Record</inputReference>
    </recordUpdates>
    <recordUpdates>
        <name>Copy_Person_Billing_Mailing_Address_to_Physical_Address</name>
        <label>Copy Person Billing/Mailing Address to Physical Address</label>
        <locationX>495</locationX>
        <locationY>3263</locationY>
        <connector>
            <targetReference>Update_Contact_Home_Address_Fields</targetReference>
        </connector>
        <inputAssignments>
            <field>ShippingCity</field>
            <value>
                <elementReference>$Record.PersonMailingCity</elementReference>
            </value>
        </inputAssignments>
        <inputAssignments>
            <field>ShippingCountry</field>
            <value>
                <elementReference>$Record.PersonMailingCountry</elementReference>
            </value>
        </inputAssignments>
        <inputAssignments>
            <field>ShippingPostalCode</field>
            <value>
                <elementReference>$Record.PersonMailingPostalCode</elementReference>
            </value>
        </inputAssignments>
        <inputAssignments>
            <field>ShippingState</field>
            <value>
                <elementReference>$Record.PersonMailingState</elementReference>
            </value>
        </inputAssignments>
        <inputAssignments>
            <field>ShippingStreet</field>
            <value>
                <elementReference>$Record.PersonMailingStreet</elementReference>
            </value>
        </inputAssignments>
        <inputReference>$Record</inputReference>
    </recordUpdates>
    <recordUpdates>
        <name>Reset_Same_as_Billing_Address_Checkbox</name>
        <label>Reset Same as Billing Address Checkbox</label>
        <locationX>495</locationX>
        <locationY>3563</locationY>
        <connector>
            <targetReference>Is_New_Person_Account</targetReference>
        </connector>
        <filterLogic>and</filterLogic>
        <filters>
            <field>Same_as_Billing_Address__c</field>
            <operator>EqualTo</operator>
            <value>
                <booleanValue>true</booleanValue>
            </value>
        </filters>
        <inputAssignments>
            <field>Same_as_Billing_Address__c</field>
            <value>
                <booleanValue>false</booleanValue>
            </value>
        </inputAssignments>
        <inputReference>$Record</inputReference>
    </recordUpdates>
    <recordUpdates>
        <name>Update_Acc_Prim_Contact</name>
        <label>Update Acc Prim Contact</label>
        <locationX>363</locationX>
        <locationY>3779</locationY>
        <connector>
            <targetReference>Region_and_Branch_Change_on_Account</targetReference>
        </connector>
        <inputAssignments>
            <field>CF_Account_Primary_Contact__c</field>
            <value>
                <elementReference>$Record.PersonContact.Id</elementReference>
            </value>
        </inputAssignments>
        <inputReference>$Record</inputReference>
    </recordUpdates>
    <recordUpdates>
        <name>Update_Account_Fields</name>
        <label>Update Account Fields</label>
        <locationX>363</locationX>
        <locationY>4979</locationY>
        <connector>
            <targetReference>Is_Person_Account</targetReference>
        </connector>
        <inputAssignments>
            <field>Cell_Phone__c</field>
            <value>
                <elementReference>$Record.CF_Account_Primary_Contact__r.MobilePhone</elementReference>
            </value>
        </inputAssignments>
        <inputAssignments>
            <field>Fax</field>
            <value>
                <elementReference>$Record.CF_Account_Primary_Contact__r.Fax</elementReference>
            </value>
        </inputAssignments>
        <inputReference>$Record</inputReference>
    </recordUpdates>
    <recordUpdates>
        <description>Synchronizes Managed nCino Home Address fields from Mailing Address fields for Laser Pro Street Address support for individuals.</description>
        <name>Update_Contact_Home_Address_Fields</name>
        <label>Update Contact Home Address Fields</label>
        <locationX>495</locationX>
        <locationY>3371</locationY>
        <connector>
            <targetReference>Reset_Same_as_Billing_Address_Checkbox</targetReference>
        </connector>
        <inputAssignments>
            <field>LLC_BI__Home_Address__c</field>
            <value>
                <elementReference>$Record.PersonMailingStreet</elementReference>
            </value>
        </inputAssignments>
        <inputAssignments>
            <field>LLC_BI__Home_City__c</field>
            <value>
                <elementReference>$Record.PersonMailingCity</elementReference>
            </value>
        </inputAssignments>
        <inputAssignments>
            <field>LLC_BI__Home_State__c</field>
            <value>
                <elementReference>$Record.PersonMailingState</elementReference>
            </value>
        </inputAssignments>
        <inputAssignments>
            <field>LLC_BI__Home_Zipcode__c</field>
            <value>
                <elementReference>$Record.PersonMailingPostalCode</elementReference>
            </value>
        </inputAssignments>
        <inputReference>$Record.PersonContact</inputReference>
    </recordUpdates>
    <recordUpdates>
        <name>Update_Entity_Type</name>
        <label>Update Entity Type</label>
        <locationX>363</locationX>
        <locationY>2063</locationY>
        <connector>
            <targetReference>Check_New_Existing_Field</targetReference>
        </connector>
        <inputAssignments>
            <field>Type</field>
            <value>
                <elementReference>CM_Class_Code_Entity_Type_Mappings.Entity_Type__c</elementReference>
            </value>
        </inputAssignments>
        <inputReference>$Record</inputReference>
    </recordUpdates>
    <recordUpdates>
        <name>Update_Industry</name>
        <label>Update_Industry</label>
        <locationX>363</locationX>
        <locationY>1355</locationY>
        <connector>
            <targetReference>Check_if_Branch_is_Changed</targetReference>
        </connector>
        <inputAssignments>
            <field>Industry</field>
            <value>
                <elementReference>Get_CM_NAICS_Industry_Mapping.Industry__c</elementReference>
            </value>
        </inputAssignments>
        <inputReference>$Record</inputReference>
    </recordUpdates>
    <recordUpdates>
        <name>Update_Loan</name>
        <label>Update Loan</label>
        <locationX>363</locationX>
        <locationY>1655</locationY>
        <connector>
            <targetReference>Check_if_Class_Code_is_Updated</targetReference>
        </connector>
        <filterLogic>and</filterLogic>
        <filters>
            <field>LLC_BI__Account__c</field>
            <operator>EqualTo</operator>
            <value>
                <elementReference>$Record.Id</elementReference>
            </value>
        </filters>
        <inputAssignments>
            <field>CF_Branch__c</field>
            <value>
                <elementReference>$Record.LLC_BI__Branch__r.Name</elementReference>
            </value>
        </inputAssignments>
        <object>LLC_BI__Loan__c</object>
    </recordUpdates>
    <recordUpdates>
        <description>Update Lookup key with CIF value</description>
        <name>Update_Lookup_Key</name>
        <label>Update Lookup Key</label>
        <locationX>209</locationX>
        <locationY>755</locationY>
        <connector>
            <targetReference>NAICS_Code_Updated</targetReference>
        </connector>
        <inputAssignments>
            <field>LLC_BI__lookupKey__c</field>
            <value>
                <elementReference>$Record.CIF__c</elementReference>
            </value>
        </inputAssignments>
        <inputReference>$Record</inputReference>
    </recordUpdates>
    <recordUpdates>
        <name>Update_Related_Opportunites</name>
        <label>Update Related Opportunites</label>
        <locationX>209</locationX>
        <locationY>4595</locationY>
        <connector>
            <targetReference>Check_Primary_Contact</targetReference>
        </connector>
        <inputReference>Get_Related_Opportunities</inputReference>
    </recordUpdates>
    <recordUpdates>
        <name>Update_Type_to_Relationship</name>
        <label>Update Type to Relationship</label>
        <locationX>341</locationX>
        <locationY>539</locationY>
        <connector>
            <targetReference>LookupKey_Blank</targetReference>
        </connector>
        <inputAssignments>
            <field>CF_Type__c</field>
            <value>
                <stringValue>Relationship</stringValue>
            </value>
        </inputAssignments>
        <inputReference>$Record</inputReference>
    </recordUpdates>
    <recordUpdates>
        <name>Updated_related_Opp</name>
        <label>Updated related Opp</label>
        <locationX>209</locationX>
        <locationY>2879</locationY>
        <connector>
            <targetReference>Business_or_Person_Account</targetReference>
        </connector>
        <inputReference>OppList</inputReference>
    </recordUpdates>
    <recordUpdates>
        <name>Updating_naics_code_on_account_0</name>
        <label>Updating naics code on account</label>
        <locationX>363</locationX>
        <locationY>1139</locationY>
        <connector>
            <targetReference>Get_CM_NAICS_Industry_Mapping</targetReference>
        </connector>
        <inputAssignments>
            <field>LLC_BI__Naics_Code__c</field>
            <value>
                <elementReference>$Record.cm_Industry_Code__r.cm_Industry_Code__c</elementReference>
            </value>
        </inputAssignments>
        <inputReference>$Record</inputReference>
    </recordUpdates>
    <start>
        <locationX>50</locationX>
        <locationY>0</locationY>
        <connector>
            <targetReference>Is_Dataload_user</targetReference>
        </connector>
        <object>Account</object>
        <recordTriggerType>CreateAndUpdate</recordTriggerType>
        <triggerType>RecordAfterSave</triggerType>
    </start>
    <status>Active</status>
    <variables>
        <name>OppList</name>
        <dataType>SObject</dataType>
        <isCollection>true</isCollection>
        <isInput>false</isInput>
        <isOutput>false</isOutput>
        <objectType>Opportunity</objectType>
    </variables>
</Flow>
