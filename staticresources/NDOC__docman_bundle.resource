!function(n){var o={};function __webpack_require__(e){var t;return(o[e]||(t=o[e]={i:e,l:!1,exports:{}},n[e].call(t.exports,t,t.exports,__webpack_require__),t.l=!0,t)).exports}__webpack_require__.m=n,__webpack_require__.c=o,__webpack_require__.d=function(e,t,n){__webpack_require__.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},__webpack_require__.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},__webpack_require__.t=function(t,e){if(1&e&&(t=__webpack_require__(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var n=Object.create(null);if(__webpack_require__.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var o in t)__webpack_require__.d(n,o,function(e){return t[e]}.bind(null,o));return n},__webpack_require__.n=function(e){var t=e&&e.__esModule?function getDefault(){return e.default}:function getModuleExports(){return e};return __webpack_require__.d(t,"a",t),t},__webpack_require__.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},__webpack_require__.p="",__webpack_require__(__webpack_require__.s=0)}([function(e,t,n){n(1),n(2),n(3),n(4),n(5),n(6),n(7),n(8),n(9),n(10),n(11),n(12),n(13),n(14),n(15),n(16),n(17),n(18),n(19),n(20),n(21),n(22),n(23),n(24),n(25),n(26),n(27),n(28),n(29),n(30),n(31),n(32),n(33),n(34),n(35),n(36),n(37),n(38),n(39),n(40),n(41),n(42),n(43),n(44),n(45),n(46),n(47),n(48),n(49),n(50),n(51),n(52),n(53),n(54),n(55),n(56),n(57),n(58)},function(e,t){!function(){"use strict";angular.module("docman.extensions",[])}()},function(e,t){!function(){"use strict";function downloadService(e){return{before:function before(){return!1},after:function after(e){return null},execute:function execute(){return null}}}angular.module("docman.extensions").service("downloadService",downloadService),downloadService.$inject=["$q"]}()},function(e,t){!function(){"use strict";angular.module("docman.extensions").service("customLinkService",function customLinkService(){this.customLinkDefinitions=function customLinkDefinitions(){return[]}})}()},function(e,t){!function(){"use strict";function fileUploadService(e){return{before:function before(){return!1},after:function after(e){return null},execute:function execute(e,t,n){return null}}}angular.module("docman.extensions").service("fileUploadService",fileUploadService),fileUploadService.$inject=["$q"]}()},function(e,t){!function(){"use strict";angular.module("docman.decorators",["docman.decoratorServices"])}()},function(e,t){!function(){"use strict";angular.module("docman.decoratorServices",[])}()},function(e,t){!function(){"use strict";angular.module("docman.decoratorServices").service("buttonService",function buttonService(){var n=[],o=1e3,r="disablePointerEvents";return{getButtonDefinitions:function getButtonDefinitions(){return n},addButton:function addButton(e){addButtons([e])},addButtons:addButtons,getButton:function getButton(e){for(var t in n){t=n[t];if(t.id.toLowerCase()===e.toLowerCase())return t}return null},getButtonByDisplayLabel:function getButtonByDisplayLabel(e){for(var t in n){t=n[t];if(t.displayLabel.toLowerCase()===e.toLowerCase())return t}return null}};function addButtons(e){for(var t=0;t<e.length;t++)!function setDefaultDisplayOrder(e){null!==e.displayOrder&&void 0!==e.displayOrder||(e.displayOrder=o)}(e[t]),!function setDefaultCssClassOnDisabledButton(e){e.isDisabled&&(null===e.cssClass||void 0===e.cssClass||""===e.cssClass.trim()?e.cssClass=r:e.cssClass=e.cssClass+" "+r)}(e[t]);n=n.concat(e)}})}()},function(e,t){!function(){"use strict";function filterService(n){var o=[];return{getFilters:function alphaOrderedFilters(){return o.sort(function alphaSort(e,t){e=e&&e.displayLabel?e.displayLabel.toUpperCase():"",t=t&&t.displayLabel?t.displayLabel.toUpperCase():"";return e<t?-1:t<e?1:0})},getFilter:getFilter,addFilter:addFilter,addFilters:function addFilters(e){e.forEach(function(e){addFilter(e)})},activateFilter:activateFilter,deactivateAllFilters:deactivateAllFilters,getActiveFilter:function getActiveFilter(){for(var e in o){e=o[e];if(e.isActive)return e}}};function addFilter(e){void 0===e.onClick&&(e.onClick=selectFilter),o=o.concat([e])}function getFilter(e){for(var t in o){t=o[t];if(t.id===e)return t}return null}function activateFilter(e){getFilter(e).isActive=!0}function deactivateAllFilters(){!function alterFilters(t,n){o.forEach(function(e){e[t]=n})}("isActive",!1)}function selectFilter(e,t){n.uncheckAllPlaceholders(),jQuery("#accordion .collapse.in").collapse("hide"),deactivateAllFilters(),t(),activateFilter(e)}}angular.module("docman.decoratorServices").service("filterService",filterService),filterService.$inject=["placeholderService"]}()},function(e,t){!function(){"use strict";function actionService(o,n,a,r,i,l){a=a.get();var t=[],s={};return{addAction:function addAction(e){t.push(e)},getActions:function getActions(){return t},executeAction:function executeAction(e,o){var r=n.defer();{var t;null==s.component&&((t={}).recordId=a.contextId,t.showToast=showToast,t.destroyAction=destroyAction,$Lightning.createComponent(e.componentName,t,"docmanaction",function(e,t,n){"SUCCESS"===t?e.invoke(o)?(s.component=e,s.destroyComponent=e.destroy.bind(e)):e.destroy():r.reject(t,n)}))}return r.promise},destroyAction:destroyAction};function destroyAction(){s.destroyComponent(),s.component=null}function showToast(e,t){var n={};switch(n.body=t,e){case"success":n.type=i.SUCCESS,n.theme=l.THEME_SUCCESS;break;case"warning":n.type=i.WARNING,n.theme=l.THEME_WARNING;break;case"error":n.type=i.ERROR,n.theme=l.THEME_ERROR;break;default:throw"unknown toast type: "+e}o.$broadcast(r.SET_TOAST,n)}}angular.module("docman.decoratorServices").service("actionService",actionService),actionService.$inject=["$rootScope","$q","config","CONSTANTS","TOAST_TYPES","ALERT_DIALOG"]}()},function(e,t){!function(){"use strict";angular.module("docman.picklist.manager",[])}()},function(e,t){!function(){"use strict";function picklistMetadataService(r){return{read:function read(e,t){for(var n='<?xml version="1.0" encoding="UTF-8"?><env:Envelope xmlns:env="http://schemas.xmlsoap.org/soap/envelope/" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><env:Header><SessionHeader xmlns="http://soap.sforce.com/2006/04/metadata"><sessionId>'+UniDocMan.sessionId+'</sessionId></SessionHeader></env:Header><env:Body><readMetadata xmlns="http://soap.sforce.com/2006/04/metadata"><type>'+e+"</type>",o=0;o<t.length;o++)n+="<fullNames>"+t[o]+"</fullNames>";return r({method:"POST",url:"/services/Soap/m/37.0",headers:{"Content-Type":"text/xml",SOAPAction:'""'},data:n+="</readMetadata></env:Body></env:Envelope>"})},update:function update(e){for(var t='<?xml version="1.0" encoding="UTF-8"?><env:Envelope xmlns:env="http://schemas.xmlsoap.org/soap/envelope/" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><env:Header><SessionHeader xmlns="http://soap.sforce.com/2006/04/metadata"><sessionId>'+UniDocMan.sessionId+'</sessionId></SessionHeader></env:Header><env:Body><updateMetadata xmlns="http://soap.sforce.com/2006/04/metadata">',n=0;n<e.length;n++)t+=e[n];return r({method:"POST",url:"/services/Soap/m/37.0",headers:{"Content-Type":"text/xml",SOAPAction:'""'},data:t+="</updateMetadata></env:Body></env:Envelope>"})},createPicklistXml:function createPicklistXml(e,t,n){var o="<picklist>";t&&(o+="<controllingField>"+t+"</controllingField>");for(var r=0;r<e.length;r++){if(o+="<picklistValues><fullName>"+e[r].name+"</fullName><default>false</default>",t)for(var a=0;a<e[r].controllingFieldValues.length;a++)o+="<controllingFieldValues>"+e[r].controllingFieldValues[a]+"</controllingFieldValues>";o+="</picklistValues>"}t&&n&&(o+="<restrictedPicklist>"+n+"</restrictedPicklist>");return o+="<sorted>false</sorted></picklist>"}}}angular.module("docman.picklist.manager").service("picklistMetadataService",picklistMetadataService),picklistMetadataService.$inject=["$http"]}()},function(e,t){!function(){"use strict";function picklistValueService(n,o){var r=this;r.loadPicklistValues=function loadPicklistValues(e){var t=o.defer();return n.read("CustomField",e).then(function(e){jQuery(e.data).find("picklist").each(function(e,t){0===e?(r.picklistValues=[],jQuery(this).find("picklistValues").each(function(e,t){var n=jQuery(this).children("fullName").text();r.picklistValues.push({id:e,reason:n,comment:""})})):1===e&&jQuery(this).find("picklistValues").each(function(){var n=jQuery(this).children("fullName").text();jQuery(this).find("controllingFieldValues").each(function(){for(var e=jQuery(this).text(),t=0;t<r.picklistValues.length;t++)r.picklistValues[t].reason===e&&(r.picklistValues[t].comment=n)})})}),t.resolve(r.picklistValues)}),t.promise},r.picklistValues=[]}angular.module("docman.picklist.manager").service("picklistValueService",picklistValueService),picklistValueService.$inject=["picklistMetadataService","$q"]}()},function(e,t){!function(){"use strict";function uploadService(s,c,d,u,f,p,E,o,m,g){var h=this;return h.service={archiveExistingDocument:function archiveExistingDocument(e){{var t;if(e.isExternalReference)return(t=o.defer()).resolve(),t.promise}return p.archiveExistingDocument(e.recordId,e.file.Id)},uploadContentDocument:function uploadContentDocument(t,n,o,r,a){var e=t.name.substr(t.name.lastIndexOf(".")+1).toLowerCase();if(null!==s.allowedFileExtensions&&0<s.allowedFileExtensions.length&&-1===s.allowedFileExtensions.indexOf(e))s.$evalAsync(function(){h.service.showToast=!0,s.$broadcast(d.ERROR_TOAST_SHOWN)});else{e=m.get().systemPropsMap.get(f.UNI_DOCMAN_FILE_SIZE_LIMIT);if(null!==e&&e){var i=Math.round(10*t.size/1024e3)/10;if(e<i)return void s.$evalAsync(function(){h.service.showSizeToast=!0,s.$broadcast(d.ERROR_TOAST_SHOWN)})}var l=E.uploadingToPlaceholder;E.uploadingToPlaceholder.file&&E.uploadingToPlaceholder.file.ParentId?h.service.shouldOverwrite().then(function(e){e?(h.service.archiveExistingDocument(E.uploadingToPlaceholder).then(function(){c.retrieveArchivedDocumentsWithAttachments(function(e){s.archivedFiles=e,E.convertPropertyNamesFromCamelCase(s.archivedFiles)})}),E.uploadingToPlaceholder={},upload(t,n,l,o,r,a)):(E.uploadingToPlaceholder={},r(d.CANCEL_OVERWRITE))}):(E.uploadingToPlaceholder={},upload(t,n,l,o,r,a))}},shouldOverwrite:function shouldOverwrite(){var n=o.defer();return s.$broadcast(d.SHOW_OVERWRITE_MODAL),s.$on(d.OVERWRITE_CONFIRM,function(e,t){n.resolve(t)}),n.promise},showToast:!1,showSizeToast:!1},h.service;function upload(t,n,o,r,a,e){var i,l;!function uploadExtensionExists(){return void 0!==g.before&&typeof g.before===d.FUNCTION&&void 0!==g.after&&typeof g.after===d.FUNCTION&&void 0!==g.execute&&typeof g.execute===d.FUNCTION}()||!0!==g.before()?(l={Origin:"C",PathOnClient:t.name,Title:t.name},function createBlob(e,t,n,o,r){var a=new forcetk.Client(null,null,null);u.SITE_PREFIX&&(a.setSessionToken=function(e,t,n){this.sessionId=e,this.apiVersion=null==t?"v41.0":t,this.instanceUrl=null==n?"https://"+location.hostname+u.SITE_PREFIX:n,this.proxyUrl=null,this.visualforce=!1});a.setSessionToken(c.sessionId,"v41.0"),a.createBlob("ContentVersion",t,e.name,"VersionData",e,n,o,null,r)}(t,l,r,a,e)):(i={isExternal:!0},l=E.generateFileMetadata(o,t),p.createExternalDocumentStorageMetadata(o.recordId,t.name,l).then(function(e){e={contextId:window.DocManId,documentVersionId:e.documentVersionId,placeholderId:o.recordId,documentStoreId:e.parentId};g.execute(t,n,e).then(function(e){g.after(e),s.$broadcast(d.UPDATE_PLACEHOLDER_STATUS,o,d.STATUS_IN_FILE),r(i)},function(e){g.after(e),a(i)})}))}}angular.module("app").service("uploadService",uploadService),uploadService.$inject=["$rootScope","dataService","CONSTANTS","FILE","SYSTEM_PROPERTIES","universalDocManRemotingService","placeholderService","$q","config","fileUploadService"]}()},function(e,t){!function(){"use strict";function chatterService(s,c,d,u){return{ssfbBuildChatterCommentForChangedFields:function ssfbBuildChatterCommentForChangedFields(e,t,n){var o="",r=["LLC_BI__date__c","LLC_BI__Date__c"],a=["LLC_BI__exceptionDate__c","LLC_BI__Exception_Date__c"],i=s.getFields(r,e.screenSectionFields,!0),r=s.getFields(r,t,!0),e=s.getFields(a,e.screenSectionFields,!0),a=s.getFields(a,t,!0),t=null,l=null;i.value!==r.value&&(t={originalValue:c.formatMillisecondsToUTCDate(i.value),updatedValue:c.formatMillisecondsToUTCDate(r.value)});e.value!==a.value&&(l={originalValue:c.formatMillisecondsToUTCDate(e.value),updatedValue:c.formatMillisecondsToUTCDate(a.value)});o+=ssfbBuildDateChatterComment(t,l),n(o)},ssfbBuildDateChatterComment:ssfbBuildDateChatterComment,ssfbBuildStatusChatterComment:function ssfbBuildStatusChatterComment(e,t){return" "+u.getLabels().STATUS_CHANGED_FROM+" "+u.getLabel(e,1)+" "+u.getLabels().TO_LABEL+" "+u.getLabel(t,1)+d.PERIOD},buildChatterCommentForChangedFields:function buildChatterCommentForChangedFields(e,t,n){var o="",r=null,a=null,i=null,l=null;i=-1<e.apexType.indexOf("LoanDocument")||-1<e.apexType.indexOf("AccountDocument")?(a=c.formatMillisecondsToUTCDate(e.fields.LLC_BI__date__c),r=c.formatMillisecondsToUTCDate(t.LLC_BI__date__c),l=c.formatMillisecondsToUTCDate(e.fields.LLC_BI__exceptionDate__c),c.formatMillisecondsToUTCDate(t.LLC_BI__exceptionDate__c)):(a=c.formatMillisecondsToUTCDate(e.fields.LLC_BI__Date__c),r=c.formatMillisecondsToUTCDate(t.LLC_BI__Date__c),l=c.formatMillisecondsToUTCDate(e.fields.LLC_BI__Exception_Date__c),c.formatMillisecondsToUTCDate(t.LLC_BI__Exception_Date__c));!r&&a?o=u.getLabels().DATE+" "+a+" "+u.getLabels().WAS_ADDED:r&&!a?o=u.getLabels().DATE+" "+r+" "+u.getLabels().WAS_REMOVED+d.PERIOD:r&&a&&r!=a&&(o=u.getLabels().DATE_CHANGED_FROM+" "+r+" "+u.getLabels().TO_LABEL+" "+a+d.PERIOD);!i&&l?o+=" "+u.getLabels().EXCEPTION_DATE+" "+l+" "+u.getLabels().WAS_ADDED:i&&!l?o+=" "+u.getLabels().EXCEPTION_DATE+" "+i+" "+u.getLabels().WAS_REMOVED+d.PERIOD:i&&l&&i!=l&&(o+=" "+u.getLabels().EXCEPTION_DATE_CHANGED_FROM+" "+i+" "+u.getLabels().TO_LABEL+" "+l+d.PERIOD);n(o)}};function ssfbBuildDateChatterComment(e,t){var n="";return e&&(n=null===e.originalValue||void 0===e.originalValue?u.getLabels().DATE+" "+e.updatedValue+" "+u.getLabels().WAS_ADDED+d.PERIOD:null===e.updatedValue||void 0===e.updatedValue?u.getLabels().DATE+" "+e.originalValue+" "+u.getLabels().WAS_REMOVED+d.PERIOD:u.getLabels().DATE_CHANGED_FROM+" "+e.originalValue+" "+u.getLabels().TO_LABEL+" "+e.updatedValue+d.PERIOD),t&&(null===t.originalValue||void 0===t.originalValue?n+=" "+u.getLabels().EXCEPTION_DATE+" "+t.updatedValue+" "+u.getLabels().WAS_ADDED:null===t.updatedValue||void 0===t.updatedValue?n+=" "+u.getLabels().EXCEPTION_DATE+" "+t.originalValue+" "+u.getLabels().WAS_REMOVED+d.PERIOD:n+=" "+u.getLabels().EXCEPTION_DATE_CHANGED_FROM+" "+t.originalValue+" "+u.getLabels().TO_LABEL+" "+t.updatedValue+d.PERIOD),n}}angular.module("app").service("chatterService",chatterService),chatterService.$inject=["ssfbService","commonService","CONSTANTS","labels"]}()},function(e,t){!function(){"use strict";function categoryService(e,a,t,n){return{fetchCategories:function fetchCategories(){var r=e.defer();return t.retrieveCategories().then(function(e){var t=[{id:"",name:a.getLabels().NONE_OPTION}];if(e){for(var n=0;n<Object.keys(e).length;n++)var o=e[n],t=t.concat(function processCategories(e){var t,n=[];for(t in e)e.hasOwnProperty(t)&&(e[t]=JSON.parse(e[t]),n.push({id:t,name:e[t].category,viewerGroups:e[t].viewerGroups,viewerRoles:e[t].viewerRoles,viewerProfiles:e[t].viewerProfiles}));return n}(o));(t=t.slice(1)).sort(alphabetizeByName)}r.resolve(t)}),r.promise},fetchAdHocCategories:function fetchAdHocCategories(){return t.retrieveAdhocCategories()}};function alphabetizeByName(e,t){e=e.name?e.name.toUpperCase():"",t=t.name?t.name.toUpperCase():"";return t<e?1:e<t?-1:0}}angular.module("app").service("categoryService",categoryService),categoryService.$inject=["$q","labels","dataService","permissionService"]}()},function(e,t){!function(){"use strict";function ssfbService(n,i,a,o){return{buildPlaceholderFromSection:function buildPlaceholderFromSection(){var r={};return angular.forEach(a.formBuilder.fields,function(e,t){var n=a.formBuilder.fields[t];if(n)for(var o=0;o<n.length;o++)r[a.formBuilder.fields[t][o].fieldName]=a.formBuilder.fields[t][o].value}),r},clearScreenSections:clearScreenSections,getFields:function getFields(e,t,n){e=e.map(function(e){return e.toLowerCase()});var o,r=[];for(o in t)for(var a=t[o],i=0;i<a.length;i++){var l=a[i];if(-1!==e.indexOf(l.fieldName.toLowerCase())&&(r.push(l),n))return r[0]}if(n)return{};return r},getPlaceholderCategory:function getPlaceholderCategory(e){var t,n=e.screenSectionFields;for(t in n)for(var o=n[t],r=0;r<o.length;r++){var a=o[r];if(a.fieldName.toLowerCase()===i.ID_PATH.toLowerCase())return a.value}return null},hasVisibleFields:function hasVisibleFields(e){e=a.get(e);if(e&&e.guid)return 0<a.formBuilder.getVisibleFields(e.guid).length;return!1},mapValues:function mapValues(e,t){var n=Object.keys(t);if(e&&n)for(var o=0;o<n.length;o++)e[n[o]]=t[n[o]]},updateScreenSections:function updateScreenSections(e){void 0===e&&(e=!1);var t=n.defer();return o.getScreenSectionsForContextObject(e).then(function(e){a.clear(),t.resolve(e)}),t.promise},clearFields:function clearFields(n){var o,e=a.formBuilder.fields,r=[];for(o in e)e[o].forEach((e,t)=>{n.includes(e.fieldName)&&r.push([o,t])});r.forEach(e=>{var[e,t]=e;a.formBuilder.fields[e][t].value=null,function clearInputFieldById(e,t=!0){t=t?`input[id*="${e}"]`:`input[id="${e}"]`;e=document.querySelector(t);null!=e&&(e.value=null)}(""+e+a.formBuilder.fields[e][t].guid,!0)})}};function clearScreenSections(){a.clear()}}angular.module("app").service("ssfbService",ssfbService),ssfbService.$inject=["$q","CATEGORY_FIELD","screenSection","universalDocManRemotingService"]}()},function(e,t){!function(){"use strict";function defaultDownloadService(a,i,r,l,s,n,o){return{downloadMultipleFiles:function downloadMultipleFiles(e){var t=[],n=[];(function retrievePlaceholdersWithAttachments(e,n,o){angular.forEach(e,function(e,t){e.isSelected&&e.file&&(e.file.RecordType===r.ATTACHMENT?n.push(e):e.file.RecordType===r.FILE&&o.push(e))})})(e,t,n),function downloadContent(e){var t=s.defer();{var n,o,r;0<e.length&&(n={},o={},r="",angular.forEach(e,function(e,t){e.file.Id&&(r+=e.file.Id+"/")}),function createContentDocumentDownloadTitles(e,n,o){angular.forEach(e,function(e,t){n[e.file.Id]=generateDownloadTitle(e),o[e.file.Id]=e.file.Title})}(e,n,o),l.renameMultipleContentDocuments(n).then(function(){r=r.substring(0,r.length-1),function initiateContentDocumentDownload(e,t){window.open(i.CONTENT_DOWNLOAD_URL+t).addEventListener("unload",function(){l.renameMultipleContentDocuments(e)},!0)}(o,r)}))}return t.resolve(),t.promise}(n).then(function downloadAttachments(e){angular.forEach(e,function(e){updateFileTitleAndDownload(e.file.Id,generateDownloadTitle(e),!1,getDownloadLink(i.ATTACHMENT_DOWNLOAD_URL,e.file.Id,e.downloadAsPDF),e.file.Title)})}(t))},downloadVersion:function downloadVersion(e,t){window.open(getDownloadLink(i.CONTENT_DOWNLOAD_URL,e,t))},getDownloadLink:getDownloadLink,executeDownload:function executeDownload(t){var n;t.file.RecordType===i.ATTACHMENT?updateFileTitleAndDownload(t.file.Id,generateDownloadTitle(t),!1,getDownloadLink(i.ATTACHMENT_DOWNLOAD_URL,t.file.Id,t.downloadAsPDF),t.file.Title):t.file.Id&&!t.isDocumentExternal?updateFileTitleAndDownload(n=t.file.Id,generateDownloadTitle(t),!0,getDownloadLink(i.CONTENT_DOWNLOAD_URL,n,t.downloadAsPDF),t.file.Title):t.isDocumentExternal?window.open(t.file.externalDownloadUrl):l.getContentDocumentLink(t.file.ParentId).then(function(e){updateFileTitleAndDownload(n=e.ContentDocument.LatestPublishedVersionId,generateDownloadTitle(t),!0,getDownloadLink(i.CONTENT_DOWNLOAD_URL,n,t.downloadAsPDF),t.file.Title)})},updateFileTitleAndDownload:updateFileTitleAndDownload};function updateFileTitleAndDownload(e,t,n,o,r){a.updateFileTitle(e,t,n,function(){window.setTimeout(function(){window.open(o).addEventListener("unload",function(){a.updateFileTitle(e,r,n,function(){})},!0)},1e3)})}function generateDownloadTitle(e){var t;return 1==n.get().systemPropsMap.get(o.DOCUMENT_DOWNLOAD_NAME_KEY)?e.file.Title:(t=e.name,e.year&&(t+=i.DASH+e.year),t+e.file.Title.substring(e.file.Title.lastIndexOf(i.PERIOD)))}function getDownloadLink(e,t,n){e+=t;return n&&(e+=i.AS_PDF),e}}angular.module("app").service("defaultDownloadService",defaultDownloadService),defaultDownloadService.$inject=["dataService","FILE","FILE_RECORD_TYPES","universalDocManRemotingService","$q","config","SYSTEM_PROPERTIES"]}()},function(e,t){!function(){"use strict";function dataService(r,e){var a=this;return a.config=e.get(),a.namespacePrefix=a.config.namespacePrefix?a.config.namespacePrefix.replace("__","."):"nDOC.",{addChatterComment:function addChatterComment(e,t,n,o){return Visualforce.remoting.Manager.invokeAction(a.namespacePrefix+"UniversalDocManController.addChatterComment",e,t,function(e,t){t.status?n.apply(this,[e]):(UniDocMan.dispatchErrorEvent(t.type,t.message,t.where),o&&o.apply(this,[t,e]))},{escape:!1,buffer:!1})},addNewPlaceholder:function addNewPlaceholder(e,n,o){return Visualforce.remoting.Manager.invokeAction(a.namespacePrefix+"PlaceholderDataController.addNewPlaceholder",window.DocManId,e,function(e,t){t.status?n.apply(this,[e]):(UniDocMan.dispatchErrorEvent(t.type,t.message,t.where),o.apply(this,[t,e]))},{escape:!1,buffer:!1})},configureContextObject:function configureContextObject(n,o){return Visualforce.remoting.Manager.invokeAction(a.namespacePrefix+"UniversalDocManController.configureContextObject",a.config.contextIdPageParam,function(e,t){t.status?n.apply(this,[e]):(UniDocMan.dispatchErrorEvent(t.type,t.message,t.where),o.apply(this,[t,e]))},{escape:!1,buffer:!1})},createFileStagingPlaceholder:function createFileStagingPlaceholder(n,o){return Visualforce.remoting.Manager.invokeAction(a.namespacePrefix+"UniversalDocManController.createFileStagingPlaceholder",window.DocManId,function(e,t){t.status?n.apply(this,[e]):(UniDocMan.dispatchErrorEvent(t.type,t.message,t.where),o.apply(this,[t,e]))},{escape:!1,buffer:!1})},deletePlaceholder:function deletePlaceholder(e,n,o){return Visualforce.remoting.Manager.invokeAction(a.namespacePrefix+"UniversalDocManController.deletePlaceholder",window.DocManId,e,function(e,t){t.status?n.apply(this,[e]):(UniDocMan.dispatchErrorEvent(t.type,t.message,t.where),o&&o.apply(this,[t,e]))},{escape:!1,buffer:!1})},deletePlaceholderIndex:function deletePlaceholderIndex(e,n,o){return Visualforce.remoting.Manager.invokeAction(a.namespacePrefix+"UniversalDocManController.deletePlaceholderIndex",window.DocManId,e,function(e,t){t.status?n.apply(this,[e]):(UniDocMan.dispatchErrorEvent(t.type,t.message,t.where),o.apply(this,[t,e]))},{escape:!1,buffer:!1})},dispatchErrorEvent:UniDocMan.dispatchErrorEvent,duplicatePlaceholder:function duplicatePlaceholder(e,n,o){return Visualforce.remoting.Manager.invokeAction(a.namespacePrefix+"UniversalDocManController.duplicatePlaceholder",window.DocManId,e,function(e,t){t.status?n.apply(this,[e]):(UniDocMan.dispatchErrorEvent(t.type,t.message,t.where),o.apply(this,[t,e]))},{escape:!1,buffer:!1})},getNamespacePrefix:function getNamespacePrefix(n,o){return Visualforce.remoting.Manager.invokeAction(a.namespacePrefix+"UniversalDocManController.getNamespacePrefix",function(e,t){t.status?n.apply(this,[e]):(UniDocMan.dispatchErrorEvent(t.type,t.message,t.where),o.apply(this,[t,e]))},{escape:!1,buffer:!1})},retrieveArchivedDocumentsWithAttachments:function retrieveArchivedDocumentsWithAttachments(n,o){return Visualforce.remoting.Manager.invokeAction(a.namespacePrefix+"UniversalDocManController.retrieveArchivedDocumentsWithAttachments",window.DocManId,function(e,t){t.status?n.apply(this,[e]):(UniDocMan.dispatchErrorEvent(t.type,t.message,t.where),o.apply(this,[t,e]))},{escape:!1,buffer:!1})},retrieveCategories:function retrieveCategories(){var n=r.defer();return Visualforce.remoting.Manager.invokeAction(a.namespacePrefix+"PlaceholderDataController.retrieveCategories",window.DocManId,function(e,t){t.status?n.resolve([e]):(UniDocMan.dispatchErrorEvent(t.type,t.message,t.where),n.reject([t,e]))},{escape:!1,buffer:!1}),n.promise},retrieveChatterComments:function retrieveChatterComments(e,n,o){return Visualforce.remoting.Manager.invokeAction(a.namespacePrefix+"UniversalDocManController.retrieveChatterComments",e,function(e,t){t.status?n.apply(this,[e]):(UniDocMan.dispatchErrorEvent(t.type,t.message,t.where),o.apply(this,[t,e]))},{escape:!1,buffer:!1})},retrieveDocumentsWithAttachmentsForSpecifiedId:function retrieveDocumentsWithAttachmentsForSpecifiedId(e,n,o){return Visualforce.remoting.Manager.invokeAction(a.namespacePrefix+"UniversalDocManController.retrieveDocumentsWithAttachments",e,function(e,t){t.status?n.apply(this,[e]):(UniDocMan.dispatchErrorEvent(t.type,t.message,t.where),o.apply(this,[t,e]))},{escape:!1,buffer:!1})},retrieveFileStagingPlaceholders:function retrieveFileStagingPlaceholders(n,o){return Visualforce.remoting.Manager.invokeAction(a.namespacePrefix+"UniversalDocManController.retrieveFileStagingPlaceholders",window.DocManId,function(e,t){t.status?n.apply(this,[e]):(UniDocMan.dispatchErrorEvent(t.type,t.message,t.where),o.apply(this,[t,e]))},{escape:!1,buffer:!1})},retrievePlaceholderFieldSet:function retrievePlaceholderFieldSet(e,n,o){return Visualforce.remoting.Manager.invokeAction(a.namespacePrefix+"PlaceholderDataController.retrievePlaceholderFieldSet",e,function(e,t){t.status?n.apply(this,[e]):(UniDocMan.dispatchErrorEvent(t.type,t.message,t.where),o.apply(this,[t,e]))},{escape:!1,buffer:!1})},retrievePlaceholderWithFields:function retrievePlaceholderWithFields(e,n,o){return Visualforce.remoting.Manager.invokeAction(a.namespacePrefix+"PlaceholderDataController.retrievePlaceholderWithFields",e,function(e,t){t.status?n.apply(this,[e]):(UniDocMan.dispatchErrorEvent(t.type,t.message,t.where),o.apply(this,[t,e]))},{escape:!1,buffer:!1})},retrieveClosingChecklistNamesByCategory:function retrieveClosingChecklistNamesByCategory(e){var n=r.defer();return Visualforce.remoting.Manager.invokeAction("nFORCE.RemoteActionController.invoke",a.namespacePrefix+"UniDocManRemoteActionController.RetrieveClosingChecklistByDocType",{Id:e},function(e,t){t.status?n.resolve(e):(UniDocMan.dispatchErrorEvent(t.type,t.message,t.where),n.reject(t.message))},{escape:!1,buffer:!1}),n.promise},retrieveUserAssignedPermissions:function retrieveUserAssignedPermissions(n,o){return Visualforce.remoting.Manager.invokeAction(a.namespacePrefix+"UniversalDocManController.retrieveUserAssignedPermissions",function(e,t){t.status?n.apply(this,[e]):(UniDocMan.dispatchErrorEvent(t.type,t.message,t.where),o.apply(this,[t,e]))},{escape:!1,buffer:!1})},sessionId:window.UniDocMan.sessionId,updateAccountOnPlaceholder:function updateAccountOnPlaceholder(e,t,n,o){return Visualforce.remoting.Manager.invokeAction(a.namespacePrefix+"UniversalDocManController.updateAccountOnPlaceholder",e,t,window.DocManId,function(e,t){t.status?n.apply(this,[e]):(UniDocMan.dispatchErrorEvent(t.type,t.message,t.where),o.apply(this,[t,e]))},{escape:!1,buffer:!1})},updateFileTitle:function updateFileTitle(e,t,n,o,r){return Visualforce.remoting.Manager.invokeAction(a.namespacePrefix+"UniversalDocManController.updateFileTitle",e,t,n,function(e,t){t.status?o.apply(this,[e]):(UniDocMan.dispatchErrorEvent(t.type,t.message,t.where),r.apply(this,[t,e]))},{escape:!1,buffer:!1})},updatePlaceholderStatus:function updatePlaceholderStatus(e,t,n,o){return Visualforce.remoting.Manager.invokeAction(a.namespacePrefix+"PlaceholderDataController.updatePlaceholderStatus",e,t,function(e,t){t.status?n&&n.apply(this,[e]):(UniDocMan.dispatchErrorEvent(t.type,t.message,t.where),o&&o.apply(this,[t,e]))},{escape:!1,buffer:!1})},retrieveAdhocCategories:function retrieveAdhocCategories(){var n=r.defer();return Visualforce.remoting.Manager.invokeAction("nFORCE.RemoteActionController.invoke",a.namespacePrefix+"PlaceholderDataController.RetriveAdHocCategories",{contextId:window.DocManId,userLicense:a.config.userLicenseType,userProfile:a.config.userProfileName,userRole:UniDocMan.getUserRoleName(),userGroups:JSON.stringify(a.config.userGroupsList)},function(e,t){t.status?n.resolve(e):(UniDocMan.dispatchErrorEvent(t.type,t.message,t.where),n.reject(t.message))},{escape:!1,buffer:!1}),n.promise},emitAnalyticsEvent:function emitAnalyticsEvent(e,t,n){var o=r.defer();return Visualforce.remoting.Manager.invokeAction("nFORCE.RemoteActionController.invoke",a.namespacePrefix+"AnalyticsEmitterRemote.Emit",{args:JSON.stringify(e)},function(e,t){t.status?o.resolve(e):(UniDocMan.dispatchErrorEvent(t.type,t.message,t.where),o.reject(t.message))},{escape:!1,buffer:!1}),o.promise}}}angular.module("app").service("dataService",dataService),dataService.$inject=["$q","config"]}()},function(e,t){!function(){"use strict";function universalDocManRemotingService(s,e){var c=this;return c.config=e.get(),c.namespacePrefix=c.config.namespacePrefix?c.config.namespacePrefix.replace("__","."):"nDOC.",{archivePlaceholderFromFileStaging:function archivePlaceholderFromFileStaging(e){var n=s.defer();return Visualforce.remoting.Manager.invokeAction(c.namespacePrefix+"UniversalDocManController.archivePlaceholderFromFileStaging",window.DocManId,e,function(e,t){t.status?n.resolve(e):(UniDocMan.dispatchErrorEvent(t.type,t.message,t.where),n.reject(t.message))},{escape:!1,buffer:!1}),n.promise},createFileStagingPlaceholder:function createFileStagingPlaceholder(){var n=s.defer();return Visualforce.remoting.Manager.invokeAction(c.namespacePrefix+"UniversalDocManController.createFileStagingPlaceholder",window.DocManId,function(e,t){t.status?n.resolve(e):(UniDocMan.dispatchErrorEvent(t.type,t.message,t.where),n.reject(t.message))},{escape:!1,buffer:!1}),n.promise},archivePlaceholdersFromFileStaging:function archivePlaceholdersFromFileStaging(e){var n=s.defer();return Visualforce.remoting.Manager.invokeAction(c.namespacePrefix+"UniversalDocManController.archivePlaceholdersFromFileStaging",window.DocManId,e,function(e,t){t.status?n.resolve(e):(UniDocMan.dispatchErrorEvent(t.type,t.message,t.where),n.reject(t.message))},{escape:!1,buffer:!1}),n.promise},archiveExistingDocument:function archiveExistingDocument(e,t){var n=s.defer();return Visualforce.remoting.Manager.invokeAction(c.namespacePrefix+"UniversalDocManController.archiveExistingDocument",window.DocManId,e,t,function(e,t){t.status?n.resolve(e):n.reject(t.message)},{escape:!1,buffer:!1}),n.promise},retrievePlaceholderFieldSetAdd:function retrievePlaceholderFieldSetAdd(e){var n=s.defer();return Visualforce.remoting.Manager.invokeAction(c.namespacePrefix+"PlaceholderDataController.retrievePlaceholderFieldSetAdd",e,function(e,t){t.status?n.resolve(e):n.reject(t.message)},{escape:!1,buffer:!1}),n.promise},takeOwnershipOfDocument:function takeOwnershipOfDocument(e){var n=s.defer();return Visualforce.remoting.Manager.invokeAction(c.namespacePrefix+"SuperUserUtils.takeOwnershipOfDocument",e,function(e,t){t.status?n.resolve(e):n.reject(t.message)},{escape:!1,buffer:!1}),n.promise},retrievePlaceholderNames:function retrievePlaceholderNames(e){var n=s.defer();return Visualforce.remoting.Manager.invokeAction(c.namespacePrefix+"PlaceholderDataController.getPlaceholderNames",e,function(e,t){t.status?n.resolve(e):n.reject(t.message)},{escape:!1,buffer:!1}),n.promise},retrievePledgedCollateral:function retrievePledgedCollateral(){var n=s.defer();return Visualforce.remoting.Manager.invokeAction(c.namespacePrefix+"PlaceholderDataController.getPledgedCollateral",window.DocManId,function(e,t){t.status?n.resolve(e):n.reject(t.message)},{escape:!1,buffer:!1}),n.promise},retrieveSystemPropertyAsBoolean:function retrieveSystemPropertyAsBoolean(e,t){var n=s.defer();return Visualforce.remoting.Manager.invokeAction(c.namespacePrefix+"UniversalDocManController.retrieveSystemPropertyAsBoolean",e,t,function(e,t){t.status?n.resolve(e):n.reject(t.message)},{escape:!1,buffer:!1}),n.promise},isDocStoreShared:function isDocStoreShared(e){var n=s.defer();return Visualforce.remoting.Manager.invokeAction(c.namespacePrefix+"UniversalDocManController.isDocStoreShared",e,function(e,t){t.status?n.resolve(e):n.reject(t.message)},{escape:!1,buffer:!1}),n.promise},savePlaceholderData:function savePlaceholderData(e,t,n){var o=s.defer();return Visualforce.remoting.Manager.invokeAction(c.namespacePrefix+"PlaceholderDataController.savePlaceholderData",window.DocManId,e,t,n,function(e,t){t.status?o.resolve(e):o.reject(t.message)},{escape:!1,buffer:!1}),o.promise},savePlaceholderViewerPerms:function savePlaceholderViewerPerms(e,t){var n=s.defer();return Visualforce.remoting.Manager.invokeAction("nFORCE.RemoteActionController.invoke",c.namespacePrefix+"PlaceholderDataController.SavePlaceholderViewerPerms",{contextObjectId:window.DocManId,placeholderId:e,placeholderViewerPerms:JSON.stringify(t)},function(e,t){t.status?n.resolve(e):n.reject(t.message)},{escape:!1,buffer:!1}),n.promise},getPlaceholderPermOptions:function getPlaceholderPermOptions(){var n=s.defer();return Visualforce.remoting.Manager.invokeAction("nFORCE.RemoteActionController.invoke",c.namespacePrefix+"PlaceholderDataController.GetPlaceholderPermOptions",{},function(e,t){t.status?n.resolve(e):n.reject(t.message)},{escape:!1,buffer:!1}),n.promise},savePlaceholderPortalData:function savePlaceholderPortalData(e,t,n){var o=s.defer();return Visualforce.remoting.Manager.invokeAction("nFORCE.RemoteActionController.invoke",c.namespacePrefix+"PlaceholderDataController.SavePlaceholderPortalDataEndpoint",{contextObjectId:window.DocManId,placeholderId:e,placeholder:JSON.stringify(t),fieldsToNull:JSON.stringify(n)},function(e,t){t.status?o.resolve(e):o.reject(t.message)},{escape:!1,buffer:!1}),o.promise},savePortalRejectionReasons:function savePortalRejectionReasons(e,t){var n=s.defer();return Visualforce.remoting.Manager.invokeAction(c.namespacePrefix+"UniversalDocManController.savePortalRejectionReasons",window.DocManId,e,t,function(e,t){t.status?n.resolve(e):n.reject(t.message)},{escape:!1,buffer:!1}),n.promise},removeFileFromPlaceholders:function removeFilesFromPlaceholders(e){var n=s.defer();return Visualforce.remoting.Manager.invokeAction(c.namespacePrefix+"UniversalDocManController.removeFilesFromPlaceholders",window.DocManId,e,function(e,t){t.status?n.resolve(e):(UniDocMan.dispatchErrorEvent(t.type,t.message,t.where),n.reject(t.message))},{escape:!1,buffer:!1}),n.promise},renameMultipleContentDocuments:function renameMultipleContentDocuments(e){var n=s.defer();return Visualforce.remoting.Manager.invokeAction(c.namespacePrefix+"UniversalDocManController.renameMultipleContentDocuments",e,function(e,t){t.status?n.resolve(e):n.reject(t.message)},{escape:!1,buffer:!1}),n.promise},retrieveAttachment:function retrieveAttachment(e){var n=s.defer();return Visualforce.remoting.Manager.invokeAction(c.namespacePrefix+"PlaceholderDataController.retrieveAttachment",e,function(e,t){t.status?n.resolve(e):n.reject(t.message)},{escape:!1,buffer:!1},{buffer:!1}),n.promise},updatePlaceholderFields:function updatePlaceholderFields(e,t){var n=s.defer();return Visualforce.remoting.Manager.invokeAction(c.namespacePrefix+"UniversalDocManController.updatePlaceholderFields",window.DocManId,e,t,function(e,t){t.status?n.resolve(e):n.reject(t.message)},{escape:!1,buffer:!1}),n.promise},retrieveDocuments:function retrieveDocuments(){var n=s.defer();""===window.DocManId&&(window.DocManId=c.config.contextIdPageParam);return Visualforce.remoting.Manager.invokeAction(c.namespacePrefix+"UniversalDocManController.retrieveDocuments",window.DocManId,function(e,t){t.status?n.resolve(e):n.reject(t.message)},{escape:!1,buffer:!1}),n.promise},retrieveIsTranslated:function retrieveIsTranslated(){var n=s.defer();return Visualforce.remoting.Manager.invokeAction("nFORCE.RemoteActionController.invoke",c.namespacePrefix+"UniversalDocManController.RetrieveIsTranslated",{},function(e,t){t.status?n.resolve(e):n.reject(t.message)},{buffer:!1,escape:!1}),n.promise},retrieveMultiplePledgedCollateral:function retrieveMultiplePledgedCollateral(e){var n=s.defer();return Visualforce.remoting.Manager.invokeAction(c.namespacePrefix+"PlaceholderDataController.getMultiplePledgedCollateral",e,function(e,t){t.status?n.resolve(e):n.reject(t.message)},{escape:!1,buffer:!1}),n.promise},retrieveLegalEntities:function retrieveLegalEntities(e){var n=s.defer();return Visualforce.remoting.Manager.invokeAction(c.namespacePrefix+"UniversalDocManController.retrieveLegalEntities",e,function(e,t){t.status?n.resolve(e):n.reject(t.message)},{escape:!1,buffer:!1}),n.promise},getContentDocumentLink:function getContentDocumentLink(e){var n=s.defer();return Visualforce.remoting.Manager.invokeAction(c.namespacePrefix+"UniversalDocManController.getContentDocumentLink",e,function(e,t){t.status?n.resolve(e):n.reject(t.message)},{escape:!1,buffer:!0}),n.promise},getContentDocumentLinks:function getContentDocumentLinks(e){var n=s.defer();return Visualforce.remoting.Manager.invokeAction(c.namespacePrefix+"UniversalDocManController.getContentDocumentLinks",e,function(e,t){t.status?n.resolve(e):n.reject(t.message)},{escape:!1,buffer:!0}),n.promise},getDocumentVersions:function getDocumentVersions(e){var n=s.defer();return Visualforce.remoting.Manager.invokeAction("nFORCE.RemoteActionController.invoke",c.namespacePrefix+"UniDocManRemoteActionController.getDocumentVersions",{placeholderId:e},function(e,t){t.status?n.resolve(e):n.reject(t.message)},{escape:!1,buffer:!0}),n.promise},getContentDocumentByVersion:function getContentDocumentByVersion(e,t){var n=s.defer();return Visualforce.remoting.Manager.invokeAction("nFORCE.RemoteActionController.invoke",c.namespacePrefix+"UniDocManRemoteActionController.getContentDocumentByVersion",{contentVersionId:e,contentDocumentId:t},function(e,t){t.status?n.resolve(e):(UniDocMan.dispatchErrorEvent(t.type,t.message,t.where),n.reject(t.message))},{escape:!1,buffer:!1}),n.promise},setPreviewConfiguration:function setPreviewConfiguration(e,t,n){var o=s.defer();return Visualforce.remoting.Manager.invokeAction("nFORCE.RemoteActionController.invoke",c.namespacePrefix+"UniDocManRemoteActionController.setPreviewConfiguration",{contentVersionId:e,previewUrlCount:t,previewFormat:n},function(e,t){t.status?o.resolve(e):(UniDocMan.dispatchErrorEvent(t.type,t.message,t.where),o.reject(t.message))},{escape:!1,buffer:!1}),o.promise},linkRelationshipDocuments:function linkRelationshipDocuments(e,t,n,o){var r=s.defer();return Visualforce.remoting.Manager.invokeAction(c.namespacePrefix+"UniversalDocManController.linkRelationshipDocumentsWithAddtionalProperties",e,t,n,o,function(e,t){t.status?r.resolve(e):(UniDocMan.dispatchErrorEvent(t.type,t.message,t.where),r.reject(t.message))},{escape:!1,buffer:!1}),r.promise},createDocumentStorageMetadata:function createDocumentStorageMetadata(e,t,n,o){var r=s.defer();return Visualforce.remoting.Manager.invokeAction(c.namespacePrefix+"UniversalDocManController.createDocumentStorageMetadataWithAdditionalParameters",e,t,n,o,function(e,t){t.status?r.resolve(e):(UniDocMan.dispatchErrorEvent(t.type,t.message,t.where),r.reject(t.message))},{escape:!1,buffer:!1}),r.promise},createExternalDocumentStorageMetadata:function createExternalDocumentStorageMetadata(e,t,n){var o=s.defer();return Visualforce.remoting.Manager.invokeAction("nFORCE.RemoteActionController.invoke",c.namespacePrefix+"UniDocManRemoteActionController.createExternalDocumentStorageMetadata",{placeholderId:e,fileName:t,additionalProperties:n},function(e,t){t.status?o.resolve(e):(UniDocMan.dispatchErrorEvent(t.type,t.message,t.where),o.reject(t.message))},{escape:!1,buffer:!1}),o.promise},getConfigurableColumns:function getConfigurableColumns(e){var n=s.defer();return Visualforce.remoting.Manager.invokeAction(c.namespacePrefix+"UniversalDocManController.retrieveConfigurableColumns",e,function(e,t){t.status?n.resolve(e):(UniDocMan.dispatchErrorEvent(t.type,t.message,t.where),n.reject(t.message))},{escape:!1,buffer:!1}),n.promise},createCollection:function createCollection(e,t){function yf(e,t){t.status?n.resolve(e):(UniDocMan.dispatchErrorEvent(t.type,t.message,t.where),n.reject(t.message))}var n=s.defer();t?Visualforce.remoting.Manager.invokeAction("nFORCE.RemoteActionController.invoke",c.namespacePrefix+"UniDocManRemoteActionController.CreateCollection",{contextId:window.DocManId,docStoreIds:JSON.stringify(e)},yf,{escape:!1,buffer:!1}):Visualforce.remoting.Manager.invokeAction(c.namespacePrefix+"UniversalDocManController.createCollection",e,yf,{escape:!1,buffer:!1});return n.promise},deleteCollection:function deleteCollection(e){var n=s.defer();return Visualforce.remoting.Manager.invokeAction("nFORCE.RemoteActionController.invoke",c.namespacePrefix+"UniDocManRemoteActionController.deleteCollection",{collectionId:e},function(e,t){t.status?n.resolve(e):(UniDocMan.dispatchErrorEvent(t.type,t.message,t.where),n.reject(t.message))},{escape:!1,buffer:!1}),n.promise},sendCollection:function sendCollection(e,t){var n=s.defer();return Visualforce.remoting.Manager.invokeAction("nFORCE.RemoteActionController.invoke",c.namespacePrefix+"UniDocManRemoteActionController.sendCollectionForSignature",{collectionId:e,signerMessage:t,contextObjectId:window.DocManId},function(e,t){e.sendResult?n.resolve(e.sendResult):(UniDocMan.dispatchErrorEvent(t.type,e.errorMessage,t.where),n.reject(e.errorMessage))},{escape:!1,buffer:!1}),n.promise},getCollectionIds:function getCollectionIds(e){var n=s.defer();return Visualforce.remoting.Manager.invokeAction(c.namespacePrefix+"UniversalDocManController.getCollectionIds",e,function(e,t){t.status?n.resolve(e):(UniDocMan.dispatchErrorEvent(t.type,t.message,t.where),n.reject(t.message))},{escape:!1,buffer:!1}),n.promise},cancelSignatureCollection:function cancelSignatureCollection(e){var n=s.defer();return Visualforce.remoting.Manager.invokeAction(c.namespacePrefix+"UniversalDocManController.cancelSignatureCollection",e,function(e,t){t.status?n.resolve(e):(UniDocMan.dispatchErrorEvent(t.type,t.message,t.where),n.reject(t.message))},{escape:!1,buffer:!1}),n.promise},getESignatureDefaultMessage:function getESignatureDefaultMessage(){var n=s.defer();return Visualforce.remoting.Manager.invokeAction("nFORCE.RemoteActionController.invoke",c.namespacePrefix+"UniDocManRemoteActionController.getESignatureDefaultMessage",{contextObjectId:window.DocManId},function(e,t){t.status?n.resolve(e):(UniDocMan.dispatchErrorEvent(t.type,t.message,t.where),n.reject(t.message))},{escape:!1,buffer:!1}),n.promise},linkDocumentVersion:function linkDocumentVersion(e,t,n,o,r,a,i){var l=s.defer();return Visualforce.remoting.Manager.invokeAction("nFORCE.RemoteActionController.invoke",c.namespacePrefix+"UniDocManRemoteActionController.LinkDocumentVersion",{sourceContentVersionId:e,targetPlaceholderId:t,additionalProperties:n,isImported:o,isExternalDocument:r,fileName:a,sourceDocumentVersionId:i},function(e,t){t.status?l.resolve(e):(UniDocMan.dispatchErrorEvent(t.type,t.message,t.where),l.reject(t.message))},{escape:!1,buffer:!1}),l.promise},retrieveDependentPicklist:function retrieveDependentPicklist(e,t,n){var o=s.defer();return Visualforce.remoting.Manager.invokeAction("nFORCE.RemoteActionController.invoke",c.namespacePrefix+"UniDocManRemoteActionController.retrieveDependentPicklist",{objectType:e,controllingField:t,dependentField:n},function(e,t){t.status?o.resolve(e):o.reject(t.message)},{escape:!1,buffer:!1}),o.promise},getReviewStatusOptions:function getReviewStatusOptions(){var n=s.defer();""===window.DocManId&&(window.DocManId=c.config.contextIdPageParam);return Visualforce.remoting.Manager.invokeAction("nFORCE.RemoteActionController.invoke",c.namespacePrefix+"UniDocManRemoteActionController.retrieveReviewStatusOptions",{contextObjectId:window.DocManId},function(e,t){t.status?n.resolve(e):(UniDocMan.dispatchErrorEvent(t.type,t.message,t.where),n.reject(t.message))},{escape:!1,buffer:!1}),n.promise},requestPortalDocuments:function requestPortalDocuments(e){var n=s.defer(),e=JSON.stringify(e);return Visualforce.remoting.Manager.invokeAction("nFORCE.RemoteActionController.invoke",c.namespacePrefix+"UniDocManRemoteActionController.requestPortalDocuments",{placeholders:e,contextObjectId:window.DocManId},function(e,t){t.status?n.resolve(e):(UniDocMan.dispatchErrorEvent(t.type,t.message,t.where),n.reject(t.message))},{escape:!1,buffer:!1}),n.promise},cancelPortalRequests:function cancelPortalRequests(e){var n=s.defer(),e=JSON.stringify(e);return Visualforce.remoting.Manager.invokeAction("nFORCE.RemoteActionController.invoke",c.namespacePrefix+"UniDocManRemoteActionController.cancelPortalRequests",{placeholderIds:e,contextObjectId:window.DocManId},function(e,t){t.status?n.resolve(e):(UniDocMan.dispatchErrorEvent(t.type,t.message,t.where),n.reject(t.message))},{escape:!1,buffer:!1}),n.promise},getBulkUpdateScreenSectionData:function getBulkUpdateScreenSectionData(e,t){var n=s.defer();return Visualforce.remoting.Manager.invokeAction("nFORCE.RemoteActionController.invoke",c.namespacePrefix+"UniDocManRemoteActionController.getBulkUpdateScreenSectionData",{contextId:e,placeholderIds:JSON.stringify(t)},function(e,t){t.status?n.resolve(e):(UniDocMan.dispatchErrorEvent(t.type,t.message,t.where),n.reject(t.message))},{escape:!1,buffer:!1}),n.promise},updateRequirementRemote:function updateRequirementRemote(e){var n=s.defer();return Visualforce.remoting.Manager.invokeAction("nFORCE.RemoteActionController.invoke",c.namespacePrefix+"UniDocManRemoteActionController.updateRequirementRemote",{placeholderIds:JSON.stringify(e)},function(e,t){t.status?n.resolve(e):(UniDocMan.dispatchErrorEvent(t.type,t.message,t.where),n.reject(t.message))},{escape:!1,buffer:!1}),n.promise},retrieveActiveDocumentCollections:function retrieveActiveDocumentCollections(e){var n=s.defer();return Visualforce.remoting.Manager.invokeAction("nFORCE.RemoteActionController.invoke",c.namespacePrefix+"UniDocManRemoteActionController.RetrieveActiveDocumentCollections",{collectionIds:JSON.stringify(e)},function(e,t){t.status?n.resolve(e):(UniDocMan.dispatchErrorEvent(t.type,t.message,t.where),n.reject(t.message))},{escape:!1,buffer:!1}),n.promise},associateDocsToCollection:function associateDocsToCollection(e,t){var n=s.defer();return Visualforce.remoting.Manager.invokeAction("nFORCE.RemoteActionController.invoke",c.namespacePrefix+"UniDocManRemoteActionController.AssociateDocsToCollection",{contextId:window.DocManId,docStoreIds:JSON.stringify(e),collectionId:t},function(e,t){t.status?n.resolve(e,t):(UniDocMan.dispatchErrorEvent(t.type,t.message,t.where),n.reject(t.message))},{escape:!1,buffer:!1}),n.promise},createVendorCollection:function createVendorCollection(e,t){var n=s.defer();return Visualforce.remoting.Manager.invokeAction("nFORCE.RemoteActionController.invoke",c.namespacePrefix+"UniDocManRemoteActionController.CreateVendorCollection",{contextId:window.DocManId,docStoreIds:JSON.stringify(e),collectionId:t},function(e,t){t.status?n.resolve(e):(UniDocMan.dispatchErrorEvent(t.type,t.message,t.where),n.reject(t.message))},{escape:!1,buffer:!1}),n.promise},unlinkRequirementFromPlaceholder:function unlinkRequirementFromPlaceholder(e){var n=s.defer();return Visualforce.remoting.Manager.invokeAction("nFORCE.RemoteActionController.invoke",c.namespacePrefix+"UniDocManRemoteActionController.unlinkRequirementFromPlaceholder",{placeholderIds:JSON.stringify(e)},function(e,t){t.status?n.resolve(e):(UniDocMan.dispatchErrorEvent(t.type,t.message,t.where),n.reject(t.message))},{escape:!1,buffer:!1}),n.promise},getESignatureTaggingUrl:function getESignatureTaggingUrl(e){var n=s.defer();return Visualforce.remoting.Manager.invokeAction("nFORCE.RemoteActionController.invoke",c.namespacePrefix+"UniDocManRemoteActionController.GetESignatureTaggingUrl",{collectionId:e},function(e,t){t.status?n.resolve(e):(UniDocMan.dispatchErrorEvent(t.type,t.message,t.where),n.reject(t.message))},{escape:!1,buffer:!1}),n.promise},retrieveFieldSetMetadata:function retrieveFieldSetMetadata(e,t){var n=s.defer();return Visualforce.remoting.Manager.invokeAction("nFORCE.RemoteActionController.invoke","LLC_BI.FieldSetMetadataLoaderRemote_v1.Load",{args:JSON.stringify({filters:{contextType:e,identities:t}})},function(e,t){t.status?n.resolve(e):(UniDocMan.dispatchErrorEvent(t.type,t.message,t.where),n.reject(t.message))},{escape:!1,buffer:!1}),n.promise},getScreenSectionsForContextObject:function getScreenSectionsForContextObject(e){var n=s.defer();return Visualforce.remoting.Manager.invokeAction("nFORCE.RemoteActionController.invoke",c.namespacePrefix+"UniDocManRemoteActionController.retrieveScreenSections",{contextObjectId:window.DocManId,addNew:e},function(e,t){t.status?n.resolve(e):n.reject(t.message)},{escape:!1,buffer:!1}),n.promise}}}angular.module("app").service("universalDocManRemotingService",universalDocManRemotingService),universalDocManRemotingService.$inject=["$q","config"]}()},function(e,t){!function(){"use strict";function commonService(i,l,a,s,c,d,u,e,o,f,p,t,E,m){var g=E.getLabels(),h={updatePlaceholderProperties:function updatePlaceholderProperties(e,t,n,o){e.file=n,p.convertPropertyNamesFromCamelCase([e]),e.file.ContentSize&&(e.file.Size=e.file.ContentSize);e.file.ParentId&&(e.documentStoreId=e.file.ParentId);e.accountId=o,p.setStatuses(e),e.uploadingFile=!1,t(e)},uploadProgress:function uploadProgress(e,t,n){e.uploadingFile||(e.uploadingFile=!0);e.uploadProgress=n||Math.floor(t.loaded/t.total*100);100==e.uploadProgress&&setTimeout(function(){e.uploadingFile=!1},1200)},getDataTransfer:function getDataTransfer(e){return e.dataTransfer||e.originalEvent.dataTransfer},createFileStagingPlaceholder:function createFileStagingPlaceholder(t,n,r,a){f.createFileStagingPlaceholder().then(function(e){var o=e[0];s.stagedFiles.push(o),o.uploadingFile||(o.uploadingFile=!0),o.fileUploadingText=g.UPLOADING+" "+t.name+c.THREE_PERIODS,p.uploadingToPlaceholder=o,l.uploadContentDocument(t,n,function(e){r.$parent.controller.postScreenreaderAlert(o.fileUploadingText,"file-new-uploading-file",!0,"docManAlerterFS"),o.uploadingFile=!1,i.$broadcast(c.FILE_STAGING_UPLOAD_COMPLETE),!0===e.isExternal?(s.retrieveFileStagingPlaceholders().then(function(){}),a&&a()):f.createDocumentStorageMetadata(e.id,o.recordId,null,p.generateFileMetadata(o,t)).then(function(e){o.file=e,p.prepareForUrls([o]).then(function(){a&&a()})})},function(e,t,n){r.$apply(function(){o.uploadingFile=!1,console.log(e),console.log(t),console.log(n)})},function(e){r.$apply(function(){o.uploadingFile||(o.uploadingFile=!0),o.uploadProgress=Math.floor(e.loaded/e.total*100)})})})},getDateFieldNames:getDateFieldNames,formatDateFieldsForDisplay:function formatDateFieldsForDisplay(e,t){for(var n=0;n<t.length;n++){var o=t[n];e[o]&&(e[o]=convertMillisecondsToDate(e[o]))}},formatDateFieldsForInput:function formatDateFieldsForInput(e,t){for(var n=getDateFieldNames(t),o=0;o<n.length;o++){var r=n[o];e.fields[r]&&(e.fields[r]=formatUTCDateToMilliseconds(new Date(e.fields[r])))}},formatMillisecondsToUTCDate:function formatMillisecondsToUTCDate(e){return e?(e=parseInt(e),window.LifeCycle.Internationalize.format(new Date(parseInt(e)),"zzz")):""},formatUTCDateToMilliseconds:formatUTCDateToMilliseconds,checkForExistingContentDocument:function checkForExistingContentDocument(e){var t=o.defer(),n=null;e.ParentId&&(n=e.ParentId);null!=n?f.isDocStoreShared(n).then(function(e){!0===e&&(n=null),t.resolve([null,n])}):t.resolve([null,n]);return t.promise},performStatusUpdate:function performStatusUpdate(t,n,o){{var r,e;n&&o&&(r=n.status,setElementOpacity(e=document.getElementById("status-btn-"+n.recordId),"0.5"),a.updatePlaceholderStatus(n.recordId,o,function(){var e;o!=r&&(e=g.STATUS_CHANGED_FROM+" "+E.getLabel(r,1)+" "+g.TO_LABEL+" "+E.getLabel(o,1)+c.PERIOD),o.translation===E.getLabel(c.STATUS_EXCEPTION)&&n.portalEnabled&&(e+=" "+g.PORTAL_REJECTION_REASON_CHANGED+" "+n.portalRejectionReason+" "+g.PORTAL_REJECTION_COMMENT_CHANGED+" "+n.portalRejectionComment+c.DOUBLE_QUOTE+c.PERIOD),n.newComment&&(e+="  "+n.newComment),n.newComment=e,f.savePlaceholderData(n.recordId,null,null).then(function(e){!function retrievePlaceholderWithFields(n,o,e){var r=document.getElementById("status-btn-"+o.recordId);a.retrievePlaceholderWithFields(o.recordId,function(t){a.retrievePlaceholderFieldSet(o.recordId,function(e){n.$apply(function(){h.setExceptionDates(t),o.fieldSetSchema=JSON.parse(e),o.fields=t,o.status!==E.getLabel(c.STATUS_EXCEPTION)&&angular.forEach(c.EXCEPTION_DATE_FIELDS,function(e,t){o.fields[t]&&(o.fields[t]=null)}),n.controller.retrieveChatterComments(n.controller.selectedPlaceholder)}),setElementOpacity(r,"1.0")},function(){setElementOpacity(r,"1.0"),o.status=e})},function(){o.status=e})}(t,n,r),p.copyPlaceholderProperties(e[0],n),t.controller.addChatterComment(n),t.controller.shouldAlertPortalRejection&&(t.controller.postScreenreaderAlert(t.controller.labels.PLACEHOLDER_PORTAL_REJECTION_SAVE_SUCCESSFUL,"portal-reject-save-success",!0),t.controller.shouldAlertPortalRejection=!1),n.file?n.file.previewLoaded=!0:n.file={previewLoaded:!0,previewLink:""},p.setStatuses(n)})},function(){setElementOpacity(e,"1.0"),n.status=r}))}},copyToClipboard:function copyToClipboard(e){var t=!1;if(window.clipboardData&&window.clipboardData.setData)t=clipboardData.setData("Text",e);else if(document.queryCommandSupported&&document.queryCommandSupported("copy")){var n=document.createElement("textarea");n.textContent=e,n.style.position="fixed",document.body.appendChild(n),n.select();try{t=document.execCommand("copy")}finally{document.body.removeChild(n)}}var o=angular.element("button.slds-notify__close"),e=(o.css("opacity",0),u.ERROR),n=d.THEME_ERROR,r=d.COPY_ERROR_MSG;t&&(e=u.SUCCESS,n=d.THEME_SUCCESS,r=d.LINK_COPY_SUCCESS_MSG);i.$broadcast(c.SET_TOAST,{type:e,theme:n,body:r}),setTimeout(function(){o.click().css("opacity",1)},1500)},normalizeCompare:function normalizeCompare(e,t){if(e.length&&t.length)return e.toLowerCase()==t.toLowerCase();return!1},setElementOpacity:setElementOpacity,convertMillisecondsToDate:convertMillisecondsToDate,addOffsetAndConvertToDateTime:function addOffsetAndConvertToDateTime(e){return convertMillisecondsToDateTime(function applyAggregateOffset(e,t){return window.LifeCycle.Internationalize.timeZoneUtil.applyAggregateOffset(e,t)}("add",e))},convertMillisecondsToDateTime:convertMillisecondsToDateTime,getDocStoresFromSelectedPlaceholders:function getDocStoresFromSelectedPlaceholders(e){for(var t=[],n=0;n<e.length;n++)e[n].isSelected&&t.push(e[n].documentStoreId);return t},getChatterStatusChangeComment:function getChatterStatusChangeComment(e,t,n){e=e+" "+g.WAS_ADDED+c.PERIOD;t&&t!==n&&(e+=" "+g.STATUS_CHANGED_FROM+" "+E.getLabel(t,1)+" "+g.TO_LABEL+" "+E.getLabel(n,1)+c.PERIOD);return e},setExceptionDates:function setExceptionDates(a){var i=m.formBuilder.fields;angular.forEach(i,function(e,t){var n=i[t];if(n)for(var o=0;o<n.length;o++){var r=n[o];r.fieldName==c.EXCEPTION_DATE_FIELDS[0]?m.formBuilder.fields[t][o].value=a[c.EXCEPTION_DATE_FIELDS[0]]:r.fieldName==c.EXCEPTION_DATE_FIELDS[1]&&(m.formBuilder.fields[t][o].value=a[c.EXCEPTION_DATE_FIELDS[1]])}})}};return h;function getDateFieldNames(e){for(var t=[],n=0;n<e.length;n++)e[n].type===c.DATE_TYPE&&t.push(e[n].fieldPath);return t}function formatUTCDateToMilliseconds(e){return new Date(e).getTime()}function convertMillisecondsToDate(e){return e?(e+=6e4*new Date(e).getTimezoneOffset(),new String(new Date(parseInt(e))).replace('"',"")):null}function convertMillisecondsToDateTime(e){return e?new String(new Date(parseInt(e))).replace('"',""):null}function setElementOpacity(e,t){e&&(e.style.opacity=t)}}angular.module("app").service("commonService",commonService),commonService.$inject=["$rootScope","uploadService","dataService","fileStagingService","CONSTANTS","ALERT_DIALOG","TOAST_TYPES","$filter","$q","universalDocManRemotingService","placeholderService","config","labels","screenSection"]}()},function(e,t){!function(){"use strict";function permissionService(o,n,e,r,t,R,a,i,b){var l=this,M=(l.configValues=i.get(),[]),s=!1,U=!1,c=!1,y=!1,d=!1,u=!1,f=!1,p=!1,E=!1,m=!1,g=!1,h=!1,v=!1,T=!1,S=!1,F=!1,P=!1,C=!1,_=!1,k=!1,D=!1,A=!1,I=!1,N=!1,V=!1,O=!1,w=!1,L=!1,x=!1,B=!1;return l.userRoleName="",l.userProfileName="",l.userLicenseType="",l.userGroupsList=[],l.userDocTypes=null,{hasCollateralImport:function hasCollateralImport(){return B},hasDeleteFilesPermission:hasDeleteFilesPermission,hasDeletePlaceholderPermission:hasDeletePlaceholderPermission,hasEditAfterApprovalPermission:function hasEditAfterApprovalPermission(e,t,n){return!(isESignLockedPlaceholder(t)&&!n||t==b.getLabel(r.STATUS_APPROVED)&&!y)&&hasPermission(l.configValues.contextObjectType,e)},hasEditDetailsAndCreatePlaceholderPermission:hasEditDetailsAndCreatePlaceholderPermission,hasEditDetailsPermission:hasEditDetailsPermission,hasPermission:hasPermission,hasPortalAdminPermission:hasPortalAdminPermission,hasPrepareForESignature:function hasPrepareForESignature(){return(E||d)&&k},hasProductPackageLevelPermission:hasProductPackageLevelPermission,hasRelationshipImport:function hasRelationshipImport(){return x},hasUniGrantViewerPermission:L,hasRequiredRole:hasRequiredRole,hasRequiredViewerAccess:function hasRequiredViewerAccess(e){var t=[];if(null!=e){if(!function hasRequiredDocType(e){return null==l.userDocTypes||(e=e&&e.trim().toLowerCase(),0!==l.userDocTypes.length&&-1<l.userDocTypes.indexOf(e))}(e.category))return!1;null!=e.viewerGroups&&0<e.viewerGroups.trim().length&&t.push(function hasRequiredGroup(e){if(l.userGroupsList)for(var t=0;t<l.userGroupsList.length;t++)if(checkListForString(e,l.userGroupsList[t].toLowerCase().trim()))return!0;return!1}(e.viewerGroups)),null!=e.viewerProfiles&&0<e.viewerProfiles.trim().length&&t.push(function hasRequiredProfile(e){return checkListForString(e,l.userProfileName)}(e.viewerProfiles)),null!=e.viewerRoles&&0<e.viewerRoles.trim().length&&t.push(hasRequiredRole(e.viewerRoles))}for(var n=0;n<t.length;n++)if(t[n])return!0;if(isDefaultExternalPermissionsEnabled()&&isExternalUser())return!1;return 0===t.length},getViewerPermissions:function getViewerPermissions(e){var t=[];null!=e.viewerGroups&&0<e.viewerGroups.trim().length&&(t=t.concat(getListFromString(e.viewerGroups)));null!=e.viewerProfiles&&0<e.viewerProfiles.trim().length&&(t=t.concat(getListFromString(e.viewerProfiles)));null!=e.viewerRoles&&0<e.viewerRoles.trim().length&&(t=t.concat(getListFromString(e.viewerRoles)));return t},hasReviewDocumentsPermission:hasReviewDocumentsPermission,initialize:function initialize(e){(function retrieveImportPermissions(){x=i.get().systemPropsMap.get(t.RELATIONSHIP_IMPORT_KEY),B=i.get().systemPropsMap.get(t.COLLATERAL_IMPORT_KEY)})(),setUserGroupsList(l.configValues.userGroupsList),setUserProfileName(l.configValues.userProfileName),setUserLicenseType(l.configValues.userLicenseType),setUserDocTypes(l.configValues.userDocTypes),angular.forEach(e,function(e,t){var n=e;switch(this.push(e),n){case o.APPROVED:0;break;case o.EDIT:0;break;case o.EMPTY_STAGING:0;break;case o.UPLOAD:0;break;case o.UNI_CREATE_PLACEHOLDER_NAME:s=!0;break;case o.UNI_UPDATE_PLACEHOLDER_NAME:U=!0;break;case o.UNI_EDIT_AFTER_APPROVAL:y=!0;break;case o.UNI_EDIT_AND_CREATE_PLACEHOLDERS:d=!0;break;case o.UNI_EDIT_AND_CREATE_LOAN_PLACEHOLDERS:u=!0;break;case o.UNI_EDIT_AND_CREATE_TREASURY_PLACEHOLDERS:f=!0;break;case o.UNI_EDIT_AND_CREATE_DEPOSIT_PLACEHOLDERS:p=!0;break;case o.UNI_EDIT_DETAILS:E=!0;break;case o.UNI_EDIT_LOAN_DETAILS:m=!0;break;case o.UNI_EDIT_TREASURY_DETAILS:g=!0;break;case o.UNI_EDIT_DEPOSIT_DETAILS:h=!0;break;case o.UNI_DELETE:c=!0;break;case o.UNI_DELETE_LOAN_FILES:v=!0;break;case o.UNI_DELETE_TREASURY_FILES:T=!0;break;case o.UNI_DELETE_DEPOSIT_FILES:S=!0;break;case o.UNI_PORTAL_ADMIN:V=!0;break;case o.UNI_LOAN_PORTAL_ADMIN:O=!0;break;case o.UNI_DEPOSIT_PORTAL_ADMIN:w=!0;break;case o.UNI_PREPARE_FOR_E_SIGNATURE:k=!0;break;case o.UNI_REVIEW_DOCUMENTS:D=!0;break;case o.UNI_REVIEW_LOAN_DOCUMENTS:A=!0;break;case o.UNI_REVIEW_TREASURY_DOCUMENTS:I=!0;break;case o.UNI_REVIEW_DEPOSIT_DOCUMENTS:N=!0;break;case o.UNI_DELETE_PLACEHOLDERS:F=!0;break;case o.UNI_DELETE_LOAN_PLACEHOLDERS:_=!0;break;case o.UNI_DELETE_DEPOSIT_PLACEHOLDERS:C=!0;break;case o.UNI_DELETE_TREASURY_PLACEHOLDERS:P=!0;break;case o.UNI_GRANT_VIEWER_PERMISSIONS:L=!0}},M)},isESigPendingCanceledException:function isESigPendingCanceledException(e){e=e?e.toUpperCase():"";return-1<[r.STATUS_SIGNATURE_CANCEL_PENDING.toUpperCase(),r.STATUS_SIGNATURE_PENDING.toUpperCase(),r.STATUS_SIGNATURE_EXCEPTION.toUpperCase()].indexOf(e)},isDefaultExternalPermissionsEnabled:isDefaultExternalPermissionsEnabled,isESignLockedPlaceholder:isESignLockedPlaceholder,isExternalUser:isExternalUser,isLockedPlaceholder:isESignLockedPlaceholder,notHaveViewingRole:function notHaveViewingRole(e){return!hasRequiredRole(e)},setUserGroupsList:setUserGroupsList,setUserProfileName:setUserProfileName,setUserRoleName:function setUserRoleName(e){null!=e&&(l.userRoleName=e.toLowerCase().trim())},setUserDocTypes:setUserDocTypes,setUserLicenseType:setUserLicenseType};function setUserGroupsList(e){l.userGroupsList=e}function setUserProfileName(e){l.userProfileName=e.toLowerCase().trim()}function setUserLicenseType(e){null!=e&&(l.userLicenseType=e.toLowerCase().trim())}function setUserDocTypes(e){if(null!=e){l.userDocTypes=[];for(var t=0;t<e.length;t++)l.userDocTypes.push(e[t].trim().toLowerCase())}else l.userDocTypes=null}function hasPermission(e,t){return e===r.CONTEXT_OBJECT_TYPE_PRODUCT_PACKAGE&&null!=a.selectedProductInProductPackage&&(e=a.selectedProductInProductPackage.objectType)===r.CONTEXT_OBJECT_TYPE_PRODUCT_PACKAGE?hasProductPackageLevelPermission(t):evaluatePermission(e,t)}function evaluatePermission(e,t){if(t===n.UNI_EDIT_AND_CREATE_PLACEHOLDERS)return hasEditDetailsAndCreatePlaceholderPermission(e);if(t===n.UNI_EDIT_DETAILS)return hasEditDetailsPermission(e);if(t===n.UNI_DELETE)return hasDeleteFilesPermission(e);if(t===n.UNI_PORTAL_ADMIN)return hasPortalAdminPermission(e);if(t===n.UNI_REVIEW_DOCUMENTS)return hasReviewDocumentsPermission(e);if(t===n.UNI_DELETE_PLACEHOLDERS)return hasDeletePlaceholderPermission(e);switch(t){case n.UNI_CREATE_PLACEHOLDER_NAME:return s;case n.UNI_UPDATE_PLACEHOLDER_NAME:return U;case n.UNI_GRANT_VIEWER_PERMISSIONS:return L;default:return!1}}function hasProductPackageLevelPermission(e){for(var t=!1,n=a.productPackageProducts,o=0;o<n.length;o++)if(evaluatePermission(n[o].objectType,e)){t=!0;break}return t}function hasDeletePlaceholderPermission(e){return!!e&&(!!F||(e===r.CONTEXT_OBJECT_TYPE_ACCOUNT?_||P||C:e===r.CONTEXT_OBJECT_TYPE_LOAN||e===r.CONTEXT_OBJECT_TYPE_COLLATERAL?_:e===r.CONTEXT_OBJECT_TYPE_TREASURY?P:e===r.CONTEXT_OBJECT_TYPE_DEPOSIT&&C))}function hasEditDetailsAndCreatePlaceholderPermission(e){return!!e&&(!!d||(e===r.CONTEXT_OBJECT_TYPE_ACCOUNT?d||u||p||f:e===r.CONTEXT_OBJECT_TYPE_LOAN||e===r.CONTEXT_OBJECT_TYPE_COLLATERAL?u:e===r.CONTEXT_OBJECT_TYPE_TREASURY?f:e===r.CONTEXT_OBJECT_TYPE_DEPOSIT&&p))}function hasEditDetailsPermission(e){return!!e&&(!(!E&&!hasEditDetailsAndCreatePlaceholderPermission(e))||(e===r.CONTEXT_OBJECT_TYPE_ACCOUNT?E||m||h||g:e===r.CONTEXT_OBJECT_TYPE_LOAN||e===r.CONTEXT_OBJECT_TYPE_COLLATERAL?m:e===r.CONTEXT_OBJECT_TYPE_TREASURY?g:e===r.CONTEXT_OBJECT_TYPE_DEPOSIT&&h))}function hasDeleteFilesPermission(e){return!!e&&(!!c||(e===r.CONTEXT_OBJECT_TYPE_ACCOUNT?c||v||S||T:e===r.CONTEXT_OBJECT_TYPE_LOAN||e===r.CONTEXT_OBJECT_TYPE_COLLATERAL?v:e===r.CONTEXT_OBJECT_TYPE_TREASURY?T:e===r.CONTEXT_OBJECT_TYPE_DEPOSIT&&S))}function hasReviewDocumentsPermission(e){return!!e&&(!!D||(e===r.CONTEXT_OBJECT_TYPE_ACCOUNT?D||A||N||I:e===r.CONTEXT_OBJECT_TYPE_LOAN||e===r.CONTEXT_OBJECT_TYPE_COLLATERAL?A:e===r.CONTEXT_OBJECT_TYPE_TREASURY?I:e===r.CONTEXT_OBJECT_TYPE_DEPOSIT&&N))}function hasPortalAdminPermission(e){return!!e&&(!!V||(e===r.CONTEXT_OBJECT_TYPE_ACCOUNT?O||w:e===r.CONTEXT_OBJECT_TYPE_LOAN?O:e===r.CONTEXT_OBJECT_TYPE_DEPOSIT&&w))}function getListFromString(e){for(var t=e.split(";"),n=0;n<t.length;n++)t[n]=t[n].trim().toLowerCase();return t}function hasRequiredRole(e){return checkListForString(e,l.userRoleName)}function checkListForString(e,t){return null==e||""===e||!(0<(e=e.trim()).length)||(0<e.indexOf(";")?-1<e.toLowerCase().replace(/\s*;\s*/g,";").split(";").indexOf(t):e.toLowerCase().trim()===t)}function isExternalUser(){return[e.EXTERNAL_APPS.toLowerCase(),e.CUSTOMER_COMMUNITY.toLowerCase(),e.CUSTOMER_COMMUNITY_PLUS.toLowerCase(),e.PARTNER_COMMUNITY.toLowerCase(),e.CHANNEL_ACCOUNT.toLowerCase()].includes(l.userLicenseType)}function isDefaultExternalPermissionsEnabled(){return i.get().systemPropsMap.get(t.EXTERNAL_PLACEHOLDER_DEFAULTS)}function isESignLockedPlaceholder(e){e=e?e.toUpperCase():"";return-1<[r.STATUS_SIGNATURE_CANCEL_PENDING.toUpperCase(),r.STATUS_SIGNATURE_EXCEPTION.toUpperCase(),r.STATUS_SIGNATURE_NEEDED.toUpperCase(),r.STATUS_SIGNATURE_PENDING.toUpperCase(),r.STATUS_SIGNATURE_READY_TO_TAG.toUpperCase(),r.STATUS_SIGNATURE_UPLOADING.toUpperCase()].indexOf(e)}}angular.module("app").service("permissionService",permissionService),permissionService.$inject=["PERMISSION_NAMES","PERMISSIONS","COMMUNITY_USER_LICENSE_NAMES","CONSTANTS","SYSTEM_PROPERTIES","universalDocManRemotingService","productPackageService","config","labels"]}()},function(e,t){!function(){"use strict";function placeholderService(r,a,o,i,l,t,s,c,d,u,f,p,e){var E={placeholders:[],placeholderApexTypeToApiNameMap:[],signedStatus:s.get().systemPropsMap.get(c.UNI_ESIGN_SIGNED_STATUSES),statusLists:[],statusTheme:[],uploadingToPlaceholder:{},isTranslated:null,buildImageUrls:function buildImageUrls(e){for(var t=a.defer(),n=0;n<Object.keys(e).length;n++){var o=e[Object.keys(e)[n]];o.file.previewUnavailable=!1,o.file.isPreviewSupported=E.isPreviewSupported(o.file.FileType),o.file.isPreviewSupported?(o.file.previewLink=d.CONTENT_PREVIEW_URL+o.file.Id,o.file.FileExtension&&-1!==u.indexOf(o.file.FileExtension.toLowerCase())?o.file.enlargedPreviewLink=d.CONTENT_ENLARGED_PREVIEW_URL_IMAGES_PART_1+o.file.Id+d.CONTENT_ENLARGED_PREVIEW_URL_IMAGES_PART_2:o.file.enlargedPreviewLink=d.CONTENT_ENLARGED_PREVIEW_URL+o.file.Id+d.CONTENT_ENLARGED_PREVIEW_URL_CONTENTID+o.file.Id+d.CONTENT_ENLARGED_PREVIEW_URL_CURRENTTIME+r.currentTime):o.file.previewUnavailable=!0,sendPreviewLinkURLRequest(o.file.previewLink),sendPreviewLinkURLRequest(o.file.enlargedPreviewLink)}return t.resolve(),t.promise},copyPlaceholderProperties:function copyPlaceholderProperties(e,t){{if(!e||!t)return!1;convertPropertyNamesFromCamelCase([e,t]);for(var n,o=c.WORKFLOW_UPDATE_FIELDS,r="",a=0;a<c.WORKFLOW_UPDATE_FIELDS_PREFIX_NEEDED.length;a++)o.push(window.UniDocMan.namespacePrefix+c.WORKFLOW_UPDATE_FIELDS_PREFIX_NEEDED[a]);if(null!=t.fieldSetSchema)for(a=0;a<t.fieldSetSchema.length;a++){var i=t.fieldSetSchema[a].fieldPath;if(-1<o.indexOf(i)){r=i;break}}for(n in t)t.hasOwnProperty(n)&&e.hasOwnProperty(n)&&(n===c.YEAR_KEY&&""!=e[n]&&""==t[n]&&t.fields&&(t.fields[r]=e[n]),t[n]=e[n])}},convertPropertyNamesFromCamelCase:convertPropertyNamesFromCamelCase,generateFileMetadata:function generateFileMetadata(e,t){e.fileName=t.name,e.fileSize=t.size,e.mimeType=""===t.type?c.EXTENSION_NATIVE_MIME_TYPE[e.fileName.substring(e.fileName.lastIndexOf(".")+1)]||"":t.type;var n={},o=c.FILE_NAME_CLASSIC,r=c.FILE_SIZE_CLASSIC,a=c.FILE_MIME_TYPE_CLASSIC;e.apexType==c.NAMESPACE_PREFIX+"."+c.CONTEXT_OBJECT_UNIVERSAL_DOC&&(o=c.FILE_NAME_UNIVERSAL,r=c.FILE_SIZE_UNIVERSAL,a=c.FILE_MIME_TYPE_UNIVERSAL);return n[E.placeholderApexTypeToApiNameMap[e.apexType]]={},n[E.placeholderApexTypeToApiNameMap[e.apexType]][o]=t.name,n[E.placeholderApexTypeToApiNameMap[e.apexType]][r]=t.size,n[E.placeholderApexTypeToApiNameMap[e.apexType]][a]=e.mimeType,JSON.stringify(n)},isPreviewSupported:function isPreviewSupported(e){return-1!==d.PREVIEW_SUPPORTED_EXTENSIONS.indexOf(e)},loadRejectionReasonPicklistValues:function loadRejectionReasonPicklistValues(e){var t=a.defer(),n=e.indexOf(".")+1,n=c.PLACEHOLDER_APEX_TYPE_TO_API_NAME[e.substring(n,e.length)];return o.retrieveDependentPicklist(n,c.REJECTION_REASON_FIELD,UniDocMan.namespacePrefix+c.REJECTION_COMMENT_FIELD).then(function(e){var n=[],o=0;angular.forEach(e,function(e,t){t={id:o,reason:t,comment:e[0]};n.push(t),o++}),t.resolve(n),l.picklistValues=n}),t.promise},placeholderHasFileOrExternal:function placeholderHasFileOrExternal(e){var t=!1;e&&(e.file&&void 0!==e.file.Id&&e.file.Id||e.documentStorageType&&e.isDocumentExternal)&&(t=!0);return t},populateStatusObjects:populateStatusObjects,prepareForUrls:function prepareForUrls(e){if(e&&0<e.length){E.convertPropertyNamesFromCamelCase(e);for(var t,n=[],o=0;o<e.length;o++)(t=e[o]).file&&t.file.FileType&&t.file.ParentId&&(n[t.file.ParentId]=t);if(0<Object.keys(n).length)return E.buildImageUrls(n)}var r=a.defer();return r.resolve(),r.promise},retrievePlaceholders:function retrievePlaceholders(){var t=a.defer();return a.all([o.retrieveDocuments(),o.getReviewStatusOptions()]).then(function(e){p.setLabels(e[1]),populateStatusObjects(),E.placeholders=e[0],E.convertPropertyNamesFromCamelCase(E.placeholders),E.placeholders&&angular.forEach(E.placeholders,function(e,t){E.setStatuses(e)}),t.resolve()}).catch(e=>{if(e.includes("ENTITY_IS_LOCKED"))return t.reject("ENTITY_IS_LOCKED");throw new Error(e)}),t.promise},retrieveIsTranslated:function retrieveIsTranslated(){{var t;return null===E.isTranslated?(t=a.defer(),o.retrieveIsTranslated().then(function(e){E.isTranslated=e,t.resolve()}),t.promise):new Promise(function(e,t){e()})}},sendPreviewLinkURLRequest:sendPreviewLinkURLRequest,setStatuses:function setStatuses(e){var t=!1;e.placeholderApprovalRoles&&!i.hasRequiredRole(e.placeholderApprovalRoles)||(t=!0);var n=strToUpper(e.status);p.getLabel(n)?e.statusTranslation=p.getLabel(n):e.statusTranslation=e.status;e.file&&e.file.Id||e.isDocumentExternal?n===strToUpper(c.STATUS_SIGNATURE_NEEDED)?setStatusListValue(e,f.E_SIGNATURE):n===strToUpper(c.STATUS_SIGNATURE_PENDING)?setStatusListValue(e,f.E_SIGNATURE_PENDING):n===strToUpper(c.STATUS_SIGNATURE_CANCEL_PENDING)?setStatusListValue(e,f.STATUS_SIGNATURE_CANCEL_PENDING):n===strToUpper(c.STATUS_SIGNATURE_EXCEPTION)?setStatusListValue(e,f.STATUS_SIGNATURE_EXCEPTION):n===strToUpper(c.STATUS_SIGNATURE_READY_TO_TAG)?setStatusListValue(e,c.STATUS_SIGNATURE_READY_TO_TAG):n===strToUpper(c.STATUS_SIGNATURE_UPLOADING)?setStatusListValue(e,c.STATUS_SIGNATURE_UPLOADING):e.status===E.signedStatus?setStatusListValue(e,t?f.HAS_FILE_SIGNED_AND_APPROVAL_ROLE:f.HAS_FILE_SIGNED):setStatusListValue(e,t?f.HAS_PLACEHOLDER_APPROVAL_ROLE:f.HAS_FILE):setStatusListValue(e,f.NO_FILE)},setStatusTheme:function setStatusTheme(e){var t=E.statusTheme[e.status];null==t&&(strToUpper(e.status)===strToUpper(c.STATUS_SIGNATURE_PENDING)?t=E.statusTheme[c.STATUS_SIGNATURE_PENDING]:strToUpper(e.status)===strToUpper(c.STATUS_SIGNATURE_NEEDED)?t=E.statusTheme[c.STATUS_SIGNATURE_NEEDED]:strToUpper(e.status)===strToUpper(c.STATUS_SIGNATURE_CANCEL_PENDING)?t=E.statusTheme[c.STATUS_SIGNATURE_CANCEL_PENDING]:strToUpper(e.status)===strToUpper(c.STATUS_SIGNATURE_EXCEPTION)&&(t=E.statusTheme[c.STATUS_SIGNATURE_EXCEPTION]),null==t)&&(t=E.statusTheme[e.recordId]);return t},setVersionHistory:function setVersionHistory(t){var n=a.defer();t&&t.recordId?o.getDocumentVersions(t.recordId).then(function(e){t.versions=e,E.convertPropertyNamesFromCamelCase(t.versions),n.resolve()}):n.reject();return n.promise},strToUpper:strToUpper,translatableOrSpecialFieldType:function translatableOrSpecialFieldType(e){return(e=e.toLowerCase())==c.DATE_TYPE||e==c.DATETIME_TYPE||e==c.NUMBER_FIELD_TYPE||e==c.PERCENT_FIELD_TYPE||e==c.CURRENCY_FIELD_TYPE||e==c.URL_FIELD_TYPE},containsHyperlink:function containsHyperlink(e,t,n){if(e&&e.indexOf&&-1<e.indexOf("</a>")&&(t=(t=t.split("."))[t.length-1],n)&&n.filter){e=n.filter(function(e){return e.fieldPath==t});if(e&&e.length&&1===e.length)return e[0].isFormula}return!1},uncheckAllPlaceholders:function uncheckAllPlaceholders(){r.$$childTail.$$childTail.toggleState=!1,angular.forEach(E.placeholders,function(e,t){i.hasRequiredViewerAccess(e)&&(e.isSelected=!1)})},getContentDocumentByVersion:o.getContentDocumentByVersion,setPreviewConfiguration:o.setPreviewConfiguration,getBulkUpdateScreenSectionData:o.getBulkUpdateScreenSectionData,updateRequirementRemote:o.updateRequirementRemote,unlinkRequirementFromPlaceholder:o.unlinkRequirementFromPlaceholder};return function setPlaceholderApexTypeToApiNameMap(){var e=c.NAMESPACE_PREFIX+c.PERIOD;E.placeholderApexTypeToApiNameMap[e+c.CONTEXT_OBJECT_ACCOUNT_DOC]=c.ACCOUNT_DOC_API_NAME,E.placeholderApexTypeToApiNameMap[e+c.CONTEXT_OBJECT_LOAN_DOC]=c.LOAN_DOC_API_NAME,E.placeholderApexTypeToApiNameMap[e+c.CONTEXT_OBJECT_UNIVERSAL_DOC]=c.DOCUMENT_PLACEHOLDER_API_NAME}(),E;function setStatusListValue(e,t){var n,o=!1;E.statusLists[t]&&(n=E.statusLists[t].length);for(var r=0;r<n;r++)if(e.status&&strToUpper(E.statusLists[t][r].name)===strToUpper(e.status)){o=!0;break}!o&&n?(E.statusLists[e.recordId]=E.statusLists[t].slice(),E.statusLists[e.recordId].push({name:e.status,theme:"slds-theme--shade",translation:p.getLabel(e.status)}),E.statusTheme[e.recordId]="slds-theme--shade",e.statusListValue=e.recordId):e.statusListValue=t}function populateStatusObjects(){var e,n={},o=(n[c.STATUS_SIGNATURE_NEEDED]="slds-theme--warning",n[c.STATUS_SIGNATURE_PENDING]="slds-theme--info",n[c.STATUS_SIGNATURE_CANCEL_PENDING]="slds-theme--warning",n[c.STATUS_SIGNATURE_EXCEPTION]="slds-theme--error",n[E.signedStatus]="slds-theme--alt-inverse",n[c.STATUS_REVIEWED]="slds-theme--alt-inverse",n[c.STATUS_OPEN]="slds-theme--default openStatusIcon",n[c.STATUS_APPROVED]="slds-theme--success",n[c.STATUS_IN_FILE]="slds-theme--warning",n[c.STATUS_EXCEPTION]="slds-theme--error",n[c.STATUS_WAIVED]="",n[c.STATUS_SIGNATURE_UPLOADING]="uploading-status-theme",n[c.STATUS_SIGNATURE_READY_TO_TAG]="ready-to-tag-status-theme",n[c.STATUS_AWAITING_REVIEW]="slds-badge_inverse",{}),r=(o[f.NO_FILE]=[c.STATUS_EXCEPTION,c.STATUS_OPEN,c.STATUS_WAIVED],o[f.E_SIGNATURE]=[c.STATUS_EXCEPTION,c.STATUS_IN_FILE,c.STATUS_WAIVED],o[f.E_SIGNATURE_PENDING]=[c.STATUS_SIGNATURE_PENDING],o[f.STATUS_SIGNATURE_CANCEL_PENDING]=[c.STATUS_SIGNATURE_CANCEL_PENDING],o[f.STATUS_SIGNATURE_EXCEPTION]=[c.STATUS_SIGNATURE_EXCEPTION],o[f.HAS_FILE]=[c.STATUS_IN_FILE,c.STATUS_EXCEPTION,c.STATUS_REVIEWED,c.STATUS_WAIVED],o[f.HAS_FILE_SIGNED]=[E.signedStatus,c.STATUS_IN_FILE,c.STATUS_EXCEPTION,c.STATUS_REVIEWED,c.STATUS_WAIVED],o[f.HAS_FILE_SIGNED_AND_APPROVAL_ROLE]=[E.signedStatus,c.STATUS_APPROVED,c.STATUS_IN_FILE,c.STATUS_EXCEPTION,c.STATUS_REVIEWED,c.STATUS_WAIVED],o[f.HAS_PLACEHOLDER_APPROVAL_ROLE]=[c.STATUS_IN_FILE,c.STATUS_APPROVED,c.STATUS_EXCEPTION,c.STATUS_REVIEWED,c.STATUS_WAIVED],o[c.STATUS_SIGNATURE_UPLOADING]=[],o[c.STATUS_SIGNATURE_READY_TO_TAG]=[],e=s.get().contextObjectType===c.CONTEXT_OBJECT_TYPE_LOAN?s.get().loanDocumentReviewStatuses:s.get().contextObjectType===c.CONTEXT_OBJECT_TYPE_ACCOUNT?s.get().accountDocumentReviewStatuses:s.get().contextObjectType===c.CONTEXT_OBJECT_TYPE_PRODUCT_PACKAGE&&t.selectedProductInProductPackage&&t.selectedProductInProductPackage.objectType===c.CONTEXT_OBJECT_TYPE_LOAN?s.get().loanDocumentReviewStatuses:s.get().universalDocumentReviewStatuses,[]);angular.forEach(e,function(e,t){c.DEFAULT_STATUSES.indexOf(e)<0&&(r.push({name:e,theme:"slds-theme--alt-inverse",translation:p.getLabel(e)}),n[e]="slds-theme--alt-inverse")}),0<r.length&&angular.forEach(o,function(n,e){angular.forEach(r,function(e,t){n.push(e.name)})}),Object.keys(o).forEach(function(t){E.statusLists[t]=[],Object.keys(n).forEach(function(e){E.statusTheme[e]=n[e],-1!=o[t].indexOf(e)&&(E.statusLists[t].push({name:e,theme:n[e],translation:p.getLabel(e)}),(e=E.statusLists[t].slice(0)).sort(function(e,t){return e.translation&&t.translation?e.translation.toLowerCase().localeCompare(t.translation.toLowerCase()):e.name.toLowerCase().localeCompare(t.name.toLowerCase())}),E.statusLists[t]=e)})})}function strToUpper(e){return null!=e?e.toUpperCase():""}function sendPreviewLinkURLRequest(e){jQuery("#docmanapp").append('<img id="hiddenImage" hidden="hidden" src="/>'),jQuery("#hiddenImage").attr("src",e),jQuery("#hiddenImage").remove()}function convertPropertyNamesFromCamelCase(e){angular.forEach(e,function(e){e.file&&e.file.recordType?mapObjectProperties(e.file):e.recordType&&mapObjectProperties(e)})}function mapObjectProperties(n){angular.forEach(e,function(e,t){n.hasOwnProperty(t)&&(Object.defineProperty(n,e,Object.getOwnPropertyDescriptor(n,t)),delete n[t])})}}angular.module("app").service("placeholderService",placeholderService),placeholderService.$inject=["$rootScope","$q","universalDocManRemotingService","permissionService","picklistValueService","productPackageService","config","CONSTANTS","FILE","IMAGE_FILE_EXTENSIONS","STATUS_LIST","labels","DOCUMENT_VERSION_PROPERTY_MAP"]}()},function(e,t){!function(){"use strict";function productPackageService(t,n){var o={productPackageProducts:[],selectedProductInProductPackage:null,productPackageDocManWithoutProducts:!1,setProductPackageProducts:function setProductPackageProducts(e){e.LLC_BI__Product_Package__c&&(o.productPackageProducts=e.LLC_BI__Product_Package__c);t.get().includeProductPackageDocMan===n.STRING_VALUE_FALSE&&o.productPackageProducts.splice(0,1);0<o.productPackageProducts.length?(o.selectedProductInProductPackage=o.productPackageProducts[0],window.DocManId=o.selectedProductInProductPackage.recordId,jQuery("#placeholderSearchBar").removeClass("col-xs-12"),jQuery("#placeholderSearchBar").addClass("col-xs-8")):o.productPackageDocManWithoutProducts=!0}};return o}angular.module("app").service("productPackageService",productPackageService),productPackageService.$inject=["config","CONSTANTS"]}()},function(e,t){!function(){"use strict";function documentManagerSearchFilter(e){return function(e,t){var n,o,r;return t?(n=[],o=(""+t).toLowerCase(),angular.forEach(e,function(e){(r=angular.copy(e)).apexType="",-1!==(""+JSON.stringify(r)).toLowerCase().indexOf(o)&&n.push(e)}),n):e}}function placeholderViewerRolesFilter(n){return function(e,t){return e.filter(function(e){return!(t||n.isDefaultExternalPermissionsEnabled()&&n.isExternalUser())||n.hasRequiredViewerAccess(e)})}}angular.module("app").filter("portalEnabledFilter",function portalEnabledFilter(){return function(e,t){return e.filter(function(e){if(!t||e.portalEnabled)return!0})}}).filter("readyForEsignatureFilter",function readyForEsignatureFilter(){return function(e,t){return e.filter(function(e){if(!t||e.readyForEsignature)return!0})}}).filter("documentManagerSearchFilter",documentManagerSearchFilter).filter("categoriesFilter",function categoriesFilter(){return function(e,t){var n;return 0===t.length?e:(n=[],angular.forEach(e,function(e){-1!==t.indexOf(e.category)&&n.push(e)}),n)}}).filter("placeholderViewerRolesFilter",placeholderViewerRolesFilter),documentManagerSearchFilter.$inject=["CONSTANTS"],placeholderViewerRolesFilter.$inject=["permissionService"]}()},function(e,t){!function(){"use strict";function fileStagingService(e,n,o){var r=this;return r.service={stagedFiles:[],retrieveFileStagingPlaceholders:function retrieveFileStagingPlaceholders(){var t=e.defer();return n.retrieveFileStagingPlaceholders(function(e){o.prepareForUrls(e).then(function(){r.service.stagedFiles=e,t.resolve()})}),t.promise}},r.service}angular.module("app").service("fileStagingService",fileStagingService),fileStagingService.$inject=["$q","dataService","placeholderService"]}()},function(e,t){!function(){"use strict";function eSignatureService(a,s,c,o,e,i,r,l,d,u){return{sendESignatureDocuments:sendESignatureDocuments,cancelAllESignatureCollections:cancelAllESignatureCollections,cancelESignatureCollection:function cancelESignatureCollection(e,t){var n=d.ERROR,o=l.THEME_ERROR,r=l.ERROR_MSG;t[0]&&t[0].documentCollectionId&&(cancelCollectionAndUpdateStatus(t[0].documentCollectionId,t,e),n=d.SUCCESS,o=l.THEME_SUCCESS,r=l.E_SIGNATURE_CANCEL_SENT_SUCCESS_MSG);a.$broadcast(s.SET_TOAST,{type:n,theme:o,body:r})},confirmCancelAllESignatureCollections:function confirmCancelAllESignatureCollections(t){a.alert={isRendered:!0,theme:l.THEME_WARNING,label:{heading:l.E_SIGNATURE_CANCEL_LABEL,message:l.E_SIGNATURE_CONFIRM_CANCEL,confirm:l.E_SIGNATURE_YES_CANCEL_BTN,cancel:l.E_SIGNATURE_NO_CANCEL_BTN},confirm:function(e){if(a.alert.isRendered=!1,e)return cancelAllESignatureCollections(t)}}},resendESignature:function resendESignature(t){a.alert={isRendered:!0,theme:l.THEME_WARNING,label:{heading:l.E_SIGNATURE_SEND_LABEL,message:l.E_SIGNATURE_CONFIRM_RESEND,confirm:l.OK_BTN,cancel:l.CANCEL_BTN},confirm:function(e){a.alert.isRendered=!1,e&&sendESignatureDocuments(t).then(function(e){var t=d.ERROR,n=l.THEME_ERROR,o=l.ERROR_MSG;e&&(t=d.SUCCESS,n=l.THEME_SUCCESS,o=l.E_SIGNATURE_SENT_SUCCESS_MSG),a.$broadcast(s.SET_TOAST,{type:t,theme:n,body:o})})}}},getESignatureNonActiveStatuses:function getESignatureNonActiveStatuses(){return[s.STATUS_SIGNATURE_CANCEL_PENDING.toUpperCase(),s.STATUS_SIGNATURE_EXCEPTION.toUpperCase(),s.STATUS_SIGNATURE_PENDING.toUpperCase(),s.STATUS_SIGNED.toUpperCase()]}};function sendESignatureDocuments(t,n){for(var e,o=[],r=u.defer(),a=!1,i=0;i<t.length;i++){var l=t[i];l.isSelected&&l.status&&l.status.toLowerCase()===s.STATUS_SIGNATURE_NEEDED.toLowerCase()&&(o.push(l.documentStoreId),a=l.docPrepPrepared,e=l.documentCollectionId)}return a?c.createCollection(o).then(function(e){e?r=sendCollection(r,t,e,n):r.reject(s.ERROR_EVENT)}):e?r=sendCollection(r,t,e,n):r.reject(s.ERROR_EVENT),r.promise}function sendCollection(t,n,o,e){return c.sendCollection(o,e).then(function(e){e?(angular.forEach(n,function(e,t){e.isSelected&&e.status&&e.status.toLowerCase()===s.STATUS_SIGNATURE_NEEDED.toLowerCase()&&(e.documentCollectionId=o)}),t.resolve(s.SENT)):t.reject(s.ERROR_EVENT)}),t}function cancelCollectionAndUpdateStatus(e,t,n){n.controller&&(n.controller.showEsignatureCollectionDetailModal=!1),c.cancelSignatureCollection(e).then(function(e){e&&angular.forEach(t,function(t){r.isESigPendingCanceledException(t.status)&&angular.forEach(e,function(e){t.documentStoreId===e&&o.performStatusUpdate(n,t,s.STATUS_SIGNATURE_CANCEL_PENDING)})})})}function cancelAllESignatureCollections(r){var t=[];angular.forEach(i.placeholders,function(e){t.push(e.documentStoreId)}),c.getCollectionIds(t).then(function(e){var t=d.ERROR,n=l.THEME_ERROR,o=l.ERROR_MSG;e&&(angular.forEach(e,function(e){cancelCollectionAndUpdateStatus(e,i.placeholders,r)}),t=d.SUCCESS,n=l.THEME_SUCCESS,o=l.E_SIGNATURE_CANCEL_SENT_SUCCESS_MSG),a.$broadcast(s.SET_TOAST,{type:t,theme:n,body:o})})}}angular.module("app").service("eSignatureService",eSignatureService),eSignatureService.$inject=["$rootScope","CONSTANTS","universalDocManRemotingService","commonService","eSignatureNotificationService","placeholderService","permissionService","ALERT_DIALOG","TOAST_TYPES","$q"]}()},function(e,t){!function(){"use strict";function eSignatureNotificationService(r){var a=this;a.pendingUpdates=0,a.updateThrottle,function registerESignatureNotification(){UniDocMan.esignatureNotification||(UniDocMan.esignatureNotification=function(e){var t=!1;if(e&&e.data&&e.data.sobject)for(var n=e.data.sobject.LLC_BI__Document_Store__c,o=0;o<r.placeholders.length;o++)r.placeholders[o].documentStoreId===n&&(t=!0);t&&!function throttleRetrievePlaceholders(){a.pendingUpdates?(a.pendingUpdates++,clearTimeout(a.updateThrottle),a.updateThrottle=setTimeout(r.retrievePlaceholders().then(function(){a.pendingUpdates--}),500)):(a.pendingUpdates++,r.retrievePlaceholders().then(function(){a.pendingUpdates--}))}()})}()}angular.module("app").service("eSignatureNotificationService",eSignatureNotificationService),eSignatureNotificationService.$inject=["placeholderService"]}()},function(e,t){!function(){"use strict";function eSignaturePreparationService(t,a,i,n,l){return{fireErrorMessage:fireErrorMessage,validateDocuments:validateDocuments,validateDocumentsForSend:function validateDocumentsForSend(e){return validateDocuments(e)&&function validateCollectionIds(e){var t={};if(e)for(var n=0;n<e.length;n++)!function checkStatusForSend(e,t){e.status&&e.status.toLowerCase()===a.STATUS_SIGNATURE_NEEDED.toLowerCase()||(t[e.name]||(t[e.name]=[]),t[e.name].push(i.E_SIGNATURE_SEND_STATUS_ERROR))}(e[n],t),Object.keys(t).length||!function checkCollectionForSend(e,t,n){e.documentCollectionId&&t.documentCollectionId&&e.documentCollectionId===t.documentCollectionId||(n[t.name]||(n[t.name]=[]),n[t.name].push(i.E_Signature_Different_Collection_Error))}(e[0],e[n],t);if(Object.keys(t).length)return fireErrorMessage(t),!1;return!0}(e)},getReadyForTaggingCollectionId:function getReadyForTaggingCollectionId(e){var t,n=[a.STATUS_SIGNATURE_NEEDED.toLowerCase(),a.STATUS_SIGNATURE_READY_TO_TAG.toLowerCase()],o=e.filter(function(e){return e.isSelected&&e.documentCollectionId&&!e.docPrepPrepared&&-1!==n.indexOf(e.status.toLowerCase())});return o&&0!==o.length&&(t=o[0].documentCollectionId,0===e.filter(function(e){return e.documentCollectionId&&e.documentCollectionId===t&&-1===n.indexOf(e.status.toLowerCase())||e.isSelected&&!e.documentCollectionId}).length)?t:""}};function validateDocuments(e){for(var t={},n=!1,o=0;o<e.length;o++){var r=e[o];r.isSelected&&(n=!0,function checkFileSize(e,t){e.fileSize>=l.ESIGNATURE_MAX_FILE_SIZE&&(t[e.name]||(t[e.name]=[]),t[e.name].push(i.E_SIGNATURE_FILE_SIZE_EXCEEDED))}(r,t),function checkStatus(e,t){var n=[a.STATUS_IN_FILE.toLowerCase(),a.STATUS_SIGNATURE_NEEDED.toLowerCase(),a.STATUS_SIGNATURE_READY_TO_TAG.toLowerCase()];e.status&&-1!==n.indexOf(e.status.toLowerCase())||(t[e.name]||(t[e.name]=[]),t[e.name].push(i.E_SIGNATURE_STATUS_ERROR))}(r,t),function checkExtension(e,t){var n=a.ESIGNATURE_ALLOWED_FILE_TYPES;e.file.FileExtension&&-1!==n.indexOf(e.file.FileExtension.toLowerCase())||(t[e.name]||(t[e.name]=[]),t[e.name].push(i.E_SIGNATURE_FILE_TYPE_ERROR))}(r,t),function checkDocPrepPrepared(e,t){e.docPrepPrepared&&(t[e.name]||(t[e.name]=[]),t[e.name].push(i.E_SIGNATURE_DOC_PREP_ERROR))}(r,t))}return Object.keys(t).length?(fireErrorMessage(t),!1):n}function fireErrorMessage(e){t.$broadcast(a.SET_TOAST,{type:n.ERROR,theme:i.THEME_ERROR,body:function formatErrorMessage(e){for(var t="",n=Object.keys(e),o=0;o<n.length;o++){for(var r=e[n[o]],a=0;a<r.length;a++)t+=0===a?n[o]+": "+r[a]:" "+r[a]+" ";n[o+1]&&(t+="\n\n")}return t}(e)})}}angular.module("app").service("eSignaturePreparationService",eSignaturePreparationService),eSignaturePreparationService.$inject=["$rootScope","CONSTANTS","ALERT_DIALOG","TOAST_TYPES","FILE"]}()},function(e,t){!function(){"use strict";function browserDetectService(e,t){return{detectIE:function detectIE(){var e=window.navigator.userAgent,t=e.indexOf("MSIE ");if(0<t)return parseInt(e.substring(t+5,e.indexOf(".",t)),10);if(0<e.indexOf("Trident/"))return t=e.indexOf("rv:"),parseInt(e.substring(t+3,e.indexOf(".",t)),10);t=e.indexOf("Edge/");if(0<t)return parseInt(e.substring(t+5,e.indexOf(".",t)),10);return!1}}}angular.module("app").service("browserDetectService",browserDetectService),browserDetectService.$inject=["CONSTANTS","$q"]}()},function(e,t){!function(){"use strict";angular.module("app").service("ndsFormService",function ndsFormService(){function normalizeAttributes(e){for(var t={},n=Object.keys(e),o=0,r=n.length;o<r;o++){var a=n[o],i=e[a];if("[object Object]"===Object.prototype.toString.call(i))for(var l=Object.keys(i),s=0,c=l.length;s<c;s++){var d=l[s];t[a+"."+d]=i[d]}else t[a]=e[a]}return t}return{adjustFieldSetMetadata:function adjustFieldSetMetadata(e){for(var t=0,n=e.length;t<n;t++){var o=e[t];"BOOLEAN"===o.fieldType&&(o.showToggle=!1)}return e},placeholderToEntity:function placeholderToEntity(e){return{identity:e.recordId,attributes:normalizeAttributes(e.fields)}},normalizeAttributes:normalizeAttributes}})}()},function(e,t){!function(){"use strict";angular.module("app").constant("Modal",function Modal(e,t){var r=this;function clearListeners(){r.listeners.forEach(e=>{r.modalRoot.removeEventListener(e[0],e[1])}),r.listeners=[]}function elementIsChildOf(e,t){for(var n=document.querySelectorAll(t.join(",")),o=e.parentElement;"HTML"!==o.tagName;){for(var r=0;r<n.length;r++)if(n[r].isEqualNode(o))return!0;o=o.parentElement}return!1}function elementIsNdsRichTextField(e){return"IFRAME"===e.tagName&&-1<e.getAttribute("title").indexOf("Rich Text Editor")}r.isIgnoringKeyPresses=!1,r.manualFocusables=[],r.escapeModal=null,r.focusables=[],r.listeners=[],r.modalRootIdentifier=e,r.modalRoot=null,r.origin=t,r.activeElementIsFirstFocusable=function activeElementIsFirstFocusable(){return document.activeElement.isEqualNode(r.firstFocusable())},r.activeElementIsLastFocusable=function activeElementIsLastFocusable(){return document.activeElement.isEqualNode(r.lastFocusable())},r.addListener=function addListener(e,t){r.modalRoot&&(r.modalRoot.addEventListener(e,t),r.listeners.push([e,t]))},r.clearListeners=clearListeners,r.elementIsDisabled=function elementIsDisabled(e){return!!(e.hasAttribute("disabled")||e.hasAttribute("aria-disabled")&&"true"===e.getAttribute("aria-disabled"))},r.firstFocusable=function firstFocusable(){return 0<r.focusables.length?r.focusables[0]:null},r.focusedFocusable=function focusedFocusable(){for(var e=0;e<r.focusables.length;e++)if(document.activeElement===r.focusables[e])return[r.focusables[e],e];return[null,-1]},r.isFocusable=function isFocusable(e){for(var t=0;t<r.focusables.length;t++)if(r.focusables[t].isEqualNode(e))return!0;return!1},r.lastFocusable=function lastFocusable(){return 0<r.focusables.length?r.focusables[r.focusables.length-1]:null},r.refreshFocusables=function refreshFocusables(){var e,o;return r.focusables=[],o=null!=r.manualFocusables&&0<r.manualFocusables.length?(e=r.modalRoot.querySelectorAll(r.manualFocusables.join(",")),[]):(e=r.modalRoot.querySelectorAll(function getDefaultFocusables(){for(var e=["a","button","textarea",'input[type="text"]','input[type="radio"]','input[type="checkbox"]',"select","*[tabindex]"],t=0;t<e.length;t++)e[t]=e[t]+':not([disabled]):not([aria-disabled="true"]):not([aria-hidden="true"]):not([hidden]):not([style*="hidden"]):not([tabindex="-1"])';return e}().join(",")),r.modalRoot.querySelectorAll(function getDefaultIgnorables(){return["nds-input-text[hidden] input"]}().join(","))),e.forEach(e=>{for(var t=!1,n=0;n<o.length&&!t;n++)t=o[n].isEqualNode(e);0<=e.tabIndex&&!t&&r.focusables.push(e)}),r},r.focus=function focus(){if(r.modalRoot=document.getElementById(r.modalRootIdentifier),r.modalRoot){r.addListener("focusin",e=>{r.isFocusable(document.activeElement)||function elementShouldHandleInternalFocus(e){return elementIsChildOf(e,["NDS-INPUT-PICKLIST","NDS-CALENDAR"])}(document.activeElement)||r.firstFocusable().focus()}),r.addListener("keydown",e=>{var t="Tab"===e.key||9===e.keyCode,n="Escape"===e.key||27===e.keyCode;!function elementShouldHandleKeydown(e){return elementIsChildOf(e,["NDS-CALENDAR","NDS-INPUT-DATEPICKER","NDS-INPUT-TIME","NDS-INPUT-PICKLIST"])||elementIsNdsRichTextField(e)}(e.target)&&!elementIsNdsRichTextField(r.getNextFocusable())&&(r.isIgnoringKeyPresses?(e.preventDefault(),e.stopPropagation()):t?(e.shiftKey?r.focusPrevFocusable():r.focusNextFocusable(),e.preventDefault(),e.stopPropagation()):n&&null!=r.escapeModal&&(r.escapeModal(),e.preventDefault(),e.stopPropagation()))}),r.refreshFocusables();try{r.firstFocusable().focus()}catch(e){console.error("Error focusing first focusable element")}}},r.focusNextFocusable=function focusNextFocusable(){var e=r.getNextFocusable();null!=e&&e.focus()},r.focusPrevFocusable=function focusPrevFocusable(){var e=r.getPrevFocusable();null!=e&&e.focus()},r.getNextFocusable=function getNextFocusable(){for(var e=r.focusedFocusable()[1],t=e+1;t!=e;){if(t==r.focusables.length&&(t=0),!r.elementIsDisabled(r.focusables[t]))return r.focusables[t];t++}return null},r.getPrevFocusable=function getPrevFocusable(){for(var e=r.focusedFocusable()[1],t=e-1;t!=e;){if(t<0&&(t=r.focusables.length-1),!r.elementIsDisabled(r.focusables[t]))return r.focusables[t];t--}return null},r.hasListener=function hasListener(t){return 0<r.listeners.filter(e=>e[0]===t).length},r.ignoreKeyPresses=function ignoreKeyPresses(){return r.isIgnoringKeyPresses=!0,r},r.allowKeyPresses=function allowKeyPresses(){return r.isIgnoringKeyPresses=!1,r},r.setFocusables=function setFocusables(e){return r.manualFocusables=e,r},r.setModalEscape=function setModalEscape(e){return r.escapeModal=e,r},r.unfocus=function unfocus(){clearListeners(),r.origin.focus(),r.modalRoot=null,r.escapeModal=null}})}()},function(e,t){!function(){"use strict";angular.module("app").provider("docManConfig",function Config(){var n=this;function replaceAll(e,t,n){return e.replace(new RegExp(t.replace(/[-\/\\^$*+?.()|[\]{}]/g,"\\$&"),"g"),n)}function htmlDecodeRecursive(e){if("string"==typeof e||e instanceof String)return function htmlDecode(e){e=replaceAll(e,"\\'","'"),e=replaceAll(e,"\\&quot;",'"'),e=replaceAll(e,"\\\\","\\");var n={amp:"&",lt:"<",gt:">",quot:'"'};return e=e.replace(/&(#(?:x[0-9a-f]+|\d+)|[a-z]+);?/gi,function(e,t){return"#"===t[0]?String.fromCharCode("x"===t[1].toLowerCase()?parseInt(t.substr(2),16):parseInt(t.substr(1),10)):n.hasOwnProperty(t)?n[t]:e})}(e);for(var t in e)e.hasOwnProperty(t)&&(e[t]=htmlDecodeRecursive(e[t]));return e}n.config={},n.$get=function(e){return{get:function(){return n.config}}},n.set=function(e){n.config=angular.merge(n.config,e)},n.setHtmlEncoded=function(e){for(var t in e)e.hasOwnProperty(t)&&(n.config[t]=htmlDecodeRecursive(e[t]))}})}()},function(e,t){!function(){"use strict";angular.module("app").provider("labels",function Labels(){var o=this;o.labels={},o.$get=function(){return{getLabels:function(){return o.labels},getLabel:function(e,t){var n=e.replace(/-|\s/g,"_").toUpperCase(),n=o.labels[n];return null==n&&(n=e),n=1==t?n.toUpperCase():n},setLabels:function(e){return angular.merge(o.labels,e)}}},o.setLabels=function(e){o.labels=angular.merge(o.labels,e)}})}()},function(e,t){!function(){"use strict";function PlaceholderController(a,l,O,e,i,s,w,o,L,c,d,u,f,R,b,M,U,y,F,p,t,k,E,m,n,V,g,r,x,h,v,T,B,S,P,j,C,G,_,D,$,A,H,W,X,I){var N=this;function initializeDynamicVariables(){N.categoryViewerAccessUnavailable=!1,N.defaultEsignatureMessage="",N.isLoading=!0,N.reverse=!1,N.selectedNewOption=b.ADD_NEW,N.isNewPlaceholderShown=!1,N.newPlaceholder={},N.selectedPlaceholder=null,N.placeholderSelectedForExpandedPreview=null,N.rightClickedPlaceholder=null,N.imagePreviewLoadingInterval=null,N.enlargedPreviewLoadingInterval=null,N.searchText="",N.productSearchText="",N.selectedLeftNavHeader=N.leftNavAllDocumentsHeader,N.eSignPlaceholderSelected=!1,N.canPrepareForESignaturePlaceholder=!1,d.draggingFromRightNav=!1,N.hasEditPermissions=N.permissionService.hasPermission(N.configValues.contextObjectType,y.UNI_EDIT_DETAILS),N.hasNamePermission=N.permissionService.hasPermission(N.configValues.contextObjectType,y.UNI_CREATE_PLACEHOLDER_NAME),N.showRelationshipLink=!1,N.showCollateralLink=!1,N.allPlaceholdersSelected=!1,N.placeholderFilterValue,N.enlargedPreviewLink="",N.picklistValueChanged=!1,N.isEsignaturePluginActive=UniDocMan.ESignaturePluginActive,N.hasBulkUpdate=N.configValues.systemPropsMap.get(p.BULK_UPDATE_ENABLED),N.enhancedPlaceholderViewerPermissionsEnabled=N.configValues.systemPropsMap.get(p.ENHANCED_PLACEHOLDER_VIEWER_PERMISSIONS_KEY),N.labels=P.getLabels()}function setIsEditVisible(e){N.isEditVisible=e}function setIsSaveVisible(e){N.isSaveVisible=e}function setIsCancelVisible(e){N.isCancelVisible=e}function getFieldSetMetadata(e,n){E.retrieveFieldSetMetadata(e,n).then(function(t){n.forEach(function(e){N.fieldSetMetadataMap[e]=G.adjustFieldSetMetadata(t.fieldSetMetadataMap[e])})})}function getPlaceholderContextType(){return N.isLoanDocMan?u.PLACEHOLDER_APEX_TYPE_TO_API_NAME.LoanDocument:N.isAccountDocMan?u.PLACEHOLDER_APEX_TYPE_TO_API_NAME.AccountDocument:u.PLACEHOLDER_APEX_TYPE_TO_API_NAME.UniversalDocument}function focusDeleteModal(){var t,e=document.activeElement;"BODY"==e.tagName&&(t=null,["rightNavTableFileStagingFilter","rightNavTableArchiveFilter"].forEach(function(e){t=t||document.getElementById(e)}),t)&&(e=t),N.modal=new I("docManDeleteModal",e),N.modal.focus()}function toggleIsPlaceholderDetailExpanded(){N.isPlaceholderDetailExpanded=!N.isPlaceholderDetailExpanded}function selectedPlaceholderCount(){document.getElementById("docManAlerter")&&(document.getElementById("docManAlerter").innerHTML="");var n=0,o=!1,r=!1,a=[u.STATUS_IN_FILE.toLowerCase(),u.STATUS_SIGNATURE_UPLOADING.toLowerCase(),u.STATUS_SIGNATURE_READY_TO_TAG.toLowerCase(),u.STATUS_SIGNATURE_NEEDED.toLowerCase()],e=(N.eSignPlaceholderSelected=!1,N.canPrepareForESignaturePlaceholder=!1,angular.forEach(g.placeholders,function(e,t){e.isSelected&&(n+=1,e.status&&a.includes(e.status.toLowerCase())||(r=!0),e.status&&e.status.toLowerCase()===u.STATUS_SIGNATURE_NEEDED.toLowerCase()||(o=!0))}),N.canPrepareForESignaturePlaceholder=!r&&0<n,N.eSignPlaceholderSelected=!o&&0<n,null);return 1==n?e=n+" "+N.labels.ITEM_SELECTED:1<n&&(e=`${n} ${N.labels.OF} ${N.visiblePlaceholderCount} `+N.labels.ITEMS_SELECTED),null!=e&&N.postScreenreaderAlert(e,"selected-placeholder-count-notification",!0),n}function filterByCategories(e){null!=e&&N.selectCategory(e),g.uncheckAllPlaceholders(),jQuery("#accordion .collapse.in").collapse("hide"),N.isCategoriesOpen=!0,N.placeholderFilterValue=void 0,N.isFilterByCategories=!0,N.filterService.deactivateAllFilters()}function retrievePlaceholders(){g.retrievePlaceholders().then(function(){g.placeholders&&g.placeholders.length&&(angular.forEach(g.placeholders,function(e,t){N.permissionService.hasRequiredViewerAccess(e)||(e.file&&""!==e.file||(e.file={}),e.file.previewUnavailable=!0,N.categoryViewerAccessUnavailable=!0)}),updatePlaceholderCount(),w.detectIE()?N.placeHolderPaginationLimit=30:N.placeHolderPaginationLimit=N.totalPlaceholdersCount),N.isLoading=!1,N.refocusProductPackage&&(N.refocusProductPackage=!1,c(function(){document.getElementById("docManProductPackageDropdown").focus()},10))}).catch(function(e){e.includes("ENTITY_IS_LOCKED")&&showErrorToast(N.labels.LOCKED_LOAN_ERROR_MESSAGE)})}function setLegalEntities(){E.retrieveLegalEntities(window.DocManId).then(function(e){N.relationshipOptions=[{recordId:"",accountId:"",name:P.getLabels().NONE_OPTION}].concat(e)})}function setCategories(){N.categoryViewerAccessUnavailable?W.fetchAdHocCategories().then(function(e){N.docTypeOptions=e}):W.fetchCategories().then(function(e){N.docTypeOptions=e})}function setArchivedFiles(){s.retrieveArchivedDocumentsWithAttachments(function(e){g.prepareForUrls(e).then(function(){d.archivedFiles=e,N.isLoaded=!0})})}function focusESigInProgressModal(){N.modal=new I("eSignatureUploadInProgress",document.querySelector('button[id="docManActionsMenu"]')),N.modal.focus()}function determineContextObjectType(){N.isLoanDocMan=!1,N.isAccountDocMan=!1,N.isUniversalDocMan=!1,D.updateScreenSections(!0).then(function(e){N.addNewScreenSections=e}),N.contextObjectType===u.CONTEXT_OBJECT_TYPE_LOAN?(N.isLoanDocMan=!0,N.contextObjType="LLC_BI__Loan__c"):N.contextObjectType===u.CONTEXT_OBJECT_TYPE_ACCOUNT?(N.isAccountDocMan=!0,N.contextObjType="Account"):N.contextObjectType===u.CONTEXT_OBJECT_TYPE_PRODUCT_PACKAGE?(N.isUniversalDocMan=!0,N.contextObjType="Universal",null!=S.selectedProductInProductPackage&&(S.selectedProductInProductPackage.objectType===u.CONTEXT_OBJECT_TYPE_LOAN?(N.isUniversalDocMan=!1,N.isLoanDocMan=!0):S.selectedProductInProductPackage.objectType===u.CONTEXT_OBJECT_TYPE_ACCOUNT&&(N.isUniversalDocMan=!1,N.isAccountDocMan=!0))):N.isUniversalDocMan=!0}function focusPortalRejectionModal(){var e=document.querySelector(`button[id="status-btn-${N.selectedPlaceholder.recordId}-placeholderDetails"]`);N.modal=new I("docManPortalRejectionModal",e),N.modal.setFocusables(['button[id="docManModalCloseButton"]','select[id="docManPortalRejectionReason"]','textarea[id="docManPortalRejectionComment"]','button[id="docManPortalRejectionCancel"]','button[id="docManPortalRejectionSave"]']),N.modal.setModalEscape(function(){c(N.cancelPortalRejectionModal,100)}),N.modal.focus()}function focusDeleteMultiplePlaceholdersModal(){var e=document.querySelector('button[id="docManActionsMenu"]');N.modal=new I("docManDeleteModal",e),N.modal.focus()}function focusDeletePlaceholderModal(){var e=document.querySelector('div[id="placeholderSearchBar"] > input');N.modal=new I("docManDeleteModal",e),N.modal.focus()}function focusRequestDocumentsModal(){N.modal=new I("docManRequestDocumentsModal",document.querySelector('button[id="docManActionsMenu"]')),N.modal.setModalEscape(function(){c(N.closeRequestingDocuments,100)}),N.modal.focus()}function focusCancelPortalModal(){N.modal=new I("docManDeleteModal",document.querySelector('button[id="docManActionsMenu"]')),N.modal.focus()}function focusPortalOptionsModal(){var e=document.activeElement;N.modal=new I("docManPortalOptionsModal",e),N.modal.setFocusables(['button[id="docManModalCloseButton"]','input[id="portalOptionEnabled"]','input[id="portalOptionPortalName"]','textarea[id="portalOptionPortalDescription"]','button[id="portalOptionCancelButton"]','button[id="portalOptionSaveButton"]']),N.modal.setModalEscape(function(){c(N.cancelPortalOptionsUpdate,100)}),N.modal.focus()}function ignoreTabNavigation(e){return("Tab"===e.key||9===e.keyCode)&&(e.preventDefault(),!0)}function focusViewerPermissionsModal(){N.modal=new I("docManViewerPermissionsModal",document.activeElement),N.modal.setModalEscape(function(){c(N.cancelViewerPermissionsUpdate,100)}),N.modal.focus(),document.body.removeEventListener("keydown",ignoreTabNavigation)}function cancelViewerPermissionsUpdate(){N.showViewerPermissionsModal=!1,N.modal.unfocus(),N.modal=null}function processPermOptions(e,t){for(var n in e)N.portalPermissions.push({label:n,value:e[n],selected:t.includes(n.toLowerCase())})}function markPlaceholderAsTrash(){N.modal.origin=document.querySelector('div[id="placeholderSearchBar"] > input'),N.modal.ignoreKeyPresses(),E.removeFileFromPlaceholders([N.placeholderToBeDeleted.recordId]).then(function(e){d.archivedFiles=e[0],g.unlinkRequirementFromPlaceholder([N.placeholderToBeDeleted.recordId]),g.convertPropertyNamesFromCamelCase(d.archivedFiles),E.archivePlaceholderFromFileStaging(N.placeholderToBeDeleted.recordId).then(function(){var e=g.placeholders.indexOf(N.placeholderToBeDeleted);g.placeholders.splice(e,1),N.placeholderToBeDeleted=null,N.showDeleteModal=!1,N.modal&&(N.modal.unfocus(),N.modal=null),updatePlaceholderCount()}).catch(function(){N.placeholderToBeDeleted=null,N.showDeleteModal=!1,N.modal&&(N.modal.unfocus(),N.modal=null)})}).catch(function(){N.placeholderToBeDeleted=null,N.showDeleteModal=!1,N.modal&&(N.modal.unfocus(),N.modal=null)})}function configureDynamicColumn(){var e=N.contextObjectType;e===u.CONTEXT_OBJECT_TYPE_PRODUCT_PACKAGE&&null!==S.selectedProductInProductPackage&&(e=S.selectedProductInProductPackage.objectType,d.$broadcast(u.CHANGED_PRODUCT_PACKAGE_PRODUCT,e)),E.getConfigurableColumns(e).then(function(e){N.configurableColumns=JSON.parse(e),N.columnHeaders=[{label:l.NAME,name:"name",fieldPath:"Name",columnStyle:"col-xs-6 col-sm-2 col-lg-3 docman-header-column",sortReverseDefault:!1}];var r=0;angular.forEach(N.configurableColumns,function(e,t){var n=-1<u.SORT_REVERSE_DEFAULT_TYPES.indexOf(e.typeApex),o=-1<u.CONVERT_TO_RELATIONSHIP_LABEL.indexOf(e.label.toLowerCase()),o=(e.type==u.TEXTAREA_TYPE&&(N.columnWidths[e.fieldPath]=u.DEFAULT_TEXTAREA_COLUMN_WIDTH),o&&(e.label=l.RELATIONSHIP),-1<u.CONVERT_TO_CATEGORY_LABEL.indexOf(e.label.toLowerCase())&&(e.label=l.CATEGORY),{label:e.label,name:"configurableColumns["+r+"].sortValue",fieldPath:e.fieldPath,columnStyle:"hidden-xs col-sm-2 docman-header-column",sortReverseDefault:n});o.fieldPath===window.UniDocMan.namespacePrefix+"Legal_entity__r.LLC_BI__Account__c"&&(o.fieldPath=window.UniDocMan.namespacePrefix+"Legal_entity__r.LLC_BI__Account__r.Name"),N.columnHeaders.push(o),r++})}),N.showRelationshipLink=e!==u.CONTEXT_OBJECT_TYPE_ACCOUNT&&e!==u.CONTEXT_OBJECT_TYPE_COLLATERAL,N.showCollateralLink=e===u.CONTEXT_OBJECT_TYPE_LOAN,e===u.CONTEXT_OBJECT_TYPE_PRODUCT_PACKAGE&&N.configValues.includeProductPackageDocMan===u.STRING_VALUE_TRUE&&angular.forEach(S.productPackageProducts,function(e,t){e.objectType===u.CONTEXT_OBJECT_TYPE_LOAN&&(N.showCollateralLink=!0)})}function sortOrder(e,t,n=null){if(n){var o="click"===n.type,r="keydown"===n.type,a="mouseup"===n.type,i="Space"===n.code||32===n.keyCode,l="Enter"===n.code||13===n.keyCode;if(!(o||a||r&&(i||l)))return;n.preventDefault(),n.stopPropagation()}"status"!==e?(N.columnSortHeader===e?N.reverse=!N.reverse:(N.reverse=t,N.secondarySortHeader=N.secondarySortHeader||N.columnSortHeader!==e?N.columnSortHeader:"name"),N.columnSortHeader=e):(angular.isFunction(N.columnSortHeader)?N.reverse=!N.reverse:N.reverse=!1,N.columnSortHeader=function(e){switch(e.statusTranslation){case P.getLabel(u.STATUS_EXCEPTION):return 1;case P.getLabel(u.STATUS_IN_FILE):return 2;case P.getLabel(u.STATUS_REVIEWED):return 3;case P.getLabel(u.STATUS_APPROVED):return 4;case P.getLabel(u.STATUS_OPEN):return 5;case P.getLabel(u.STATUS_WAIVED):return 6}})}function renderPreview(e,t,n){var o,r,a=t===i.CONTENT_PREVIEW_LARGE,t=t===i.CONTENT_PREVIEW_THUMBNAIL;N.permissionService.hasRequiredViewerAccess(e)?t?(e.isDocumentExternal&&(e.file&&""!==e.file||(e.file={}),e.file.previewLink=UniDocMan.IMAGE_PREVIEW_NOT_AVAILABLE_EXTERNAL,N.enlargedPreviewLink=""),o=100,window.clearInterval(N.enlargedPreviewLoadingInterval),N.imagePreviewLoadingInterval=setIntervalFunction(i.CONTENT_PREVIEW_THUMBNAIL,i.CONTENT_PREVIEW_URL+e.file.Id,o)):a&&!e.isDocumentExternal&&(N.selectedVersion||(N.selectedVersion=e.file),r=N.selectedVersion.enlargedPreviewBaseUrl+N.selectedVersion.Id,r+=void 0!==n?"&page="+n:"",o=1e3,window.clearInterval(N.enlargedPreviewLoadingInterval),N.enlargedPreviewLoadingInterval=setIntervalFunction(i.CONTENT_PREVIEW_LARGE,r,o)):t?N.selectedPlaceholder.file.previewLink=UniDocMan.IMAGE_PREVIEW_NOT_AVAILABLE_FALLBACK:a&&(N.selectedVersion=N.selectedVersion||e.file,N.selectedVersion.enlargedPreviewLink=UniDocMan.IMAGE_EXPANDED_PREVIEW_NOT_AVAILABLE)}function setIntervalFunction(t,n,o){var r=0;return window.setInterval(function(){r++;var e=N.enlargedPreviewLink;a.$apply(function(){t===i.CONTENT_PREVIEW_THUMBNAIL?N.selectedPlaceholder.file.previewLink="":t===i.CONTENT_PREVIEW_LARGE&&(N.enlargedPreviewLink="")}),a.$apply(function(){o<r?t===i.CONTENT_PREVIEW_THUMBNAIL?(N.selectedPlaceholder.file.previewLink=UniDocMan.IMAGE_PREVIEW_NOT_AVAILABLE_FALLBACK,N.enlargedPreviewLink=UniDocMan.IMAGE_EXPANDED_PREVIEW_NOT_AVAILABLE,N.selectedPlaceholder.file.previewUnavailable=!0):t===i.CONTENT_PREVIEW_LARGE&&(N.enlargedPreviewLink=UniDocMan.IMAGE_EXPANDED_PREVIEW_NOT_AVAILABLE):t===i.CONTENT_PREVIEW_THUMBNAIL?(N.selectedPlaceholder.file.previewLink=n,""!==e&&(N.enlargedPreviewLink=e)):t===i.CONTENT_PREVIEW_LARGE&&(N.enlargedPreviewLink=n)})},100)}function renderModal(t){E.getESignatureDefaultMessage().then(function(e){!function setSelected(e){for(var t=[],n=0;n<e.length;n++)e[n].isSelected=!0,t.push(e[n].recordId);for(n=0;n<g.placeholders.length;n++)-1===t.indexOf(g.placeholders[n].recordId)&&(g.placeholders[n].isSelected=!1)}(t),N.selectedPlaceholders=t,N.defaultEsignatureMessage=e,N.showEsignatureMessageModal=!0,N.workingModal=!1,document.body.removeEventListener("keydown",ignoreTabNavigation),c(focusESigMessageModal,100)})}function focusESigMessageModal(){N.modal=new I("eSigMessageModal",document.querySelector('button[id="docManActionsMenu"]')),N.modal.setModalEscape(function(){d.$apply(N.closeESigMessageModal)}),N.modal.focus()}function ssfbSave(t){A.publish(LifeCycle.Topics.GlobalActionButtonHandler.FIRE_CONTINUE_WITHOUT_SAVE),N.toggleButtonDisable();var n=N.ssfbDetermineChangeOfStatus(t);N.fileUploadedWhileFormInDirtyState=!1,C.saveFormBuilder().then(function(e){"success"===e?function ssfbSavePlaceholderSuccess(t,n){setIsCancelVisible(!1),setIsSaveVisible(!1),setIsEditVisible(!0),t.isEditing=!1,N.toggleButtonDisable(),t.file?t.file.previewLoaded=!0:t.file={previewLoaded:!0,previewLink:""};N.loadPlaceholderDetails(t,500,!0),updateLegalEntityFieldDisplayValue(),n&&(_.ssfbBuildChatterCommentForChangedFields(t,C.formBuilder.fields,function(e){(0<n.length||0<e.length)&&(t.newComment=n+"  "+e,N.addChatterComment(t)),N.retrieveChatterComments(t)}),s.updatePlaceholderStatus(t.recordId,t.status));g.updateRequirementRemote([t.recordId]).then(function(){N.postScreenreaderAlert(N.labels.PLACEHOLDER_EDIT_DETAILS_SAVE_SUCCESS,"placeholder-details-save-success",!0)}),N.selectedPlaceholder.screenSectionFields=JSON.parse(JSON.stringify(C.formBuilder.fields))}(t,n):"failure"===e&&N.toggleButtonDisable(),N.focusPlaceholderEditDetailsButton()})}function updateLegalEntityFieldDisplayValue(){var e=D.getFields([t.LEGAL_ENTITY.LOAN,t.LEGAL_ENTITY.UNIVERSAL],C.formBuilder.fields,!1);angular.forEach(e,function(e){for(var t in N.relationshipOptions){t=N.relationshipOptions[t];if(t.recordId===e.value){e.displayValue=t.name;break}}})}function addCustomField(e){for(var t=0;t<N.customFields.length;t++)e.fieldName&&N.customFields[t].fieldName?N.customFields[t].fieldName.toLowerCase()===e.fieldName.toLowerCase()&&(N.customFields[t]=e):e.referenceFieldPath&&N.customFields[t].referenceFieldPath&&N.customFields[t].referenceFieldPath.toLowerCase()===e.referenceFieldPath.toLowerCase()&&(N.customFields[t]=e);N.customFields=N.customFields.concat([e])}function savePlaceholderFailure(e){h.setMessage({type:h.messageTypes.error,text:e,context:"modal"}),N.toggleButtonDisable()}function resetToast(){N.toast="",N.toastSubHeading="",N.downloadSubHeading1="",N.downloadSubHeading2="",N.downloadLinkValue="",N.downloadVersionId="",N.focusedElement&&N.focusedElement.focus()}function focusAddNewModal(){document.body.removeEventListener("keydown",ignoreTabNavigation),N.modal=new I("addNewModal",document.activeElement),N.modal.setModalEscape(function(){c(hideNewDialog,100)}),N.modal.focus()}function hideNewDialog(){N.isNewPlaceholderShown=!1,N.newPlaceholder={},D.clearScreenSections(),function restoreCachedValues(){D.mapValues(C.screenSections,N.cachedSections),D.mapValues(C.formBuilder.fields,N.cachedFormBuilder)}(),C.setIsEditing(!1),N.modal.unfocus(),N.modal=null}function updatePlaceholderCount(){N.totalPlaceholdersCount=g.placeholders.length,N.visiblePlaceholderCount=H("placeholderViewerRolesFilter")(g.placeholders,N.enhancedPlaceholderViewerPermissionsEnabled).length,N.placeholderPagination()}function renderPreviewPage(e){clearInterval(N.enlargedPreviewLoadingInterval),N.isLoadingLargeImage=!0,renderPreview(e,i.CONTENT_PREVIEW_LARGE,N.selectedVersion.currentPreviewPage-1)}function focusESigDetailsModal(){N.modal=new I("eSigDetailsModal",document.querySelector('div[id="placeholderSearchBar"] > input')),N.modal.setModalEscape(function(){d.$apply(N.closeESigDetailsModal)}),N.modal.focus()}function renderContextMenu(e,t){var n,o,r=jQuery(e.target),a=jQuery("#docmanapp"),i=jQuery("#placeholderContextMenu");e.preventDefault(),e.stopPropagation(),N.showContextMenu=!0,N.rightClickedPlaceholder=t,"more-options-button"==r.attr("id")?d.$$postDigest(function(){var e=jQuery(window).scrollTop()+jQuery(window).height(),t=r.offset().top+r.height(),n=i.outerHeight();e<t+n?i.css({top:r.offset().top-n,left:r.offset().left}):i.css({top:t,left:r.offset().left})}):(n=e.pageX-5,o=e.pageY,t=i.outerWidth(),e=i.outerHeight(),n-r.offset().left+t>r.width()&&(n-=t),o-a.offset().top+e>a.height()&&(o-=e)),i.css({display:"block",position:"absolute",left:n,top:o}),i.appendTo("body")}function focusVersionModal(){N.modal=new I("docManVersionsModal",document.activeElement),N.modal.setModalEscape(function(){c(N.closeVersionModal,100)}),N.modal.focus()}function getOffsetDatetime(e){var t=new Date(e);return e&&!isNaN(t.getTime())&&window.LifeCycle.Internationalize?window.LifeCycle.Internationalize.timeZoneUtil&&window.LifeCycle.Internationalize.timeZoneUtil.applyAggregateOffset?new Date(window.LifeCycle.Internationalize.timeZoneUtil.applyAggregateOffset("add",t.getTime())):t:null}function getSelectedPlaceholders(){for(var e=[],t=0;t<g.placeholders.length;t++)g.placeholders[t].isSelected&&e.push(g.placeholders[t]);return e}function hasEditAccess(e,t){return N.permissionService.hasRequiredViewerAccess(e)&&N.permissionService.hasEditAfterApprovalPermission(y.UNI_EDIT_DETAILS,e.status,t)}function showErrorToast(e){showToast(e,F.ERROR,f.THEME_ERROR,"Error")}function showSuccessToast(e){showToast(e,F.SUCCESS,f.THEME_SUCCESS,"Success")}function showToast(e,t,n,o){N.toast=e,N.toastType=t,N.toastIcon=n,N.toastLabel=o,N.focusToast()}function getSelectedPlaceholders(){return g.placeholders.filter(e=>e.isSelected)}N.connection,N.categoryViewerAccessUnavailable=!1,N.columnSortHeader="",N.secondarySortHeader="",N.leftNavAllDocumentsHeader=e.ALL_DOCUMENTS,N.selectedLeftNavHeader=N.leftNavAllDocumentsHeader,N.relationshipOptions=[],N.docTypeOptions=[],N.docTypeLabel=M.LABEL,N.showDeleteModal=!1,N.showDeleteMultipleModal=!1,N.workingModal=!1,N.showVersionsModal=!1,N.showEsignatureCollectionDetailModal=!1,N.showEsignatureCancelDetails=!1,N.isFilterByCategories=!1,N.showPortalOptionsModal=!1,N.showViewerPermissionsModal=!1,N.viewRequestDocumentsModal=!1,N.requestDocumentsEditMode=!1,N.placeholderToBeDeleted=null,N.placeholdersToBeDeleted=[],N.placeholdersInCollection=[],N.displayPreviewBackground=!1,N.showContextMenu=!1,N.hasEditPermissions=!1,N.hasNamePermission=!1,N.showAddNewDropdown=!1,N.performingAjax=!1,function initializeToast(){N.toastStack=[{toastIcon:f.THEME_SUCCESS}],N.toastType=F.MESSAGE,N.toastIcon=f.THEME_WARNING,N.toastLabel="Message",resetToast()}(),N.showEsignatureMessageModal=!1,N.statusLists={},N.statusTheme={},N.contextObjectType="",N.placeholderNames=[],N.selectedCategory="",N.isLoanDocMan=!1,N.isAccountDocMan=!1,N.isUniversalDocMan=!1,N.contextObjType="",N.showPortalRejectionModal=!1,N.versioningEnabled=!0,N.rejectionReasons=[],N.configValues=v.get(),N.configurableColumns=[],N.buttonDisabled=!1,N.showCancelPortalModal=!1,N.placeholdersToBeCancelled=[],N.isTranslated=!1,N.selectedPlaceholder,N.selectedVersion,N.isCategoriesOpen=!0,N.documentManagerFileSizeLimit="",N.bulkUpdateRecords=[],N.selectedCategories=[],N.esignUploadInProgress=!1,N.selectedPlaceholders=[],N.canPrepareForESignaturePlaceholder=!1,N.eSignatureService=r,N.defaultDownloadService=m,N.permissionService=U,N.placeholderService=g,N.commonService=o,N.productPackageService=S,N.uploadServiceData=L,N.filterService=$,N.config=v,N.CONSTANTS=u,N.navigator=j,N.fieldRestrictions=[],N.modal=null,N.modalPreview=null,N.modalExternal=null,N.refocusProductPackage=!1,N.shouldAlertPortalRejection=!1,N.isEsignaturePluginActive=!1,N.addNewPlaceholder=function addNewPlaceholder(){N.toggleButtonDisable(),N.newPlaceholder=D.buildPlaceholderFromSection(),function validateNewPlaceholderAndSave(){var e=C.screenSections[Object.keys(C.screenSections)[0]].guid;C.isValidForm(e)?(N.newPlaceholder.validationErr=!1,s.addNewPlaceholder(N.newPlaceholder,function(e){a.$apply(function(){hideNewDialog(),g.setStatuses(e),g.placeholders.push(e),updatePlaceholderCount(),N.toggleButtonDisable()}),N.modal&&(N.modal.unfocus(),N.modal=null)},function(e,t){N.toggleButtonDisable(),N.newPlaceholder.err=!0,N.postScreenreaderAlert(N.labels.ERROR_OCURRED,"new-placeholder-err",!0,"new-placeholder-alert-div")})):(N.newPlaceholder.validationErr=!0,N.postScreenreaderAlert(N.labels.REQUIRED_FIELDS,"validate-new-placeholder-incomplete-fields",!0,"new-placeholder-alert-div"),N.toggleButtonDisable())}()},N.addChatterComment=function addChatterComment(e,t=!0,n=!1){N.performingAjax=!0,e.newComment&&s.addChatterComment(e.recordId,e.newComment,function(){e.newComment="",N.performingAjax=!1,t&&N.retrieveChatterComments(e),n&&N.postScreenreaderAlert(N.labels.SUCCESSFUL_COMMENT_MESSAGE,"placeholder-comment-new-success")})},N.addFile=function addFile(){jQuery("#rightClickAddFile-"+N.rightClickedPlaceholder.recordId+":hidden").trigger("click")},N.buildImageURL=function buildImageURL(e){{var t;e.file&&(t=e,(e=[])[t.file.ParentId]=t)}d.currentTime=(new Date).getTime(),g.buildImageUrls(e).then(function(){N.selectedPlaceholder&&N.loadPlaceholderDetails(N.selectedPlaceholder,500)})},N.canPrepareForESignature=function canPrepareForESignature(){return N.isEsignaturePluginActive&&N.permissionService.hasPrepareForESignature()},N.cancelDelete=function cancelDelete(){N.showDeleteModal=!1,N.showDeleteMultipleModal=!1,N.placeholderToBeDeleted=null,N.placeholdersToBeDeleted=[],N.modal.unfocus(),N.modal=null},N.cancelEditDetails=function cancelEditDetails(){N.selectedPlaceholder&&(N.selectedPlaceholder.isEditing=!1,N.selectedPlaceholder.fields=jQuery.extend(!0,{},N.selectedPlaceholder.beforeFields),N.selectedPlaceholder.validationErr=!1,N.selectedPlaceholder.err=!1,h.clear(),A.publish(LifeCycle.Topics.GlobalActionButtonHandler.FIRE_CONTINUE_WITHOUT_SAVE),C.setIsEditing(!1).then(function(){setIsCancelVisible(!1),setIsSaveVisible(!1),setIsEditVisible(!0),C.revertFields(Object.keys(C.screenSections)[0]),N.fileUploadedWhileFormInDirtyState&&D.clearFields(u.EXCEPTION_DATE_FIELDS,!0),N.focusPlaceholderEditDetailsButton(),N.fileUploadedWhileFormInDirtyState=!1}))},N.setMultiPicklistValue=function setMultiPicklistValue(e,t){var n,o=e.getAttribute("data-field"),e=e.getAttribute("data-id"),t=t.fields[o];if(o){var o=jQuery("select[data-id="+e+"]"),e=jQuery("img.picklistArrowRight[data-id="+e+"]"),r=o[0],a=o[1];if(t&&r){for(var i=t.split(";"),l=0,s=a.options.length;l<s;l++)n=a.options[l],-1!=i.indexOf(n.innerHTML)&&(n.selected="selected");e.click()}}},N.updateMultiPicklistValue=function updateMultiPicklistValue(e,t){for(var n,o=[],r=e&&e.options,a=e.getAttribute("data-field"),e=e.getAttribute("data-id"),i=0,l=r.length;i<l;i++)(n=r[i]).selected&&o.push(n.value);e=="update-picklist-"+a?t.fields[a]=o.join(";"):e=="add-new-picklist-"+a&&(t[a]=o.join(";"))},N.cancelPortalOptionsUpdate=function cancelPortalOptionsUpdate(){N.showPortalOptionsModal=!1,N.modal.unfocus(),N.modal=null},N.cancelViewerPermissionsUpdate=cancelViewerPermissionsUpdate,N.cancelPortalRejectionModal=function cancelPortalRejectionModal(){N.showPortalRejectionModal=!1,N.selectedPlaceholder.portalRejectionComment=N.originalRejectionComment,N.selectedPlaceholder.portalRejectionReason=N.originalRejectionReason,N.modal.unfocus(),N.modal=null},N.cancelOverwrite=function cancelOverwrite(){d.$broadcast(u.OVERWRITE_CONFIRM,!1),N.modal.unfocus(),N.modal=null,N.showOverwriteModal=!1,jQuery(".docman-placeholder-row").removeClass("fileHover")},N.closeExpandedPreview=function closeExpandedPreview(){clearInterval(N.enlargedPreviewLoadingInterval),N.displayPreviewBackground=!1,N.isLoadingNewPage=!1,N.isProcessing=!1,N.enlargedPreviewLink="",N.modalPreview&&(N.modalPreview.unfocus(),N.modalPreview=null);N.modalExternal?N.modalExternal.allowKeyPresses():N.modal&&N.modal.allowKeyPresses()},N.configureDynamicColumn=configureDynamicColumn,N.closeModal=function closeModal(){T.url(R.DEFAULT_ROUTE)},N.resetToast=resetToast,N.changeLeftNavFilter=function changeLeftNavFilter(e){N.selectedLeftNavHeader=e},N.confirmDelete=function confirmDelete(){markPlaceholderAsTrash(N.placeholderToBeDeleted)},N.confirmDeleteMultiple=function confirmDeleteMultiple(){N.workingModal=!0,N.modal.ignoreKeyPresses(),document.body.addEventListener("keydown",ignoreTabNavigation);var n=[];angular.forEach(N.placeholdersToBeDeleted,function(e,t){n.push(e.recordId)}),N.showDeleteMultipleModal=!1,g.unlinkRequirementFromPlaceholder(n),E.removeFileFromPlaceholders(n).then(function(){E.archivePlaceholdersFromFileStaging(n).then(function(){angular.forEach(N.placeholdersToBeDeleted,function(e,t){e=g.placeholders.indexOf(e);g.placeholders.splice(e,1)}),N.updatePlaceholderCount(),N.setArchivedFiles(),N.workingModal=!1,N.placeholdersToBeDeleted=[],N.modal&&(N.modal.unfocus(),N.modal=null),document.body.removeEventListener("keydown",ignoreTabNavigation)}).catch(function(){N.workingModal=!1,N.placeholdersToBeDeleted=[],document.body.removeEventListener("keydown",ignoreTabNavigation),N.modal&&(N.modal.unfocus(),N.modal=null)})}).catch(function(){N.workingModal=!1,N.placeholdersToBeDeleted=[],document.body.removeEventListener("keydown",ignoreTabNavigation),N.modal&&(N.modal.unfocus(),N.modal=null)})},N.confirmOverwrite=function confirmOverwrite(){d.$broadcast(u.OVERWRITE_CONFIRM,!0),N.modal.unfocus(),N.modal=null,N.showOverwriteModal=!1},N.copyFileLink=function copyFileLink(e){var t="https://"+T.$$host;e.file.RecordType===i.ATTACHMENT?t+=i.ATTACHMENT_DOWNLOAD_URL+e.file.Id:t+=i.CONTENT_DOWNLOAD_URL+e.file.Id;o.copyToClipboard(t)},N.deletePlaceholder=function deletePlaceholder(e){N.placeholderToBeDeleted=e,N.showDeleteModal=!0,c(focusDeletePlaceholderModal,100)},N.deletePlaceholders=function deletePlaceholders(){angular.forEach(g.placeholders,function(e,t){e.isSelected&&N.placeholdersToBeDeleted.push(e)}),N.placeholdersToBeDeleted.length&&(N.showDeleteMultipleModal=!0,c(focusDeleteMultiplePlaceholdersModal,100))},N.downloadFile=function downloadFile(e){if(void 0!==n.before&&typeof n.before===u.FUNCTION&&void 0!==n.after&&typeof n.after===u.FUNCTION&&void 0!==n.execute&&typeof n.execute===u.FUNCTION&&!0===n.before(e.recordId,e.isDocumentExternal,e.documentStorageType))return void n.execute().then(function(e){n.after(e)},function(e){n.after(e)});m.executeDownload(e)},N.retrieveAndProcessData=function retrieveAndProcessData(){configureDynamicColumn(),retrievePlaceholders(),determineContextObjectType(),setLegalEntities(),setCategories(),setArchivedFiles(),V.retrieveFileStagingPlaceholders().then(function(){}),sortOrder("name",!1),getFieldSetMetadata(getPlaceholderContextType(),[window.UniDocMan.namespacePrefix+"DocMan_Fields"]),D.updateScreenSections().then(function(e){N.screenSections=e})},N.downloadVersion=function downloadVersion(e,t,n){{var o,r;e.isExternalReference?window.open(e.externalDownloadUrl):t?(1==v.get().systemPropsMap.get(p.DOCUMENT_DOWNLOAD_NAME_KEY)?o=e.Title:(o=N.selectedPlaceholder.name,e!==N.selectedPlaceholder.versions[0]&&(o+=u.DASH+e.versionNumber)),t=i.CONTENT_DOWNLOAD_URL,r=!0,e.RecordType===i.ATTACHMENT&&(t=i.ATTACHMENT_DOWNLOAD_URL,r=!1),t=m.getDownloadLink(t,e.Id,n),m.updateFileTitleAndDownload(e.Id,o,r,t,e.Title)):m.downloadVersion(e.Id,n)}},N.doubleClickPlaceholderRow=function doubleClickPlaceholderRow(e){jQuery(u.HASH+e.recordId).collapse("toggle"),toggleIsPlaceholderDetailExpanded()},N.duplicatePlaceholder=function duplicatePlaceholder(e){{if(null==e)return{errorMessage:P.getLabels().PLACEHOLDER_OBJECT_NULL};s.duplicatePlaceholder(e.recordId,function(e){a.$apply(function(){e.file="",g.setStatuses(e),g.placeholders.push(e),updatePlaceholderCount()})})}},N.contextMenuEditDetails=function contextMenuEditDetails(e){e===N.selectedPlaceholder&&N.selectedPlaceholder.isOpen?N.showEditDetails(e):(e.rightClickEditDetails=!0,jQuery(u.HASH+e.recordId).collapse("show"))},N.filterByCategories=filterByCategories,N.formatContentSize=function formatContentSize(e){return null==e||isNaN(e)||""===e?"":1<=e/1024e6?"("+Math.round(10*e/1024e6)/10+" GB)":1<=e/1024e3?"("+Math.round(10*e/1024e3)/10+" MB)":1<=e/1024?"("+Math.round(e/1024)+" KB)":e/1024<1?"("+e+" Bytes)":""},N.hideNewDialog=hideNewDialog,N.initializeDynamicVariables=initializeDynamicVariables,N.downloadMultipleFiles=function downloadMultipleFiles(){m.downloadMultipleFiles(g.placeholders)},N.initializePortalRejectionModal=function initializePortalRejectionModal(t){N.showPortalRejectionModal=!0,g.loadRejectionReasonPicklistValues(t.apexType).then(function(e){N.rejectionReasons=e,N.selectedPlaceholder=t,N.originalRejectionReason=N.selectedPlaceholder.portalRejectionReason,N.originalRejectionComment=N.selectedPlaceholder.portalRejectionComment,c(focusPortalRejectionModal,100)})},N.isCategoryField=function isCategoryField(e){return e===M.PATH||e===M.PATH2},N.isDocTypeField=function isDocTypeField(e){return e.toLowerCase()===(window.UniDocMan.namespacePrefix+u.DOC_TYPE_FIELD).toLowerCase()||e.toLowerCase()===(u.DEFAULT_NAMESPACE+u.DOC_TYPE_FIELD).toLowerCase()},N.isLegalEntityField=function isLegalEntityField(e){return e===window.UniDocMan.namespacePrefix+u.ENTITY_LOOKUP_FIELD},N.isPlaceholderDetailExpanded=!1,N.toggleIsPlaceholderDetailExpanded=toggleIsPlaceholderDetailExpanded,N.isRelationshipField=function isRelationshipField(e){return e===window.UniDocMan.namespacePrefix+u.RELATIONSHIP_LOOKUP_FIELD},N.isSortedByStatus=function isSortedByStatus(){return angular.isFunction(N.columnSortHeader)},N.loadPlaceholderDetails=function loadPlaceholderDetails(e,t,n){clearInterval(N.imagePreviewLoadingInterval),!n&&N.selectedPlaceholder&&N.selectedPlaceholder.beforeFields&&delete N.selectedPlaceholder.beforeFields;N.selectedPlaceholder!==e&&(D.clearScreenSections(),N.selectedPlaceholder=e);n&&g.convertPropertyNamesFromCamelCase([N.selectedPlaceholder]);N.retrieveChatterComments(e),g.placeholderHasFileOrExternal(N.selectedPlaceholder)?void 0!==N.selectedPlaceholder.file.RecordType&&N.selectedPlaceholder.file.RecordType===O.FILE?void 0===N.selectedPlaceholder.file.ParentId||N.selectedPlaceholder.file.previewLoaded||(!function isPreviewSupported(e){return-1!==["PDF","WORD_X","WORD","EXCEL_X","EXCEL","POWER_POINT_X","POWER_POINT","PNG","JPEG","JPG","BMP","TEXT"].indexOf(e)}(e.file.FileType)?c(function(){a.$apply(function(){N.selectedPlaceholder.file?(N.selectedPlaceholder.file.previewLoaded=!0,N.selectedPlaceholder.file.previewUnavailable=!0):N.selectedPlaceholder.file={previewLoaded:!0,previewLink:""},N.selectedPlaceholder.file.previewLink=UniDocMan.IMAGE_PREVIEW_NOT_AVAILABLE_TYPE})},t):renderPreview(N.selectedPlaceholder,i.CONTENT_PREVIEW_THUMBNAIL)):N.selectedPlaceholder.isDocumentExternal&&N.selectedPlaceholder.documentStorageType?renderPreview(N.selectedPlaceholder,i.CONTENT_PREVIEW_THUMBNAIL):c(function(){a.$apply(function(){N.selectedPlaceholder.file?(N.selectedPlaceholder.file.previewLoaded=!0,N.selectedPlaceholder.file.previewUnavailable=!0):N.selectedPlaceholder.file={previewLoaded:!0},N.selectedPlaceholder.file.previewLink=UniDocMan.IMAGE_PREVIEW_NOT_AVAILABLE_FALLBACK})},t):c(function(){a.$apply(function(){N.selectedPlaceholder.file?(N.selectedPlaceholder.file.previewLoaded=!0,N.selectedPlaceholder.file.previewUnavailable=!0):N.selectedPlaceholder.file={previewLoaded:!0},N.selectedPlaceholder.file.previewLink=""})},t);s.retrievePlaceholderWithFields(N.selectedPlaceholder.recordId,function(t){s.retrievePlaceholderFieldSet(N.selectedPlaceholder.recordId,function(e){a.$apply(function(){N.selectedPlaceholder.fieldSetSchema=JSON.parse(e),N.selectedPlaceholder.fields=t,N.selectedPlaceholder.beforeFields=jQuery.extend(!0,{},N.selectedPlaceholder.fields),N.selectedPlaceholder.rightClickEditDetails&&(N.selectedPlaceholder.rightClickEditDetails=!1,N.showEditDetails(N.selectedPlaceholder)),function updatePlaceholderConfigurableColumns(){for(var e,t,n=0;n<g.placeholders.length;n++)if(g.placeholders[n].isOpen){var o=N.selectedPlaceholder.fields;N.selectedPlaceholder.name=o.Name;for(var r=0;r<g.placeholders[n].configurableColumns.length;r++)1<(e=g.placeholders[n].configurableColumns[r].fieldPath).split(".").length?(t=e.split(".")[0]==window.UniDocMan.namespacePrefix+"Legal_entity__r"?function getLegalEntityRelationshipName(e){for(var t=e[window.UniDocMan.namespacePrefix+"Legal_entity__c"],n=0;n<N.relationshipOptions.length;n++)if(N.relationshipOptions[n].recordId==t)return N.relationshipOptions[n].name}(o):function getRelationshipFieldValue(e,t){return e.split(".").reduce(function(e,t){return e?e[t]:null},t||self)}(e,o),g.placeholders[n].configurableColumns[r].displayValue=t,g.placeholders[n].configurableColumns[r].value=t):(g.placeholders[n].configurableColumns[r].displayValue=o[e],g.placeholders[n].configurableColumns[r].value=o[e]);break}}()})})})},N.markPlaceholderAsTrash=markPlaceholderAsTrash,N.passedExceptionDate=function passedExceptionDate(e,t){if(-1!==u.EXCEPTION_DATE_FIELDS.indexOf(e))if(t.fields&&t.fields[e])if(null!=t.fields[e])if(new Date(t.fields[e])<=new Date)return!0;return!1},N.placeholderFilter=function placeholderFilter(e){g.uncheckAllPlaceholders(),jQuery("#accordion .collapse.in").collapse("hide"),N.placeholderFilterValue=e,N.isFilterByCategories=!1,N.selectedCategories=[],N.filterService.deactivateAllFilters()},N.productPackageProductChange=function productPackageProductChange(e){S.selectedProductInProductPackage=e,window.DocManId=S.selectedProductInProductPackage.recordId,N.refocusProductPackage=!0,initializeDynamicVariables(),configureDynamicColumn(),retrievePlaceholders(),determineContextObjectType(),g.populateStatusObjects(),setLegalEntities(),setCategories(),setArchivedFiles(),D.updateScreenSections().then(function(e){N.screenSections=e}),V.retrieveFileStagingPlaceholders().then(function(){})},N.renderPreview=renderPreview,N.retrieveChatterComments=function retrieveChatterComments(n){null!=n&&s.retrieveChatterComments(n.recordId,function(t){a.$apply(function(){if(n.comments=t,n.comments&&0<n.comments.length)for(var e=0;e<n.comments.length;e++)n.comments[e].body=String(n.comments[e].body).replace(/<[^>\<]+>/gm,"")})})},N.retrievePlaceholderNames=function retrievePlaceholderNames(e){N.selectedCategory=e,N.performingAjax=!0,E.retrievePlaceholderNames(N.selectedCategory).then(function(e){N.selectedPlaceholder&&N.selectedPlaceholder.fieldSetSchema&&o.formatDateFieldsForInput(N.selectedPlaceholder,N.selectedPlaceholder.fieldSetSchema),e&&0<e.length&&(N.placeholderNames=e),N.performingAjax=!1})},N.retrievePlaceholders=retrievePlaceholders,N.savePlaceholderPortalFields=function savePlaceholderPortalFields(t){N.toggleButtonDisable();var e,n={},o=[];for(e in u.PORTAL_FIELDS){var r=u.PORTAL_FIELDS[e];null!=t.fields[r]&&(n[r]=t.fields[r])}if(t.fields){for(var r in n){var a=n[r];null==a||""===a?(o.push(r),delete n[r],-1!==r.indexOf("Portal_Doc_Name__c")&&(t.portalDocName=t.name)):-1!==r.indexOf("Portal_Doc_Name__c")&&(t.portalDocName=a)}E.savePlaceholderPortalData(t.recordId,n,o).then(function(e){N.showPortalOptionsModal=!1,N.savePlaceholderSuccess(e,t),N.modal.unfocus(),N.modal=null,N.postScreenreaderAlert(N.labels.PLACEHOLDER_PORTAL_OPTIONS_SAVE_SUCCESSFUL,"portal-options-save-success",!0)},function(e){savePlaceholderFailure(e)})}},N.savePlaceholderWithFields=function savePlaceholderWithFields(t){N.toggleButtonDisable();var n=function determineChangeOfStatus(e){var t="",n=new Date,o=null,r="";r=-1<e.apexType.indexOf("LoanDocument")||-1<e.apexType.indexOf("AccountDocument")?(o=new Date(parseInt(e.fields.LLC_BI__exceptionDate__c)),"LLC_BI__reviewStatus__c"):(o=new Date(parseInt(e.fields.LLC_BI__Exception_Date__c)),"LLC_BI__Review_Status__c");e.file||(e.file={previewLoaded:!1,previewLink:""});o<=n&&N.selectedPlaceholder.status!=u.STATUS_EXCEPTION?(e.fields[r]=u.STATUS_EXCEPTION,t+=" "+P.getLabels().STATUS_CHANGED_FROM+" "+P.getLabel(N.selectedPlaceholder.status,1)+" "+P.getLabels().TO_LABEL+" "+P.getLabel(u.STATUS_EXCEPTION,1)+u.PERIOD,N.selectedPlaceholder.status=u.STATUS_EXCEPTION,N.selectedPlaceholder.statusTranslation=P.getLabel(u.STATUS_EXCEPTION)):n<o&&N.selectedPlaceholder.status==u.STATUS_EXCEPTION&&(n=u.STATUS_OPEN,(e.file.Title||e.file.Id)&&(n=u.STATUS_IN_FILE),e.fields[r]=n,t+=" "+P.getLabels().STATUS_CHANGED_FROM+" "+P.getLabel(u.STATUS_EXCEPTION,1)+" "+P.getLabels().TO_LABEL+" "+P.getLabel(n,1)+u.PERIOD,N.selectedPlaceholder.status=n,N.selectedPlaceholder.statusTranslation=P.getLabel(n));return t}(t),o=function chooseFieldsToBeSaved(e){var t,n={};for(t in e.fields)(null==e.beforeFields[t]||e.beforeFields[t]!==e.fields[t]||u.REQUIRED_FIELDS_TO_BE_SAVED.some(function(e){return t===e}))&&(n[t]=e.fields[t]);return n}(t),r=[];if(t.fields){var e,a=!1;for(e in t.fieldSetSchema){var i=t.fieldSetSchema[e],l=t.fields.hasOwnProperty(i.fieldPath)?t.fields[i.fieldPath]:"";if(!0===i.required&&(null==l||""===l)){a=!0,N.selectedPlaceholder.validationErr=!0,N.postScreenreaderAlert(N.labels.REQUIRED_FIELDS,"save-new-placeholder-incomplete-fields",!0,"new-placeholder-alert-div"),N.toggleButtonDisable();break}"DATE"===i.typeApex&&o.hasOwnProperty(i.fieldPath)&&(null==t.fields[i.fieldPath]||""===t.fields[i.fieldPath]?o[i.fieldPath]=null:o[i.fieldPath]=parseInt(t.fields[i.fieldPath])),"DATETIME"===i.typeApex&&o.hasOwnProperty(i.fieldPath)&&(null==t.fields[i.fieldPath]?o[i.fieldPath]=null:o[i.fieldPath]=parseInt(t.fields[i.fieldPath]))}a||(angular.forEach(o,function(e,t){null!==e&&""!==e||(r.push(t),delete o[t])}),A.publish(LifeCycle.Topics.GlobalActionButtonHandler.SAVE),E.savePlaceholderData(t.recordId,o,r).then(function(e){N.selectedPlaceholder.validationErr=!1,N.savePlaceholderSuccess(e,t,n)},function(e){savePlaceholderFailure(e)}))}},N.savePortalRejectionReasons=function savePortalRejectionReasons(e){N.performingAjax=!0;var t=u.REJECTION_REASON_FIELD,n=u.REJECTION_COMMENT_FIELD,o={};o[t]=e.portalRejectionReason,o[n]=e.portalRejectionComment,E.savePortalRejectionReasons(e.recordId,o).then(function(){N.performingAjax=!1,N.showPortalRejectionModal=!1,d.$broadcast(u.SAVED_PORTAL_REJECTION_REASON,e,u.STATUS_EXCEPTION),N.modal.unfocus(),N.modal=null,N.shouldAlertPortalRejection=!0})},N.searchTextCollapse=function searchTextCollapse(){2<N.searchText.length&&jQuery("#accordion .collapse.in").collapse("hide")},N.selectCategory=function selectCategory(e){{var t;N.selectedCategories.includes(e)?(t=N.selectedCategories.indexOf(e),N.selectedCategories.splice(t,1)):N.selectedCategories.push(e)}0===N.selectedCategories.length&&filterByCategories()},N.confirmCancelAllESignatureCollections=function confirmCancelAllESignatureCollections(){r.confirmCancelAllESignatureCollections(a)},N.cancelESignatureCollection=function cancelESignatureCollection(){r.cancelESignatureCollection(a,N.placeholdersInCollection),N.closeESigDetailsModal()},N.placeholderPagination=function placeholderPagination(){N.placeHolderPaginationLimit+10<N.totalPlaceholdersCount?N.placeHolderPaginationLimit+=10:N.placeHolderPaginationLimit=N.totalPlaceholdersCount},N.retrieveIsTranslated=function retrieveIsTranslated(){N.performingAjax=!0,g.retrieveIsTranslated().then(function(){null!==g.isTranslated&&(N.isTranslated=g.isTranslated),N.performingAjax=!1})},N.selectedPlaceholderCount=selectedPlaceholderCount,N.sendESignatures=function sendESignatures(){return!0===N.eSignPlaceholderSelected&&(r.sendESignatureDocuments(N.selectedPlaceholders,N.defaultEsignatureMessage).then(function(e){e?(showSuccessToast(f.E_SIGNATURE_SENT_SUCCESS_MSG),angular.forEach(N.selectedPlaceholders,function(e,t){e.isSelected&&e.status.toLowerCase()===u.STATUS_SIGNATURE_NEEDED.toLowerCase()&&o.performStatusUpdate(a,e,u.STATUS_SIGNATURE_PENDING)})):showErrorToast(f.ERROR_MSG),N.modal&&N.closeESigMessageModal()}).catch(function(){N.modal&&N.closeESigMessageModal()}),!0)},N.setShowContextMenu=function setShowContextMenu(e){N.showContextMenu=e},N.showEditDetails=function showEditDetails(e){N.selectedPlaceholder.screenSectionFields=JSON.parse(JSON.stringify(C.formBuilder.fields)),N.selectedPlaceholder.isEditing=!0,N.retrievePlaceholderNames(D.getPlaceholderCategory(e)),N.retrieveIsTranslated(),C.setIsEditing(!0).then(function(){setIsEditVisible(!1),setIsSaveVisible(!0),setIsCancelVisible(!0),A.publish(LifeCycle.Topics.GlobalActionButtonHandler.FIRE_SAVE_WITH_CONTINUE),N.focusEditDetailsForm()})},N.showEsignatureMessage=function showEsignatureMessage(){{var t;!0===N.eSignPlaceholderSelected&&(N.workingModal=!0,document.body.addEventListener("keydown",ignoreTabNavigation),!function placeholdersContainCollectionId(e){for(var t=0;t<e.length;t++)if(e[t].documentCollectionId)return 1;return}(t=getSelectedPlaceholders())?renderModal(t):(t=function findAllCollectionIdPlaceholders(e){for(var t=[],n=0;n<g.placeholders.length;n++)g.placeholders[n].documentCollectionId&&e[0].documentCollectionId&&g.placeholders[n].documentCollectionId===e[0].documentCollectionId&&t.push(g.placeholders[n]);return t}(t),x.validateDocumentsForSend(t)?function isCollectionActive(e){var t=B.defer();return E.retrieveActiveDocumentCollections([e]).then(function(e){e&&!e.length?(showErrorToast(f.E_SIGNATURE_INACTIVE_COLLECTION_ID),t.resolve(!1)):t.resolve(!0)}),t.promise}(t[0].documentCollectionId).then(function(e){e?renderModal(t):(N.workingModal=!1,document.body.removeEventListener("keydown",ignoreTabNavigation))}):(N.workingModal=!1,document.body.removeEventListener("keydown",ignoreTabNavigation))))}},N.showESignatureCollectionDetails=function showESignatureCollectionDetails(n,e){N.placeholdersInCollection=[],N.showEsignatureCancelDetails=e,n.documentCollectionId&&angular.forEach(g.placeholders,function(e,t){e.documentCollectionId&&e.documentCollectionId==n.documentCollectionId&&N.placeholdersInCollection.push(e)});N.showEsignatureCollectionDetailModal=!0,c(focusESigDetailsModal,100)},N.showExpandedPreview=function showExpandedPreview(n,t,e){{var o;N.placeholderSelectedForExpandedPreview=n,N.selectedVersion=n.file,t&&n.versions&&(o=n.versions.filter(function(e){return e.Id===t}))&&0<o.length&&(N.selectedVersion=o[0])}n.isExternalReference?window.open(n.externalPreviewUrl):(N.connection=N.connection||new jsforce.Connection({accessToken:s.sessionId}),N.expandedFileTitle=N.selectedVersion.fileName,N.displayPreviewBackground=!0,N.isLoadingLargeImage=!0,N.selectedVersion.currentPreviewPage=0,-1<N.selectedVersion.previewUrlCount&&void 0!==N.selectedVersion.previewFormat&&!N.selectedVersion.hasConnectApiError?renderAvailablePreviews(n,N.selectedVersion.previewUrlCount,N.selectedVersion.previewFormat):g.getContentDocumentByVersion(N.selectedVersion.Id,N.selectedVersion.contentDocumentId).then(function(e){var t=N.configValues.siteBaseSecureUrl,t=N.isSite?t+"/services/data/v51.0/connect/files/"+e.Id+"/previews":"/connect/files/"+e.Id+"/previews";return N.connection.chatter.resource(t)}).then(function(e){e=function selectAvailablePreview(e){var t,n={},o={};return e.forEach(function(e){"Available"===e.status?n[e.format]=e:"InProgress"===e.status||"NotScheduled"===e.status?o[e.format]=e:"NotAvailable"===e.status&&(t=e)}),n.hasOwnProperty("Jpg")?n.Jpg:n.hasOwnProperty("Svg")?n.Svg:o.hasOwnProperty("Jpg")?o.Jpg:o.hasOwnProperty("Svg")?o.Svg:n.hasOwnProperty("ThumbnailBig")?n.ThumbnailBig:t}(e.previews);e&&"Available"===e.status?(N.selectedVersion.hasConnectApiError=!1,renderAvailablePreviews(n,e.previewUrlCount,e.format),N.isProcessing=!1,g.setPreviewConfiguration(N.selectedVersion.Id,e.previewUrlCount,e.format).then(function(){N.modalPreview.refreshFocusables(),N.modalPreview.firstFocusable().focus()})):renderWithoutPreviews(e?e.status:null)},function(e){N.isSite&&window.fetch&&!N.selectedVersion.hasFallbackPreviews?function getFallbackPreviews(){N.selectedVersion.hasConnectApiError=!0,N.getPreviews("Jpg").then(function(t){0<t.count?(renderAvailablePreviews(n,t.count,t.format),N.isProcessing=!1):N.getPreviews("Svg").then(function(e){0<e.count?(renderAvailablePreviews(n,e.count,e.format),N.isProcessing=!1):0===e.count&&0===t.count?(renderAvailablePreviews(n,-1,"ThumbnailBig"),N.isProcessing=!1):handlePreviewError()}).catch(handlePreviewError)})}():N.selectedVersion.hasFallbackPreviews?renderAvailablePreviews(n,N.selectedVersion.previewUrlCount,N.selectedVersion.previewFormat):handlePreviewError()}).catch(handlePreviewError),N.modalExternal=e,N.modalExternal?N.modalExternal.ignoreKeyPresses():N.modal&&N.modal.ignoreKeyPresses(),c(function focusExpandedFilePreview(){N.modalPreview=new I("docManExpandedFilePreview",document.activeElement),N.modalPreview.setFocusables(['button[id="expandedPreviewClose"]',"img[tabindex]",'button[id="expandedPreviewPreviousPage"]','input[id="expandedPreviewCurrentPage"]','button[id="expandedPreviewNextPage"]']),N.modalPreview.setModalEscape(function(){c(N.closeExpandedPreview,100)}),N.modalPreview.focus()},100));function renderWithoutPreviews(e){"InProgress"===e||"NotScheduled"===e?N.isProcessing=!0:(N.processErrorOccurred=!0,N.enlargedPreviewLink=UniDocMan.IMAGE_EXPANDED_PREVIEW_NOT_AVAILABLE)}function renderAvailablePreviews(e,t,n){N.selectedVersion.currentPreviewPage=1,N.selectedVersion.previewUrlCount=t,N.selectedVersion.previewFormat=n,N.selectedVersion.enlargedPreviewBaseUrl=i.PREVIEW_URLS[n],renderPreview(e,i.CONTENT_PREVIEW_LARGE)}function handlePreviewError(e){renderWithoutPreviews()}},N.changePageBy=function changePageBy(e){e=N.selectedVersion.currentPreviewPage+e;!function inPreviewRange(e){var t=N.selectedVersion.previewUrlCount;return 0<e==e<=t}(e)||(N.selectedVersion.hasConnectApiError&&!N.selectedVersion.hasFallbackPreviews&&N.getPreviews(N.selectedVersion.previewFormat).then(function(e){e.count>N.selectedVersion.previewUrlCount&&(N.selectedVersion.previewUrlCount=e.count)}).catch(function(e){}),N.selectedVersion.currentPreviewPage=e,renderPreviewPage(N.placeholderSelectedForExpandedPreview),1==e?N.modalPreview.focusNextFocusable():e==N.selectedVersion.previewUrlCount&&N.modalPreview.firstFocusable().focus())},N.onKeyDown=function onKeyDown(e){13===e.originalEvent.keyCode&&renderPreviewPage(N.placeholderSelectedForExpandedPreview)},N.showMoreComments=function showMoreComments(e){var t=e.commentsLimit;e.commentsLimit+=u.MORE_COMMENTS,setTimeout(function(){document.getElementById(t).focus()},10),N.postScreenreaderAlert(N.labels.LOADED_OLDER_COMMENTS,"placeholder-comment-loaded")},N.showNewDialog=function showNewDialog(){N.selectedPlaceholder&&N.selectedPlaceholder.isOpen&&jQuery(u.HASH+N.selectedPlaceholder.recordId).collapse("toggle");(function cacheValues(){N.cachedSections=C.screenSections,N.cachedFormBuilder=C.formBuilder.fields,C.formBuilder.fields={},C.screenSections={}})(),N.isNewPlaceholderShown=!0,C.setIsEditing(!0),document.body.addEventListener("keydown",ignoreTabNavigation)},N.showModal=function showModal(e){T.url(e)},N.showRequestDocumentsModal=function showRequestDocumentsModal(){selectedPlaceholderCount()&&(N.viewRequestDocumentsModal=!0,c(focusRequestDocumentsModal,100))},N.requestPortalDocuments=function requestPortalDocuments(){N.toggleButtonDisable();for(var r=selectedPlaceholderCount(),e=[],t={},n=0;n<g.placeholders.length;n++){var o=g.placeholders[n];o.isSelected&&(t={recordId:o.recordId,portalDocName:o.portalDocName,portalDocDescription:o.portalDocDescription},e.push(t))}0<e.length?(N.modal.ignoreKeyPresses(),E.requestPortalDocuments(e).then(function(e){for(var t=0;t<g.placeholders.length;t++){var n=g.placeholders[t];n.isSelected&&(n.portalEnabled=!0)}g.uncheckAllPlaceholders(),N.toggleButtonDisable();var o=r+" ";showSuccessToast(1===r?o+N.labels.PORTAL_DOC_REQUEST_SINGULAR:o+N.labels.PORTAL_DOC_REQUEST_PLURAL),N.closeRequestingDocuments()})):(N.toggleButtonDisable(),showErrorToast(N.labels.PORTAL_DOC_REQUEST_NONE),N.closeRequestingDocuments())},N.cancelPortalDocuments=function cancelPortalDocuments(){0<N.placeholdersToBeCancelled.length&&(N.modal.ignoreKeyPresses(),E.cancelPortalRequests(N.placeholdersToBeCancelled).then(function(e){for(var t=0;t<g.placeholders.length;t++)g.placeholders[t].isSelected&&(g.placeholders[t].portalEnabled=!1);g.uncheckAllPlaceholders(),N.hideCancelPortalModal()}))},N.cancelPortalModal=function cancelPortalModal(){N.placeholdersToBeCancelled=[];for(var e=0;e<g.placeholders.length;e++)g.placeholders[e].isSelected&&!0===g.placeholders[e].portalEnabled&&N.placeholdersToBeCancelled.push(g.placeholders[e].recordId);0===N.placeholdersToBeCancelled.length?showErrorToast(N.labels.PORTAL_DOC_BULK_CANCEL_NONE):(N.showCancelPortalModal=!0,c(focusCancelPortalModal,100))},N.hideCancelPortalModal=function hideCancelPortalModal(){N.showCancelPortalModal=!1,N.modal.unfocus(),N.modal=null},N.showPortalOptions=function showPortalOptions(){N.showPortalOptionsModal=!0,c(focusPortalOptionsModal,100)},N.showViewerPermissions=function showViewerPermissions(e){N.portalPermissions=null,N.showViewerPermissionsModal=!0,(e?N.getPartnerPortalPermissionOptions(e):N.getPartnerPortalPermissionOptions(N.selectedPlaceholder)).then(function(){c(focusViewerPermissionsModal,100)});d.$$postDigest(function(){angular.element(jQuery("#viewerPermissionPicklist")[0]).on("valueChange",function(n){N.portalPermissions.forEach(e=>{e.selected=!1;for(var t=0;t<n.originalEvent.detail.length&&!e.selected;t++)n.originalEvent.detail[t].value==e.value&&(e.selected=!0)}),c(N.modal.refreshFocusables,10)})}),document.body.addEventListener("keydown",ignoreTabNavigation)},N.cancelViewerPermissionsUpdate=cancelViewerPermissionsUpdate,N.saveViewerPermissions=function saveViewerPermissions(){N.performingAjax=!0;var t=N.rightClickedPlaceholder||N.selectedPlaceholder,n={};N.portalPermissions.forEach(function(e){e.selected&&(n[e.value.trim()]=e.label.trim())}),E.savePlaceholderViewerPerms(t.recordId,n).then(function(e){N.portalPermissions=null,t.viewerRoles=e.viewerRoles,t.viewerGroups=e.viewerGroups,t.viewerProfiles=e.viewerProfiles,N.postScreenreaderAlert(N.labels.PLACEHOLDER_VIEWER_PERMISSION_SAVE_SUCCESSFUL,"viewer-permissions-save-success",!0)},function(e){N.portalPermissions=null,savePlaceholderFailure(e)}),N.showViewerPermissionsModal=!1,N.modal.unfocus(),N.modal=null,N.performingAjax=!1},N.showVersionModal=function showVersionModal(){g.setVersionHistory(N.selectedPlaceholder).then(function(){angular.forEach(N.selectedPlaceholder.versions,function(e,t){g.sendPreviewLinkURLRequest(e.previewLink)}),N.showVersionsModal=!0,c(focusVersionModal,100)})},N.closeVersionModal=function closeVersionModal(){N.showVersionsModal=!1,N.modal.unfocus(),N.modal=null},N.sortOrder=sortOrder,N.toggleButtonDisable=function toggleButtonDisable(){N.buttonDisabled=!N.buttonDisabled},N.updatePortalRejectionComment=function updatePortalRejectionComment(){N.selectedPlaceholder&&angular.forEach(N.rejectionReasons,function(e,t){e.reason===N.selectedPlaceholder.portalRejectionReason&&(N.selectedPlaceholder.portalRejectionComment=e.comment)})},N.updatePlaceholderCount=updatePlaceholderCount,N.setArchivedFiles=setArchivedFiles,N.nameInPlaceholderNames=function nameInPlaceholderNames(e){return-1<N.placeholderNames.indexOf(e)},N.formatCommentDate=function formatCommentDate(e){var t,n=new Date(e);return e&&!isNaN(n.getTime())&&window.LifeCycle.Internationalize?(t=window.LifeCycle.Internationalize.format(n,"d"),n=window.LifeCycle.Internationalize.format(n,"t"),t+" "+n):e},N.formatDatetime=function formatDatetime(e){var t=getOffsetDatetime(e);return t?window.LifeCycle.Internationalize.format(t,"d")+" "+window.LifeCycle.Internationalize.format(t,"t"):e},N.formatDatetimeAsDate=function formatDatetimeAsDate(e){var t=getOffsetDatetime(e);return t?window.LifeCycle.Internationalize.format(t,"d"):e},N.showBulkUpdateModal=function showBulkUpdateModal(){var e=function getSelectedPlaceholderIds(){for(var e=[],t=[],n=0;n<g.placeholders.length;n++){var o=g.placeholders[n];o.isSelected&&(hasEditAccess(o,!0)||t.push(o),e.push(o.recordId))}if(0<t.length)return function showBulkEditAfterApprovalError(e){for(var t="",n=0;n<e.length;n++)t+="\n\t "+e[n].name;showErrorToast(N.labels.BULK_UPDATE_AFTER_APPROVAL_DENIED+t)}(t),[];return e}();0!==e.length&&(N.isLoading=!0,g.getBulkUpdateScreenSectionData(window.DocManId,e).then(function(e){N.isLoading=!1,e&&e.summaryScreenSectionModel&&(N.fieldGridScreenSectionId=e.updateScreenSectionId,N.bulkUpdateRecords=e.summaryScreenSectionModel.records,N.fieldRestrictions=JSON.parse(e.fieldRestrictions))}))},N.onBulkUpdateClosed=function onBulkUpdateClosed(){N.bulkUpdateRecords=[];var e=document.getElementById("docManActionsMenu");e&&e.focus()},N.onBulkUpdateComplete=function onBulkUpdateComplete(){N.isLoading=!0;for(var e=[],t=0;t<N.bulkUpdateRecords.length;t++)e.push(N.bulkUpdateRecords[t].recordId);(function determineChangeOfStatusBulk(){var e=N.getSelectedPlaceholders();g.retrievePlaceholders().then(function(){var i=[];e.forEach(function(e){for(var t,n={},o=new Date,r=0;r<g.placeholders.length;r++){var a=g.placeholders[r];e.recordId==a.recordId&&(e.newPlaceholder=a)}n.old=null==e.exceptionDate?null:new Date(e.exceptionDate),n.new=null==e.newPlaceholder.exceptionDate?null:new Date(e.newPlaceholder.exceptionDate),t=e.newPlaceholder.file&&""!=e.newPlaceholder.file&&(e.newPlaceholder.file.Title||e.newPlaceholder.file.Id),n.new&&(n.new<=o&&e.newPlaceholder.status!=u.STATUS_EXCEPTION?e.newPlaceholder.status=u.STATUS_EXCEPTION:o<n.new&&e.newPlaceholder.status==u.STATUS_EXCEPTION&&(e.newPlaceholder.status=t?u.STATUS_IN_FILE:u.STATUS_OPEN)),e.newPlaceholder.statusTranslation=P.getLabel(e.newPlaceholder.status),s.updatePlaceholderStatus(e.recordId,e.newPlaceholder.status),i.push({recordId:e.recordId,status:{old:e.status,new:e.newPlaceholder.status},exceptionDate:{old:e.exceptionDate,new:e.newPlaceholder.exceptionDate}})}),function postChatterCommentBulk(e){e.forEach(e=>{var t;e.newComment="",e.status.old!=e.status.new&&(e.newComment+=_.ssfbBuildStatusChatterComment(e.status.old,e.status.new)),e.exceptionDate.old!=e.exceptionDate.new&&((t=e.exceptionDate).old=null==t.old?null:o.formatMillisecondsToUTCDate(t.old),t.new=null==t.new?null:o.formatMillisecondsToUTCDate(t.new),e.newComment+=_.ssfbBuildDateChatterComment(null,{originalValue:e.exceptionDate.old,updatedValue:e.exceptionDate.new})),""!=e.newComment&&N.addChatterComment(e,!1)})}(i)})})(),g.updateRequirementRemote(e),g.uncheckAllPlaceholders(),N.isLoading=!1},N.showVersionOverwriteModal=function showVersionOverwriteModal(e,t){return N.showOverwriteModal=!0,c(focusDeleteModal,100)},N.prepareForESig=function prepareForESig(){{var t,n;x.validateDocuments(g.placeholders)&&(N.workingModal=!0,document.body.addEventListener("keydown",ignoreTabNavigation),(t=x.getReadyForTaggingCollectionId(g.placeholders))&&""!==t?(document.body.removeEventListener("keydown",ignoreTabNavigation),function getESignatureTaggingUrl(e){return E.getESignatureTaggingUrl(e)}(t).then(function(e){N.workingModal=!1,e&&""!==e&&(e=window.location.origin+e,e+="&documentCollectionId="+t,window.open(e))})):(N.workingModal=!1,N.esignUploadInProgress=!0,document.body.removeEventListener("keydown",ignoreTabNavigation),c(focusESigInProgressModal,100),n=o.getDocStoresFromSelectedPlaceholders(g.placeholders),function getActiveDocumentCollections(){for(var t=B.defer(),e=[],n=0;n<g.placeholders.length;n++){var o=g.placeholders[n];o.documentCollectionId&&e&&e.indexOf(o.documentCollectionId)<0&&o.status&&function isESignActiveStatus(e){return e&&-1===r.getESignatureNonActiveStatuses().indexOf(e.toUpperCase())}(o.status)&&e.push(o.documentCollectionId)}return 0===e.length?t.resolve([]):E.retrieveActiveDocumentCollections(e).then(function(e){t.resolve(e)}),t.promise}().then(function(e){0===e.length?function createCollection(e){return E.createCollection(e,!0)}(n).then(function(t){!function createVendorCollection(e,t){return E.createVendorCollection(e,t)}(n,t).then(function(e){retrievePlaceholders()}).catch(function(e){E.deleteCollection(t).then(function(){retrievePlaceholders()})})}):function associateDocsToCollection(e,t){return E.associateDocsToCollection(e,t)}(n,e[0]).then(function(e){retrievePlaceholders()})})))}},N.hasEditAccess=hasEditAccess,N.bulkScreenSectionPostLoad=function bulkScreenSectionPostLoad(e,t,n){var o=C.getPropertyBagObject(N.fieldGridScreenSectionId);Object.keys(o).forEach(function(e){var t,e=o[e];!function isRestrictedField(e){return 0!==N.fieldRestrictions.length&&e&&e.hasOwnProperty("fieldName")&&-1<Object.keys(N.fieldRestrictions).indexOf(e.fieldName)}(e)||(null===(t=N.fieldRestrictions[e.fieldName])?e.isVisible=!1:e.options&&(e.options=e.options.filter(function(e){return-1===t.indexOf(e.value)})))})},N.isESigDetailAvailable=function isESigDetailAvailable(e){return e&&e.status.toUpperCase()!==u.STATUS_SIGNATURE_CANCEL_PENDING.toUpperCase()&&U.isESignLockedPlaceholder(e.status)&&e.documentCollectionId&&N.hasEditPermissions},N.placeholderToEntity=G.placeholderToEntity,N.getPlaceholderContextType=getPlaceholderContextType,N.getFieldSetMetadata=getFieldSetMetadata,N.columnWidths={},N.fieldSetMetadataMap={},N.namespacePrefix=window.UniDocMan.namespacePrefix,N.init=function init(e,t,n,o,r,a,i){l.CATEGORY=e,l.EXCEPTION_DATE=t,l.LAST_MODIFIED_DATE=n,l.NAME=o,l.RELATIONSHIP=r,l.STATUS=a,l.YEAR=i,initializeDynamicVariables(),function activate(){T.url(R.DEFAULT_ROUTE),N.contextObjectType=N.configValues.contextObjectType,N.contextObjectType&&"LLC_BI__Product_Package__c"==N.contextObjectType?s.configureContextObject(function(e){e&&(e.LLC_BI__Product_Package__c?(S.setProductPackageProducts(e),D.updateScreenSections(!0).then(function(e){N.addNewScreenSections=e}),d.$$postDigest(function(){jQuery("#docManProductPackageContainer").on("hide.bs.dropdown",function(e){document.getElementById("docManProductPackageDropdown").focus()}),jQuery("#docManProductPackageContainer").on("shown.bs.dropdown",function(e){jQuery("#docManProductPackageContainer > ul > li > input").focus()})})):e.Contact&&(window.DocManId=e.Contact)),N.retrieveAndProcessData()}):N.retrieveAndProcessData();jQuery("#placeholderTable").on("show.bs.collapse",function(e){jQuery("#accordion .collapse.in").collapse("hide"),setIsCancelVisible(!1),setIsSaveVisible(!1),setIsEditVisible(!0);for(var t=0;t<N.totalPlaceholdersCount;t++)if(g.placeholders[t].recordId===e.target.id){g.placeholders[t].isOpen=!0,N.loadPlaceholderDetails(g.placeholders[t],0);break}}),N.documentManagerFileSizeLimit=v.get().systemPropsMap.get(p.UNI_DOCMAN_FILE_SIZE_LIMIT),d.allowedFileExtensions=v.get().systemPropsMap.get(p.ALLOWED_FILE_EXTENSIONS),d.allowedFileExtensions=angular.isString(d.allowedFileExtensions)?d.allowedFileExtensions.split(","):"",jQuery("#placeholderTable").on("hide.bs.collapse",function(e){if(!e.target.getAttribute("uni-date-picker"))for(var t=0;t<N.totalPlaceholdersCount;t++)if(g.placeholders[t].recordId===e.target.id){g.placeholders[t].isOpen=!1,g.placeholders[t].newComment="",A.publish(LifeCycle.Topics.GlobalActionButtonHandler.CANCEL);break}}),jQuery("#productDropDownSearch").click(function(e){e.stopPropagation()}),jQuery("#accordion").on("shown.bs.collapse",function(e){setIsCancelVisible(!1),setIsSaveVisible(!1),setIsEditVisible(!0),function scrollTo(e){var e=angular.element(e.target.parentElement),t=angular.element("#accordion");t.animate({scrollTop:t.scrollTop()+e.position().top-35},400)}(e)}),jQuery(window).on("dragover",function(e){e.preventDefault(),e.stopPropagation()}),jQuery(window).on("drop",function(e){e.preventDefault(),e.stopPropagation(),d.draggingFromRightNav=!1}),jQuery("#docManActionsMenuContainer").on("hide.bs.dropdown",function(e){document.getElementById("docManActionsMenu").focus()}),jQuery("#docManActionsMenuContainer").on("shown.bs.dropdown",function(e){jQuery("#docManActionsMenuContainer li:first-child a").focus()}),jQuery("body").popover({selector:'[id*="portal-toggletip"]',trigger:"focus manual",container:"body",placement:"right",template:`<div class="popover slds-theme--inverse">
						<div class="arrow"></div>
						<h3 class="popover-title"></h3>
						<div class="popover-content"></div>
					</div>`}),d.$on(u.SHOW_OVERWRITE_MODAL,N.showVersionOverwriteModal),d.$on(u.ERROR_TOAST_SHOWN,N.focusToast),d.$on(u.SET_TOAST,function(e,t){var n=null==t.label?"Notification":t.label;showToast(t.body,t.type,t.theme,n),t.link&&(N.downloadSubHeading1=f.DOWNLOAD_SUBHEADING_1,N.downloadVersionId=t.link,N.downloadLinkValue=f.DOWNLOAD_LINK_VALUE,N.downloadSubHeading2=f.DOWNLOAD_SUBHEADING_2),c(d.$digest.bind(d))}),d.$on("resizeColumn",function(e,t){N.columnWidths[t.columnName]=t.columnWidth})}(),function subscribeToSaveEvent(){A.subscribe(LifeCycle.Topics.GlobalActionButtonHandler.SAVE,function(){ssfbSave(N.selectedPlaceholder)})}()},N.savePlaceholderSuccess=function savePlaceholderSuccess(e,t,n){g.copyPlaceholderProperties(e[0],t),t.isEditing=!1,h.clear(),N.toggleButtonDisable(),t.file?t.file.previewLoaded=!0:t.file={previewLoaded:!0,previewLink:""};N.loadPlaceholderDetails(t,500,!0),n&&_.buildChatterCommentForChangedFields(t,N.selectedPlaceholder.beforeFields,function(e){(0<n.length||0<e.length)&&(t.newComment=n+"  "+e,N.addChatterComment(t)),N.retrieveChatterComments(t)});g.updateRequirementRemote([t.recordId]),N.selectedPlaceholder.beforeFields=t.fields},N.handlePermissionsKeydown=function handlePermissionsKeydown(e){"Space"!==e.code&&32!==e.keyCode||N.modal.refreshFocusables()},N.closeRequestingDocuments=function closeRequestingDocuments(){N.viewRequestDocumentsModal=!1,N.requestDocumentsEditMode=!1,N.modal.unfocus(),N.modal=null},N.toggleRequestDocumentsEditMode=function toggleRequestDocumentsEditMode(t){N.requestDocumentsEditMode=t,N.modal.ignoreKeyPresses(),c(function(){var e=t?"docManToggleEditModeOff":"docManToggleEditModeOn";N.modal.refreshFocusables(),document.querySelector(`button[id="${e}"]`).focus(),N.modal.allowKeyPresses()},50)},N.clickEventElement=function clickEventElement(e){var t="Space"===e.code||32===e.keyCode,n="Enter"===e.code||13===e.keyCode,t="keydown"===e.type&&(t||n);t&&(c(function(){angular.element(e.target).click()},1),e.preventDefault());return t},N.closeESigInProgressModal=function closeESigInProgressModal(){N.esignUploadInProgress=!1,N.modal.unfocus(),N.modal=null},N.closeESigMessageModal=function closeESigMessageModal(){N.modal.unfocus(),N.modal=null,N.showEsignatureMessageModal=!1},N.closeESigDetailsModal=function closeESigDetailsModal(){N.modal.unfocus(),N.modal=null,N.showEsignatureCollectionDetailModal=!1},N.renderContextMenu=renderContextMenu,N.focusContextMenu=function focusContextMenu(e,t){var n="Space"===e.code||32===e.keyCode,o="Enter"===e.code||13===e.keyCode,r="keydown"===e.type;("click"===e.type||r&&(n||o))&&(renderContextMenu(e,t),c(function(){N.modal&&(N.modal.unfocus(),N.modal=null),N.modal=new I("placeholderContextMenu",document.activeElement),N.modal.setModalEscape(function(){d.$apply(N.unfocusContextMenu)}),N.modal.focus()},100))},N.unfocusContextMenu=function unfocusContextMenu(){N.setShowContextMenu(!1),N.modal&&"placeholderContextMenu"==N.modal.modalRootIdentifier&&(N.modal.unfocus(),N.modal=null)},N.focusToast=function focusToast(){setTimeout(function(){var e=document.getElementById("docManToastCloseButton");(e=e||document.getElementById("docManComponentToastCloseButton"))&&(N.focusedElement=document.activeElement,e.focus())},300)},N.handleDropdownInputKeydown=function handleDropdownInputKeydown(e){var t=jQuery(e.target),n=null,o=null,r=null,a=null,i=document.activeElement;n=t.parents();for(var l=0;l<n.length&&null==o;l++)(s=jQuery(n[l])).hasClass("dropdown")&&(o=s);if(o){n=o.find('[class*="dropdown-item"]');for(var s,l=0;l<n.length;l++)if((s=jQuery(n[l])).is(t)){r=jQuery(n[0<l?l-1:n.length-1]),a=jQuery(n[l<n.length-1?l+1:0]);break}d.$$postDigest(function(){if("Escape"===e.key||27===e.keyCode)o.trigger("click");else if(38===e.keyCode&&null!=r)r.focus();else if(40===e.keyCode&&null!=a)a.focus();else if(("Space"===e.key||32===e.keyCode)&&"INPUT"===i.tagName&&"text"===i.getAttribute("type")||!N.clickEventElement(e)&&!ignoreTabNavigation(e))return;e.preventDefault(),e.stopPropagation()})}},N.clickDropdown=function clickDropdown(e,t=!0){if(t){for(var n=null,o=jQuery(e.target).parents(),r=0;r<o.length&&null==n;r++){var a=jQuery(o[r]);a.hasClass("dropdown")&&(n=a)}null!=n&&(n.one("hidden.bs.dropdown",function(){n.find('[data-toggle*="dropdown"]').focus()}),n.one("shown.bs.dropdown",function(){n.find('[class*="dropdown-item"]')[0].focus()}))}},N.ignoreEnter=function ignoreEnter(e){return("Enter"===e.key||13===e.keyCode)&&(e.preventDefault(),!0)},N.postScreenreaderAlert=function postScreenreaderAlert(e,t="",n=!1,o="docManAlerter"){var r,a=document.getElementById(o);null!=a&&(r=document.createElement("div"),o=1==(o=jQuery(`#${o} > div[data-msg-id*="${t}"]`)).length?parseInt(o[0].getAttribute("data-msg-repeats")):o.length,n&&(a.innerHTML=""),r.id="msg-"+Date.now().toString(),r.setAttribute("data-msg-id",t),r.setAttribute("data-msg-repeats",o+1),r.appendChild(document.createTextNode(e+"".repeat(o))),a.appendChild(r))},N.getFormattedLabel=function getFormattedLabel(e,t={}){var n=N.labels[e];n&&Object.keys(t).forEach(e=>{n=n.replaceAll(`\${${e}}`,t[e])});return n},N.focusPlaceholderEditDetailsButton=function focusPlaceholderEditDetailsButton(){c(function(){jQuery("#docManPlaceholderOutputEditDetails").focus()},10)},N.focusEditDetailsForm=function focusEditDetailsForm(){c(function(){jQuery("#docManPlaceholderOutputSSFBSection nc-screen-section-form-builder").find(":focusable").first().focus()},10)},N.ignoreTabNavigation=ignoreTabNavigation,N.closeFileExtensionErrorToast=function closeFileExtensionErrorToast(){N.uploadServiceData.showToast=!1,N.focusedElement.focus()},N.closeFileSizeErrorToast=function closeFileSizeErrorToast(){N.uploadServiceData.showSizeToast=!1,N.focusedElement.focus()},N.dismissPortalToggletip=function dismissPortalToggletip(e){"keydown"!==e.type||27!==e.keyCode&&"Escape"!==e.code||jQuery(e.target).popover("hide");e.stopImmediatePropagation()},N.ssfbSave=ssfbSave,N.postLoad=function postLoad(){A.publish(LifeCycle.Topics.GlobalActionButtonHandler.HIDE_SAVE),A.publish(LifeCycle.Topics.GlobalActionButtonHandler.HIDE_CANCEL),A.publish(LifeCycle.Topics.GlobalActionButtonHandler.HIDE_EDIT),function loadLegalEntityCustomField(){addCustomField({fieldName:t.LEGAL_ENTITY.LOAN,templateName:"legal-entity-custom-field-loan",templateParams:{options:N.relationshipOptions}}),addCustomField({fieldName:t.LEGAL_ENTITY.UNIVERSAL,templateName:"legal-entity-custom-field-universal",templateParams:{options:N.relationshipOptions}}),updateLegalEntityFieldDisplayValue()}(),function loadDocTypeCustomField(){addCustomField({fieldName:t.DOCTYPE,templateName:"doc-type-custom-field",templateParams:{}})}(),function loadDocTypeNameCustomField(){addCustomField({referenceFieldPath:k.ACCOUNT.DOCTYPE_NAME,templateName:"doc-type-name-custom-field",templateParams:{}}),addCustomField({referenceFieldPath:k.LOAN.DOCTYPE_NAME,templateName:"doc-type-name-custom-field",templateParams:{}}),addCustomField({referenceFieldPath:k.UNIVERSAL.DOCTYPE_NAME,templateName:"doc-type-name-custom-field",templateParams:{}})}(),function loadNameCustomField(){addCustomField({fieldName:t.NAME,templateName:"name-custom-field",templateParams:{}})}(),document.querySelector("#addNewModal")&&c(focusAddNewModal,500)},N.shouldShowHeader=function shouldShowHeader(e){return D.hasVisibleFields(e)},N.ssfbDetermineChangeOfStatus=function ssfbDetermineChangeOfStatus(e){var t=C.formBuilder.fields,n=D.getFields(["LLC_BI__exceptionDate__c","LLC_BI__Exception_Date__c"],t,!0),t=D.getFields(["LLC_BI__reviewStatus__c","LLC_BI__Review_Status__c"],t,!0),o="",r=new Date,n=new Date(parseInt(n.value));e.file||(e.file={previewLoaded:!1,previewLink:""});n<=r&&N.selectedPlaceholder.status!=u.STATUS_EXCEPTION?(t.value=u.STATUS_EXCEPTION,o+=_.ssfbBuildStatusChatterComment(N.selectedPlaceholder.status,u.STATUS_EXCEPTION),N.selectedPlaceholder.status=u.STATUS_EXCEPTION,N.selectedPlaceholder.statusTranslation=P.getLabel(u.STATUS_EXCEPTION)):r<n&&N.selectedPlaceholder.status==u.STATUS_EXCEPTION&&(r=u.STATUS_OPEN,(e.file.Title||e.file.Id)&&(r=u.STATUS_IN_FILE),t.value=r,o+=_.ssfbBuildStatusChatterComment(u.STATUS_EXCEPTION,r),N.selectedPlaceholder.status=r,N.selectedPlaceholder.statusTranslation=P.getLabel(r));return o},N.getCustomFields=function getCustomFields(){return N.customFields},N.customFields=[],N.addNewScreenSections=[],N.fetchPreviewData=function fetchPreviewData(t,n,o){return fetch(t+n.count).then(function(e){return 200===e.status&&n.count<o?(n.count++,fetchPreviewData(t,n,o)):(400<=e.status&&0<n.count&&(N.selectedVersion.hasFallbackPreviews=!0),n)}).catch(function(e){return n})},N.getPreviews=function getPreviews(e){var t=-1<N.selectedVersion.previewUrlCount?N.selectedVersion.previewUrlCount:0,e=N.selectedVersion.previewFormat||e,n="Svg"===e?"SVGZ":"JPGZ",e={format:e,count:t},n=function buildPagePreviewRequest(e,t){var n=N.configValues.siteBaseSecureUrl+"/sfc/servlet.shepherd/version/renditionDownload?rendition=";return n+=t+"&versionId="+e+"&page="}(N.selectedVersion.Id,n);return N.fetchPreviewData(n,e,t+3).then(function(e){return e}).catch(function(e){return previewDataResponse})},N.isEditVisible=!0,N.isSaveVisible=!1,N.isCancelVisible=!1,N.isSite=""!==N.configValues.siteBaseSecureUrl,N.fileUploadedWhileFormInDirtyState=!1,N.setFileUploadState=function setFileUploadState(){N.isSaveVisible&&N.isCancelVisible&&(N.fileUploadedWhileFormInDirtyState=!0)},N.deactivateLegacyFilters=function deactivateLegacyFilters(){N.isFilterByCategories=!1,N.selectedCategories=[]},N.getPartnerPortalPermissionOptions=function getPartnerPortalPermissionOptions(e){var t=B.defer(),n=N.permissionService.getViewerPermissions(e);N.portalPermissions||(N.portalPermissions=[],E.getPlaceholderPermOptions().then(function(e){processPermOptions(e,n),t.resolve(N.portalPermissions)}));return t.promise},N.processPermOptions=processPermOptions,N.portalPermissions=null,N.actionService=X,N.getSelectedPlaceholders=getSelectedPlaceholders,N.focusedElement=null}angular.module("app").controller("PlaceholderController",PlaceholderController),PlaceholderController.$inject=["$scope","COLUMNS","FILE_RECORD_TYPES","LEFT_NAV_FILTER_HEADERS","FILE","dataService","browserDetectService","commonService","uploadService","$timeout","$rootScope","CONSTANTS","ALERT_DIALOG","ROUTES","NEW_OPTIONS","CATEGORY_FIELD","permissionService","PERMISSIONS","TOAST_TYPES","SYSTEM_PROPERTIES","FIELD_NAMES","REFERENCE_PATHS","universalDocManRemotingService","defaultDownloadService","downloadService","fileStagingService","placeholderService","eSignatureService","eSignaturePreparationService","messageService","config","$location","$q","productPackageService","labels","navigator","screenSection","ndsFormService","chatterService","ssfbService","filterService","pubsub","$filter","categoryService","actionService","Modal"]}()},function(e,t){!function(){"use strict";function StatusController(o,e,r,n,a,i){this.updatePlaceholderStatus=function updatePlaceholderStatus(e,t){t===i.STATUS_EXCEPTION&&e.portalEnabled?o.controller.initializePortalRejectionModal(e):r.performStatusUpdate(o,e,t)},this.canOpenStatusDropdown=function canOpenStatusDropdown(e){var t=n.hasEditAfterApprovalPermission("UNI_REVIEW_DOCUMENTS",e.status),e=a.statusLists[e.statusListValue];return t&&0<e.length},function activate(){e.$$listeners[i.SAVED_PORTAL_REJECTION_REASON]||e.$on(i.SAVED_PORTAL_REJECTION_REASON,function(e,t,n){r.performStatusUpdate(o,t,n)});e.$$listeners[i.UPDATE_PLACEHOLDER_STATUS]||e.$on(i.UPDATE_PLACEHOLDER_STATUS,function(e,t,n){r.performStatusUpdate(o,t,n)})}()}angular.module("app").controller("StatusController",StatusController),StatusController.$inject=["$scope","$rootScope","commonService","permissionService","placeholderService","CONSTANTS"]}()},function(e,t){!function(){"use strict";function RightNavController(n,r,e,a,i,l,t,o,s,c,d,u,f,p){var E=this;function initializeDynamicVariables(){E.relationships=[],E.selectedRelationship=null,E.selectedRelationshipPlaceholders=[],E.noSelectedRelationshipPlaceholders=!0,E.pledgedCollateral=[],E.selectedCollateral=null,E.selectedCollateralPlaceholders=[],E.noSelectedCollateralPlaceholders=!0,E.isLoaded=!1,E.rightNavDisplay="",E.draggingFiles=!1,E.disableDraggingPromise=null,i.archivedFiles=[]}function focusRightNavFileStaging(){E.modal=new u("rightNavTableFileStaging",document.activeElement),E.modal.focus()}function focusRightNavRelationships(){E.modal=new u("rightNavRelationshipTable",document.activeElement),E.modal.focus()}function focusRightNavCollateral(){E.modal=new u("rightNavCollateralTable",document.activeElement),E.modal.focus()}E.archive=e.ARCHIVE,E.relationship=e.RELATIONSHIP,E.fileStaging=e.FILE_STAGING,E.collateral=e.COLLATERAL,E.showPermanentDeleteModal=!1,E.placeholderToBeDeleted=null,E.rightNavIsBusy=!1,E.fileStagingService=t,E.configValues=d.get(),E.labels=p.getLabels(),E.modal=null,E.FILE_STAGING_ALERT_ID="docManAlerterFS",E.toggleRelationship=function toggleRelationship(e){E.selectedRelationship=e,E.rightNavSearchText="",E.selectedRelationshipPlaceholders=[],E.noSelectedRelationshipPlaceholders=!0,r.retrieveDocumentsWithAttachmentsForSpecifiedId(e.accountId,function(e){0<e.length?s.prepareForUrls(e).then(function(){E.selectedRelationshipPlaceholders=e,n.$$postDigest(function(){E.modal.refreshFocusables(),E.modal.allowKeyPresses()})}):n.$apply(function(){E.selectedRelationshipPlaceholders=e,E.noSelectedRelationshipPlaceholders=!1,E.modal.refreshFocusables(),E.modal.allowKeyPresses()})},null)},E.togglePledgedCollateral=function togglePledgedCollateral(e){E.selectedCollateral=e,E.rightNavSearchText="",E.selectedCollateralPlaceholders=[],E.noSelectedCollateralPlaceholders=!0,e&&r.retrieveDocumentsWithAttachmentsForSpecifiedId(e.collateralId,function(e){0<e.length?s.prepareForUrls(e).then(function(){E.selectedCollateralPlaceholders=e,n.$$postDigest(function(){E.modal.refreshFocusables(),E.modal.allowKeyPresses()})}):n.$apply(function(){E.selectedCollateralPlaceholders=e,E.noSelectedCollateralPlaceholders=!1,E.modal.refreshFocusables(),E.modal.allowKeyPresses()})},null)},E.toggleRightNav=function toggleRightNav(e){{var t,n;if(!E.rightNavIsBusy)return t=!(E.rightNavIsBusy=!0),n=!1,E.rightNavDisplay===e&&(t=!0),E.rightNavDisplay=e,E.isLoaded?t?(E.rightNavDisplay="",E.isLoaded=!1,E.rightNavIsBusy=!1,E.modal&&(E.modal.unfocus(),E.modal=null)):(n=!0,E.rightNavIsBusy=!1):(n=!0,E.isLoaded=!0,E.rightNavIsBusy=!1),n?(null!=E.modal&&(E.modal.unfocus(),E.modal=null),E.initiateRemoteCallToRetrieveRightNavData()):null}},E.archiveFromFileStaging=function archiveFromFileStaging(e){E.modal.ignoreKeyPresses();var t=E.fileStagingService.stagedFiles.indexOf(e);l.archivePlaceholderFromFileStaging(e.recordId).then(function(){var e=E.modal.getNextFocusable();n.$evalAsync(function(){E.fileStagingService.stagedFiles.remove(E.fileStagingService.stagedFiles[t])}),f(function(){E.modal.allowKeyPresses(),E.modal.refreshFocusables(),e.focus()},100),E.postScreenreaderAlert(E.labels.ARCHIVE_FILE_SUCCESS,"file-archive-success",!1,E.FILE_STAGING_ALERT_ID),r.retrieveArchivedDocumentsWithAttachments(function(e){s.prepareForUrls(e).then(function(){i.archivedFiles=e})})})},E.initiateRemoteCallToRetrieveRightNavData=function initiateRemoteCallToRetrieveRightNavData(){{var n;E.rightNavSearchText="",E.rightNavDisplay===E.relationship&&(E.relationships=[],E.configValues.contextObjectType===a.CONTEXT_OBJECT_TYPE_PRODUCT_PACKAGE&&c.selectedProductInProductPackage.objectType===a.CONTEXT_OBJECT_TYPE_PRODUCT_PACKAGE?(n=[],angular.forEach(c.productPackageProducts,function(e,t){l.retrieveLegalEntities(e.recordId).then(function(e){angular.forEach(e,function(e,t){e&&e.accountId&&n.indexOf(e.accountId)<0&&(n.push(e.accountId),E.relationships.push(e))}),setTimeout(focusRightNavRelationships,100)})})):l.retrieveLegalEntities(window.DocManId).then(function(e){e&&(E.relationships=e),setTimeout(focusRightNavRelationships,100)}),E.isLoaded=!0)}{var o;E.rightNavDisplay===E.collateral&&(E.pledgedCollateral=[],o=[],E.configValues.contextObjectType===a.CONTEXT_OBJECT_TYPE_PRODUCT_PACKAGE&&c.selectedProductInProductPackage.objectType===a.CONTEXT_OBJECT_TYPE_PRODUCT_PACKAGE?angular.forEach(c.productPackageProducts,function(e,t){e.objectType===a.CONTEXT_OBJECT_TYPE_LOAN&&o.push(e.recordId)}):o.push(window.DocManId),l.retrieveMultiplePledgedCollateral(o).then(function(e){e&&0<e.length&&(E.pledgedCollateral=e),f(focusRightNavCollateral,100)}))}E.rightNavDisplay===E.archive&&r.retrieveArchivedDocumentsWithAttachments(function(e){s.prepareForUrls(e).then(function(){i.archivedFiles=e,E.isLoaded=!0})});return E.rightNavDisplay!==E.fileStaging?null:t.retrieveFileStagingPlaceholders().then(function(){E.isLoaded=!0,f(focusRightNavFileStaging,100)})},E.initializeDynamicVariables=initializeDynamicVariables,E.permanentlyDelete=function permanentlyDelete(e){E.showPermanentDeleteModal=!0,E.placeholderToBeDeleted=e},E.cancelDelete=function cancelDelete(){E.showPermanentDeleteModal=!1,E.placeholderToBeDeleted=null},E.confirmDelete=function confirmDelete(){!function deletePlaceholderIndex(t){r.deletePlaceholderIndex(t.recordId,function(){n.$apply(function(){var e=i.archivedFiles.indexOf(t);i.archivedFiles.splice(e,1),E.placeholderToBeDeleted=null,E.showPermanentDeleteModal=!1})},null)}(E.placeholderToBeDeleted)},E.addFileFromLeftNav=function addFileFromLeftNav(){E.isLoaded||E.toggleRightNav(E.fileStaging)},E.toggleAllPlaceholders=function toggleAllPlaceholders(){var e=n.$parent.controller,t=[];t=!n.toggleState||e.totalPlaceholdersCount>e.placeHolderPaginationLimit&&!e.searchText&&!e.placeholderFilterValue?e.placeholderService.placeholders:n.filteredPlaceholders;angular.forEach(t,function(e,t){o.hasRequiredViewerAccess(e)&&(e.isSelected=n.toggleState)})},E.closeRightNav=function closeRightNav(){""!==E.rightNavDisplay&&E.toggleRightNav(E.rightNavDisplay)},E.expandAccordion=function expandAccordion(e){var t="Space"===e.code||32===e.keyCode,n="Enter"===e.code||13===e.keyCode;"keydown"===e.type&&(t||n)&&(E.modal.ignoreKeyPresses(),f(function(){angular.element(e.target).click()},1));e.preventDefault()},E.postScreenreaderAlert=function postScreenreaderAlert(e,t="",n=!1,o="docManAlerter"){angular.element('[ng-controller*="PlaceholderController"]').controller().postScreenreaderAlert(e,t,n,o)},jQuery("#rightNavRelationshipTable").on("show.bs.collapse",function(n){n.target.getAttribute("uni-date-picker")||angular.forEach(E.relationships,function(e,t){e.accountId===n.target.id?(e.isOpen=!0,E.toggleRelationship(e)):(e.isOpen=!1,jQuery(a.HASH+e.accountId).removeClass(a.IN_CLASS))})}),jQuery("#rightNavCollateralTable").on("show.bs.collapse",function(n){n.target.getAttribute("uni-date-picker")||angular.forEach(E.pledgedCollateral,function(e,t){e.recordId===n.target.id?(e.isOpen=!0,E.togglePledgedCollateral(e)):(e.isOpen=!1,jQuery(a.HASH+e.recordId).removeClass(a.IN_CLASS))})}),jQuery("#rightNavRelationshipTable").on("hide.bs.collapse",function(e){if(!e.target.getAttribute("uni-date-picker")){for(var t=0;t<E.relationships.length;t++)if(E.relationships[t].accountId==e.target.id){n.$apply(function(){E.relationships[t].isOpen=!1});break}E.modal.refreshFocusables(),E.modal.allowKeyPresses()}}),jQuery("#rightNavCollateralTable").on("hide.bs.collapse",function(e){if(!e.target.getAttribute("uni-date-picker")){for(var t=0;t<E.pledgedCollateral.length;t++)if(E.pledgedCollateral[t].recordId==e.target.id){n.$apply(function(){E.pledgedCollateral[t].isOpen=!1});break}E.modal.refreshFocusables(),E.modal.allowKeyPresses()}}),i.$on(a.FILE_STAGING_UPLOAD_COMPLETE,function(){i.$evalAsync(E.modal.refreshFocusables)}),initializeDynamicVariables()}angular.module("app").controller("RightNavController",RightNavController),RightNavController.$inject=["$scope","dataService","SECTION","CONSTANTS","$rootScope","universalDocManRemotingService","fileStagingService","permissionService","placeholderService","productPackageService","config","Modal","$timeout","labels"]}()},function(e,t){!function(){"use strict";function LeftNavController(t,n,o,i,e,r,a,l,s){var c=this;function validatedObjectArray(e,t){for(var n=[],o=0;o<e.length;o++){var r,a=!0;for(r in t)e[o].hasOwnProperty(r)?typeof e[o][r]!=typeof t[r]&&(a=!1,console.log(r+i.TYPE_SHOULD_BE+typeof t[r])):(a=!1,console.log(i.REQUIRED_PROPERTY_MISSING+r));a&&n.push(e[o])}return n}s=s.get(),c.customLinks=[],c.buttons=[],c.filters=[],c.showArchiveLink,function activate(){c.showArchiveLink=s.systemPropsMap.get(e.ARCHIVE_BROWSER_VISIBLE),function retrieveCustomLinks(){var e=t.customLinkDefinitions();c.customLinks=validatedObjectArray(e,r)}(),function retrieveButtons(){var e=n.getButtonDefinitions();c.buttons=validatedObjectArray(e,a)}(),function retrieveFilters(){var e=o.getFilters();c.filters=validatedObjectArray(e,l)}()}()}angular.module("app").controller("LeftNavController",LeftNavController),LeftNavController.$inject=["customLinkService","buttonService","filterService","CONSTANTS","SYSTEM_PROPERTIES","CUSTOM_LINK_REQUIREMENTS","CUSTOM_BUTTON_REQUIREMENTS","CUSTOM_FILTER_REQUIREMENTS","config"]}()},function(e,t){!function(){"use strict";function draggable(o){return{restrict:"A",scope:{account:"=",placeholder:"=",hasPermission:"="},link:function link(n,e,t){n.hasPermission&&(e[0].draggable=!0,e.bind("dragstart",function processDragEvent(e){o.draggingFromRightNav=!0;var t=n.placeholder;n.account&&(t.accountId=n.account.accountId,t.relationship=n.account.name);!function getDataTransfer(e){return e.dataTransfer||e.originalEvent.dataTransfer}(e).setData("text",JSON.stringify(t))}))}}}angular.module("app").directive("draggable",draggable),draggable.$inject=["$rootScope"]}()},function(e,t){!function(){"use strict";function fileDropzone(i,l,s,c,d,u,f,p,E,m,t,e,n,o){var g=o.getLabels();return{restrict:"C",scope:{rightnavcontroller:"=rightnavcontroller",hasPermission:"="},link:function link(r,a,e){this.configValues=t.get(),r.hasPermission&&(a.bind(s.DRAG_OVER_EVENT,processDragOverOrEnter),a.bind(s.DRAG_ENTER_EVENT,processDragOverOrEnter),a.bind(s.DROP_EVENT,processDropEvent),a.bind(s.DRAG_LEAVE_EVENT,processDragOverOrEnter));function getDataTransfer(e){return e.dataTransfer||e.originalEvent.dataTransfer}function processDragOverOrEnter(e){var t=jQuery(e.target);return"dragleave"==e.type?t.removeClass("fileHover"):t.addClass("fileHover"),r.hasPermission?(e.type===s.DRAG_ENTER_EVENT||e.type===s.DRAG_OVER_EVENT?(f.draggingFromRightNav||a.addClass(s.STAGE_DRAGGED_CLASS),r&&r.$parent&&r.$parent.vm&&null!=r.$parent.vm.disableDraggingPromise&&($interval.cancel(r.$parent.vm.disableDraggingPromise),r.$parent.vm.disableDraggingPromise=null)):e.type===s.DRAG_LEAVE_EVENT&&a.removeClass(s.STAGE_DRAGGED_CLASS),e&&(e.preventDefault&&e.preventDefault(),e.stopPropagation)||(getDataTransfer(e).effectAllowed=s.COPY_EFFECT)):(a.unbind(s.DRAG_OVER_EVENT,processDragOverOrEnter),a.unbind(s.DRAG_ENTER_EVENT,processDragOverOrEnter),a.unbind(s.DROP_EVENT,processDropEvent),a.unbind(s.DRAG_LEAVE_EVENT,processDragOverOrEnter)),!1}function linkRelationshipDoc(n){var o,e={name:n.fileName,size:n.fileSize,type:n.mimeType};r.rightnavcontroller?o=r.rightnavcontroller:r.$parent.vm&&(o=r.$parent.vm),p.linkDocumentVersion(n.file.Id,r.$parent.placeholder.recordId,m.generateFileMetadata(r.$parent.placeholder,e),!0,!0===n.isDocumentExternal,n.file.Title,n.file.documentVersionId).then(function(t){var e=r.$parent.placeholder.status;r.$parent.placeholder.newComment=c.getChatterStatusChangeComment(n.file.Title,e,s.STATUS_IN_FILE),r.$parent.controller.addChatterComment(r.$parent.placeholder),n.isDocumentExternal?(r.$parent.placeholder.isDocumentExternal=n.isDocumentExternal,r.$parent.placeholder.documentStorageType=n.documentStorageType):(r.$parent.placeholder.isDocumentExternal=!1,r.$parent.placeholder.documentStorageType=null),o.rightNavDisplay===o.collateral||n.category&&""!==n.category||function handleFileStagingDocDeletion(n){l.deletePlaceholder(n.recordId,function(){r.$apply(function(){r.rightnavcontroller||(r.rightnavcontroller=r.$parent.vm),d.stagedFiles.forEach(function(e,t){if(e.recordId===n.recordId)return d.stagedFiles.remove(d.stagedFiles[t]),!1}),l.retrieveArchivedDocumentsWithAttachments(function(e){m.prepareForUrls(e).then(function(){f.archivedFiles=e})})})})}(n),function updatePlaceholderFieldsEval(e,t){var n=E.defer();t.rightNavDisplay!=t.collateral&&t.rightNavDisplay!=t.relationship?n.resolve():p.updatePlaceholderFields(e.recordId,r.$parent.placeholder.recordId).then(function(){n.resolve()});return n.promise}(n,o).then(function(){p.savePlaceholderData(r.$parent.placeholder.recordId,null,null).then(function(e){m.copyPlaceholderProperties(e[0],r.$parent.placeholder),c.updatePlaceholderProperties(r.$parent.placeholder,r.$parent.controller.buildImageURL,t)})})}).catch(function(e){r.$parent.placeholder.uploadingFile=!1})}function getProgressBarData(e,t){r.$parent.placeholder.fileUploadingText=g.UPLOADING+" "+e+" "+g.TO_LABEL+" "+t+" "+s.THREE_PERIODS}function processDropEvent(e){r.$parent.controller.setFileUploadState(),u.clearFields(s.EXCEPTION_DATE_FIELDS);var t,n=new FileReader,o=getDataTransfer(e).files[0];if(!o)return function handleRightNavFileDrop(t){r.$parent.placeholder.file&&r.$parent.placeholder.file.Id?r.$apply(function(){i.shouldOverwrite().then(function(e){e&&(getProgressBarData(t.file.Title,r.$parent.placeholder.name),c.uploadProgress(r.$parent.placeholder,null,100),i.archiveExistingDocument(r.$parent.placeholder).then(function(){linkRelationshipDoc(t)}))})}):(r.$apply(function(){getProgressBarData(t.file.Title,r.$parent.placeholder.name),c.uploadProgress(r.$parent.placeholder,null,100)}),linkRelationshipDoc(t))}(JSON.parse(getDataTransfer(e).getData(s.GETDATA))),!1;1===getDataTransfer(e).files.length?(f.draggingFromRightNav=!1,t=s.MAX_FILE_SIZE,a.removeClass("stageDragged"),null!=e&&e.preventDefault(),n.onload=function(e){o.size<t?function uploadFile(o,r,n){getProgressBarData(r.name,o.$parent.placeholder.name),m.uploadingToPlaceholder=o.$parent.placeholder,o.$parent.controller.postScreenreaderAlert(o.$parent.placeholder.fileUploadingText,"file-new-uploading-file",!0),c.checkForExistingContentDocument(o.$parent.placeholder.file).then(function(e){var t=e[1];i.uploadContentDocument(r,n,function(e){var n=o.$parent.placeholder.status;e.isExternal&&!0===e.isExternal||(p.createDocumentStorageMetadata(e.id,o.$parent.placeholder.recordId,t,m.generateFileMetadata(o.$parent.placeholder,r)).then(function(t){p.savePlaceholderData(o.$parent.placeholder.recordId,null,null).then(function(e){m.copyPlaceholderProperties(e[0],o.$parent.placeholder),c.updatePlaceholderProperties(o.$parent.placeholder,o.$parent.controller.buildImageURL,t),o.$parent.placeholder.newComment=c.getChatterStatusChangeComment(r.name,n,s.STATUS_IN_FILE),o.$parent.controller.addChatterComment(o.$parent.placeholder)})}).catch(function(e){o.$parent.placeholder.uploadingFile=!1,m.uploadingToPlaceholder={}}),o.$parent.placeholder.isDocumentExternal&&(o.$parent.placeholder.isDocumentExternal=!1,o.$parent.placeholder.documentStorageType=null))},function(e,t,n){e!==s.CANCEL_OVERWRITE&&(o.$parent.placeholder.uploadingFile=!1,m.uploadingToPlaceholder={})},function(e){o.$evalAsync(function(){c.uploadProgress(o.$parent.placeholder,e)})})})}(r,o,e.target.result):(l.dispatchErrorEvent("",g.MAX_FILE_SIZE_ERROR),r.$apply(function(){a.children().removeClass("imageDrag")}))},n.readAsDataURL(o)):(l.dispatchErrorEvent("",g.MULTIPLE_UPLOAD_ERROR),r.$apply(function(){a.removeClass("stageDragged"),a.children().removeClass("imageDrag")}))}}}}angular.module("app").directive("fileDropzone",fileDropzone),fileDropzone.$inject=["uploadService","dataService","CONSTANTS","commonService","fileStagingService","ssfbService","$rootScope","universalDocManRemotingService","$q","placeholderService","config","ALERT_DIALOG","TOAST_TYPES","labels"]}()},function(e,t){!function(){"use strict";function imageOnLoad(o){return{restrict:"C",scope:{placeholder:"=",hasPermission:"=",hasViewPermission:"=?"},link:function link(t,n,e){n.bind("load",function processLoad(e){t.$apply(function(){t&&t.$parent&&(t.$parent.controller&&(e.target.attributes.Id.value==o.TARGET_LARGE_IMG_PREVIEW?clearInterval(t.$parent.controller.enlargedPreviewLoadingInterval):clearInterval(t.$parent.controller.imagePreviewLoadingInterval)),t.placeholder&&!t.placeholder.file&&(t.placeholder.file={}),e.target.attributes.Id.value==o.TARGET_LARGE_IMG_PREVIEW?(t.$parent.controller.enlargedPreviewLoaded=!0,t.$parent.controller.isLoadingLargeImage=!1):t.placeholder.file.previewLoaded=!0),n.removeClass("imageDrag"),t.$parent.controller.proccessErrorOccurred=!1})}),n.bind("error",function processError(e){e.target.attributes.Id.value!=o.TARGET_LARGE_IMG_PREVIEW||t.$parent.controller.processErrorOccurred||t.$apply(function(){t.$parent.controller.proccessErrorOccurred=!0})}),t.hasPermission&&(n.bind("dragenter",processDragEnter),n.bind("dragover",processDragEnter),n.bind("dragleave",function processDragLeave(e){t.$apply(function(){n.removeClass("imageDrag")})}));(t.hasPermission||t.hasViewPermission)&&t.placeholder&&n.bind("click",function showExpandedPreview(){t.placeholder.file.previewUnavailable||t.placeholder.isDocumentExternal||t.$parent&&t.$parent.controller&&(t.$parent.controller.isLoadingLargeImage=!0,t.$parent.controller.showExpandedPreview(t.placeholder))});function processDragEnter(e){t.$apply(function(){n.addClass("imageDrag")})}}}}angular.module("app").constant("ELEMENTS",{TARGET_LARGE_IMG_PREVIEW:"largeImagePreview"}).directive("imageOnLoad",imageOnLoad),imageOnLoad.$inject=["ELEMENTS"]}()},function(e,t){!function(){"use strict";function browse(s,c,d,u,f,p,E,e,m,g){e.get();var h=g.getLabels();return{restrict:"C",scope:{data:"=placeholder"},link:function link(i,t,e){var l=jQuery(t[0]),n=l.siblings(":file");function handleInputFiles(e){for(var o=e.target.files,r=d.MAX_FILE_SIZE,a=0,t=0;t<o.length;t++)!function(n){var e=new FileReader;e.onload=function(e){var t;n.size<r?null!=i.data?function processFileUpload(o,n,r,a){r.data.fileUploadingText=h.UPLOADING+" "+o.name+" "+h.TO_LABEL+" "+r.data.name+d.THREE_PERIODS,u.checkForExistingContentDocument(r.data.file).then(function(e){r.$parent.controller.setFileUploadState(),E.clearFields(d.EXCEPTION_DATE_FIELDS);var t=e[1];f.uploadingToPlaceholder=r.data,s.uploadContentDocument(o,n,function(e){var n=r.data.status;r.data.status=g.getLabel(d.STATUS_IN_FILE),!0===e.isExternal?a&&a():m.createDocumentStorageMetadata(e.id,r.data.recordId,t,f.generateFileMetadata(r.data,o)).then(function(t){r.$parent.controller.selectedPlaceholder.newComment=u.getChatterStatusChangeComment(o.name,n,d.STATUS_IN_FILE),r.$parent.controller.addChatterComment(r.$parent.controller.selectedPlaceholder),m.savePlaceholderData(r.data.recordId,null,null).then(function(e){f.copyPlaceholderProperties(e[0],r.data),u.updatePlaceholderProperties(r.data,r.$parent.controller.buildImageURL,t),a&&a()})}).catch(function(e){r.data.uploadingFile=!1,f.uploadingToPlaceholder={}})},function(e,t,n){r.data.uploadingFile=!1,f.uploadingToPlaceholder={}},function(e){u.uploadProgress(r.data,e)})})}(n,e.target.result,i,function(){resetFileInput(l)}):(t=0===p.stagedFiles.length,u.createFileStagingPlaceholder(n,e.target.result,i,function(){i.$parent.vm.postScreenreaderAlert(i.$parent.vm.labels.SUCCESSFUL_FILE_UPLOAD,"file-new-success-browse",!1,i.$parent.vm.FILE_STAGING_ALERT_ID),++a===o.length&&resetFileInput(l),i.$parent.vm.modal&&(t&&i.$parent.vm.modal.firstFocusable().focus(),i.$parent.vm.modal.refreshFocusables())})):c.dispatchErrorEvent("",h.INDIVIDUAL_MAX_FILE_SIZE_ERROR)},e.readAsDataURL(n)}(o[t])}l.unbind("click"),l.click(function(e){n.trigger("click")}),n.unbind(d.CHANGE_EVENT),n.bind(d.CHANGE_EVENT,function processChange(e){"addNewFile"===t[0].id?i.$parent.vm.toggleRightNav(i.$parent.vm.fileStaging).then(function(){handleInputFiles(e)}):handleInputFiles(e)})}};function resetFileInput(e){(d.IS_IE&&d.IS_IE<10?e:e.siblings(":file")).val(null)}}angular.module("app").directive("uniBrowse",browse),browse.$inject=["uploadService","dataService","CONSTANTS","commonService","placeholderService","fileStagingService","ssfbService","config","universalDocManRemotingService","labels"]}()},function(e,t){!function(){"use strict";function stageDrop(i,l,t,s,c,e){var d=e.getLabels();return{restrict:"C",scope:{},link:function link(r,a,e){function processDragOverOrEnter(e){return e.type===i.DRAG_ENTER_EVENT||e.type===i.DRAG_OVER_EVENT?(s.draggingFromRightNav||a.addClass("stageDragged"),null!=r.$parent.vm.disableDraggingPromise&&(t.cancel(r.$parent.vm.disableDraggingPromise),r.$parent.vm.disableDraggingPromise=null)):e.type===i.DRAG_LEAVE_EVENT&&a.removeClass("stageDragged"),e&&(e.preventDefault&&e.preventDefault(),e.stopPropagation),!1}function validateFiles(e){if(!s.allowedFileExtensions||0===s.allowedFileExtensions.length||""===s.allowedFileExtensions)return e;for(var t=[],n=[],o=0;o<e.length;o++)!function hasAllowedExtension(e){return e=e.name.substr(e.name.lastIndexOf(".")+1).toLowerCase(),-1!==s.allowedFileExtensions.indexOf(e)}(e[o])?t.push(e[o].name):n.push(e[o]);return 0<t.length&&c.dispatchErrorEvent("",d.INVALID_FILE_EXTENSIONS_PART_1+" ",null,d.INVALID_FILE_EXTENSIONS_PART_2+" "+t.join(", ")+"\n"+d.VALID_FILE_EXTENSIONS+s.allowedFileExtensions.join(", ")),n}a.bind(i.DRAG_OVER_EVENT,processDragOverOrEnter),a.bind(i.DRAG_ENTER_EVENT,processDragOverOrEnter),a.bind(i.DRAG_LEAVE_EVENT,processDragOverOrEnter),a.bind(i.DROP_EVENT,function processDrop(e){null!=e&&e.preventDefault(),s.draggingFromRightNav=!1,a.removeClass("stageDragged"),r.$parent.vm.draggingFiles=!1;var t=e.target.files;if((t=e.type===i.DROP_EVENT?l.getDataTransfer(e).files:t).length<=i.MAX_NUMBER_DRAGGED_FILES){if(0<(t=validateFiles(t)).length)for(var n=i.MAX_FILE_SIZE,o=0;o<t.length;o++)!function(t){var e=new FileReader;e.onload=function(e){t.size<n?l.createFileStagingPlaceholder(t,e.target.result,r):c.dispatchErrorEvent("",d.INDIVIDUAL_MAX_FILE_SIZE_ERROR)},e.readAsDataURL(t)}(t[o])}else c.dispatchErrorEvent("",d.MAX_NUMBER_DRAGGED_FILES_ERROR)})}}}angular.module("app").directive("uniStageDrop",stageDrop),stageDrop.$inject=["CONSTANTS","commonService","$interval","$rootScope","dataService","labels"]}()},function(e,t){!function(){"use strict";function rightClick(e,t,n){return{restrict:"A",scope:{controller:"=controller",data:"=placeholder",method:"&rightClick"},link:function link(t,e,n,o){jQuery(e[0]).bind("contextmenu",function(e){t.$apply(function(){e.preventDefault(),t.controller.rightClickedPlaceholder=t.data,t.controller.showContextMenu=!0,t.method()(e,t.data)})})}}}angular.module("app").constant("RIGHT_CLICK_CONSTANTS",{MENU_SELECTOR:"#placeholderContextMenu",PARENT_SELECTOR:"#docmanapp"}).directive("rightClick",rightClick),rightClick.$inject=["RIGHT_CLICK_CONSTANTS","PERMISSIONS","permissionService"]}()},function(e,t){!function(){"use strict";function addFile(l,a,s,e,c,d,u,t,f,o,n){t.get();var p=n.getLabels();return{restrict:"C",scope:{placeholder:"=placeholder"},link:function link(r,e,t){var e=jQuery(e[0]),n=e.siblings(":file");e.unbind("click"),e.click(function(e){(o.hasEditAfterApprovalPermission("UNI_EDIT_DETAILS",r.placeholder.status)||o.hasRequiredViewerAccess(r.placeholder))&&n.trigger("click")}),n.unbind(s.CHANGE_EVENT),n.bind(s.CHANGE_EVENT,function processChange(t){var n=s.MAX_FILE_SIZE,o=t.target.files[0],e=new FileReader;e.onload=function(e){o.size<n?function uploadFile(o,r,n,a){o.$parent.controller.setFileUploadState(),u.clearFields(s.EXCEPTION_DATE_FIELDS);var i=function getSelectedPlaceholder(e){e=(void 0===e.placeholder?e.$parent:e).placeholder;return e}(o);i.fileUploadingText=p.UPLOADING+" "+r.name+" "+p.TO_LABEL+" "+i.name+s.THREE_PERIODS,d.uploadingToPlaceholder=i,c.checkForExistingContentDocument(i.file).then(function(e){var t=e[1];l.uploadContentDocument(r,n,function(e){var n=i.status;!0===e.isExternal?a&&a():f.createDocumentStorageMetadata(e.id,i.recordId,t,d.generateFileMetadata(i,r)).then(function(t){i.newComment=c.getChatterStatusChangeComment(r.name,n,s.STATUS_IN_FILE),o.$parent.controller.addChatterComment(i),f.savePlaceholderData(i.recordId,null,null).then(function(e){d.copyPlaceholderProperties(e[0],i),c.updatePlaceholderProperties(i,o.$parent.controller.buildImageURL,t),i.isDocumentExternal&&(i.isDocumentExternal=!1,i.documentStorageType=null),o.$parent.controller.postScreenreaderAlert(p.SUCCESSFUL_FILE_UPLOAD,"file-new-success-addFile",!0),a&&a()})})},function(e,t,n){e===s.CANCEL_OVERWRITE?a&&a():o.$apply(function(){i.uploadingFile=!1,d.uploadingToPlaceholder={}})},function(e){o.$apply(function(){c.uploadProgress(i,e)})})})}(r,o,e.target.result,function(){!function resetFileInput(e){e.val(null)}(jQuery(t.target))}):a.dispatchErrorEvent("",o.name+" "+p.INDIVIDUAL_MAX_FILE_SIZE_ERROR)},o&&e.readAsDataURL(o)})}}}angular.module("app").directive("uniAddFile",addFile),addFile.$inject=["uploadService","dataService","CONSTANTS","$rootScope","commonService","placeholderService","ssfbService","config","universalDocManRemotingService","permissionService","labels"]}()},function(e,t){!function(){"use strict";function uniHasPermission(r,a,i,l){return{restrict:"A",link:function link(e,t,n){this.configValues=l.get();var o=n.uniHasPermission.trim(),n=this.configValues.contextObjectType,n=a.hasPermission(n,o);function updateElements(e){if(e)switch(t.prop("nodeName")){case"TEXTAREA":t.attr("readonly",!1);break;case"BUTTON":t.prop("disabled",!1),t.removeClass("disabled");break;case"DIV":jQuery(t).show();break;case"A":t.prop("disabled",!1),t.removeClass("disabled");break;case"SPAN":t.removeClass("hidden")}else switch(t.prop("nodeName")){case"TEXTAREA":t.attr("readonly",!0);break;case"BUTTON":t.prop("disabled",!0),t.addClass("disabled");break;case"DIV":jQuery(t).hide();break;case"A":t.prop("disabled",!0),t.addClass("disabled");break;case"SPAN":t.addClass("hidden")}}r.$on(i.CHANGED_PRODUCT_PACKAGE_PRODUCT,function(e,t){updateElements(a.hasPermission(t,o))}),updateElements(n)}}}angular.module("app").directive("uniHasPermission",uniHasPermission),uniHasPermission.$inject=["$rootScope","permissionService","CONSTANTS","config"]}()},function(e,t){!function(){"use strict";angular.module("app").directive("clickOutside",clickOutside);var s="clickOutside";function clickOutside(i,l){return{restrict:"A",link:function link(t,n,e,o){function bD(e){n[0]!==e.target&&0===r.find(e.target).length&&t.$apply(function(){a(t,{})})}var r=jQuery(n[0]),a=l(e[s]);i.on("click",bD),t.$on("$destroy",function(){i.off("click",bD)})}}}clickOutside.$inject=["$document","$parse"]}()},function(e,t){!function(){"use strict";angular.module("app").directive("errorHandler",errorHandler);function errorHandler(o,r){return{restrict:"C",link:function link(t,e,n){jQuery(window).on(o.ERROR_EVENT,function(e){t.$apply(function(){t.controller.toastType=r.ERROR,t.controller.toast=e.message,t.controller.toastSubHeading=e.toastSubHeading})})}}}errorHandler.$inject=["CONSTANTS","TOAST_TYPES"]}()},function(e,t){function infiniteScroll(p,E,m,g){return{restrict:"A",scope:{infiniteScroll:"&",infiniteScrollContainer:"=",infiniteScrollDistance:"=",infiniteScrollDisabled:"=",infiniteScrollUseDocumentBottom:"=",infiniteScrollListenForEvent:"@"},link:function link(n,o,e){var r=angular.element(E),a=null,i=null,l=null,s=null,t=!0,c=!1,d=null,u=!1;function height(e){e=e[0]||e;return isNaN(e.offsetHeight)?e.document.documentElement.clientHeight:e.offsetHeight}function pageYOffset(e){e=e[0]||e;return isNaN(window.pageYOffset)?e.document.documentElement.scrollTop:e.ownerDocument.defaultView.pageYOffset}function offsetTop(e){if(e[0].getBoundingClientRect&&!e.css("none"))return e[0].getBoundingClientRect().top+pageYOffset(e)}function defaultHandler(){var e,t=s===r?(e=height(s)+pageYOffset(s[0].document.documentElement),offsetTop(o)+height(o)):(e=height(s),void(t=0)!==offsetTop(s)&&(t=offsetTop(s)),offsetTop(o)-t+height(o));(t=c?height((o[0].ownerDocument||o[0].document).documentElement):t)-e<=height(s)*a+1?(l=!0,i&&(n.$$phase||p.$$phase?n.infiniteScroll():n.$apply(n.infiniteScroll))):(u&&m.cancel(u),l=!1)}var f=null!=g?function throttle(n,o){var r=null,a=0;function later(){return a=(new Date).getTime(),m.cancel(r),r=null,n.call()}return function throttled(){var e=(new Date).getTime(),t=o-(e-a);t<=0?(m.cancel(r),r=null,a=e,n.call()):r=r||m(later,t,1)}}(defaultHandler,g):defaultHandler;function handleInfiniteScrollDistance(e){a=parseFloat(e)||0}function handleInfiniteScrollDisabled(e){(i=!e)&&l&&(l=!1,f())}function handleInfiniteScrollUseDocumentBottom(e){c=e}function changeContainer(e){null!=s&&s.unbind("scroll",f),null!=(s=e)&&s.bind("scroll",f)}n.$on("$destroy",function handleDestroy(){s.unbind("scroll",f),null!=d&&(d(),d=null),u&&m.cancel(u)}),n.$watch("infiniteScrollDistance",handleInfiniteScrollDistance),handleInfiniteScrollDistance(n.infiniteScrollDistance),n.$watch("infiniteScrollDisabled",handleInfiniteScrollDisabled),handleInfiniteScrollDisabled(n.infiniteScrollDisabled),n.$watch("infiniteScrollUseDocumentBottom",handleInfiniteScrollUseDocumentBottom),handleInfiniteScrollUseDocumentBottom(n.infiniteScrollUseDocumentBottom),changeContainer(r),n.infiniteScrollListenForEvent&&(d=p.$on(n.infiniteScrollListenForEvent,f));function handleInfiniteScrollContainer(e){if(null!=e&&0!==e.length){e=e.nodeType&&1===e.nodeType?angular.element(e):"function"==typeof e.append?angular.element(e[e.length-1]):"string"==typeof e?angular.element(document.querySelector(e)):e;if(null==e)throw new Error("invalid infinite-scroll-container attribute.");changeContainer(e)}}n.$watch("infiniteScrollContainer",handleInfiniteScrollContainer),handleInfiniteScrollContainer(n.infiniteScrollContainer||[]),null!=e.infiniteScrollParent&&changeContainer(angular.element(o.parent()));null!=e.infiniteScrollImmediateCheck&&(t=n.$eval(e.infiniteScrollImmediateCheck));return u=m(function intervalCheck(){return t&&f(),m.cancel(u)})}}}angular.module("app").directive("infiniteScroll",infiniteScroll).value("THROTTLE_MILLISECONDS",null),infiniteScroll.$inject=["$rootScope","$window","$interval","THROTTLE_MILLISECONDS"]},function(e,t){!function(){"use strict";angular.module("app").directive("ndsDateValueDocMan",function ndsDateValue(){return{restrict:"A",scope:{ndsDateValueDocMan:"="},link:function(n,e){e[0].value=n.ndsDateValueDocMan,e.bind("valueChange",function(t){n.$apply(function(){var e=t.originalEvent.detail;n.ndsDateValueDocMan=null!==e?e:null})})}}})}()},function(e,t){!function(){"use strict";angular.module("app").directive("ndsDatetimeValue",function ndsDatetimeValue(){return{restrict:"A",scope:{ndsDatetimeValue:"="},link:function(n,e){e[0].value=n.ndsDatetimeValue,e.bind("valueChange",function(t){n.$apply(function(){var e=t.originalEvent.detail;n.ndsDatetimeValue=null!==e?e:null})})}}})}()},function(e,t){!function(){"use strict";angular.module("app").directive("resizer",function(){return{restrict:"A",scope:{columnName:"<columnName"},link:function(n,t){var o,r,a,i="Status"===n.columnName?188:62,l=800,s=document.body,c=t[0].children[0];function handleMousedown(e){e.stopPropagation(),a=t[0].parentNode.offsetWidth,o=e.clientX,s.addEventListener("mousemove",handleMovement,!0),s.addEventListener("mouseup",handleMouseup,!0)}function handleMovement(e){e.stopPropagation();var e=e.clientX,t=e-o,t=r?r+t:t;isValidWidth(a+t)&&transformResizeHandle(c,t),o=e,r=t}function handleMouseup(e){e.stopPropagation();e=adjustForLimits((a=t[0].parentNode.offsetWidth)+r);s.removeEventListener("mousemove",handleMovement,!0),s.removeEventListener("mouseup",handleMouseup,!0),resetHandle(c),n.emitResizeEvent(n.columnName,e),r=null}function isValidWidth(e){return!(e<i||l<e)}function adjustForLimits(e){return e<i?i:l<e?l:e}function transformResizeHandle(e,t){e.setAttribute("style","will-change: transform; transform: translateX("+t+"px)")}function resetHandle(e){e.setAttribute("style","will-change: transform;")}n.isValidWidth=isValidWidth,n.adjustForLimits=adjustForLimits,n.transformResizeHandle=transformResizeHandle,n.resetHandle=resetHandle,n.emitResizeEvent=function emitResizeEvent(e,t){void 0!==e&&void 0!==t&&(e={columnName:e,columnWidth:t},n.$emit("resizeColumn",e))},n.handleMousedown=handleMousedown,n.handleMovement=handleMovement,n.handleMouseup=handleMouseup,c.addEventListener("mousedown",handleMousedown,!1)}}})}()},function(e,t,n){"use strict";n.r(t)},function(e,t,n){"use strict";n.r(t)},function(e,t,n){"use strict";n.r(t)},function(e,t,n){"use strict";n.r(t)},function(e,t,n){"use strict";n.r(t)},function(e,t,n){"use strict";n.r(t)},function(e,t,n){"use strict";n.r(t)}]);