(()=>{var e={1361:(e,t,n)=>{"use strict";n.r(t)},8932:(e,t,n)=>{"use strict";n.r(t)},5850:(e,t,n)=>{"use strict";n.r(t)},7003:(e,t,n)=>{"use strict";n.r(t)},5521:(e,t,n)=>{"use strict";n.r(t)},2729:(e,t,n)=>{"use strict";n.r(t)},6879:(e,t,n)=>{"use strict";n.r(t)},2780:()=>{!function(){"use strict";angular.module("app").constant("Modal",(function Modal(e,t){var n=this;function clearListeners(){n.listeners.forEach((e=>{n.modalRoot.removeEventListener(e[0],e[1])})),n.listeners=[]}function elementIsChildOf(e,t){for(var n=document.querySelectorAll(t.join(",")),o=e.parentElement;"HTML"!==o.tagName;){for(var r=0;r<n.length;r++)if(n[r].isEqualNode(o))return!0;o=o.parentElement}return!1}function elementIsNdsRichTextField(e){return"IFRAME"===e.tagName&&e.getAttribute("title").indexOf("Rich Text Editor")>-1}n.isIgnoringKeyPresses=!1,n.manualFocusables=[],n.escapeModal=null,n.focusables=[],n.listeners=[],n.modalRootIdentifier=e,n.modalRoot=null,n.origin=t,n.activeElementIsFirstFocusable=function activeElementIsFirstFocusable(){return document.activeElement.isEqualNode(n.firstFocusable())},n.activeElementIsLastFocusable=function activeElementIsLastFocusable(){return document.activeElement.isEqualNode(n.lastFocusable())},n.addListener=function addListener(e,t){n.modalRoot&&(n.modalRoot.addEventListener(e,t),n.listeners.push([e,t]))},n.clearListeners=clearListeners,n.elementIsDisabled=function elementIsDisabled(e){return!!(e.hasAttribute("disabled")||e.hasAttribute("aria-disabled")&&"true"===e.getAttribute("aria-disabled"))},n.firstFocusable=function firstFocusable(){return n.focusables.length>0?n.focusables[0]:null},n.focusedFocusable=function focusedFocusable(){for(var e=0;e<n.focusables.length;e++)if(document.activeElement===n.focusables[e])return[n.focusables[e],e];return[null,-1]},n.isFocusable=function isFocusable(e){for(var t=0;t<n.focusables.length;t++)if(n.focusables[t].isEqualNode(e))return!0;return!1},n.lastFocusable=function lastFocusable(){return n.focusables.length>0?n.focusables[n.focusables.length-1]:null},n.refreshFocusables=function refreshFocusables(){var e,t;return n.focusables=[],null!=n.manualFocusables&&n.manualFocusables.length>0?(e=n.modalRoot.querySelectorAll(n.manualFocusables.join(",")),t=[]):(e=n.modalRoot.querySelectorAll(function getDefaultFocusables(){for(var e=["a","button","textarea",'input[type="text"]','input[type="radio"]','input[type="checkbox"]',"select","*[tabindex]",'*[role="option"]','*[role="button"]'],t=0;t<e.length;t++)e[t]=`${e[t]}:not([disabled]):not([aria-disabled="true"]):not([aria-hidden="true"]):not([hidden]):not([style*="hidden"]):not([tabindex="-1"])`;return e}().join(",")),t=n.modalRoot.querySelectorAll(["nds-input-text[hidden] input"].join(","))),e.forEach((e=>{for(var o=!1,r=0;r<t.length&&!o;r++)o=t[r].isEqualNode(e);e.tabIndex>=0&&!o&&n.focusables.push(e)})),n},n.focus=function focus(){if(n.modalRoot=document.getElementById(n.modalRootIdentifier),n.modalRoot){n.addListener("focusin",(e=>{n.isFocusable(document.activeElement)||function elementShouldHandleInternalFocus(e){return elementIsChildOf(e,["NDS-INPUT-PICKLIST","NDS-CALENDAR","NDS-INPUT-DUAL-LISTBOX",'ul[role="listbox"]'])}(document.activeElement)||n.firstFocusable().focus()})),n.addListener("keydown",(e=>{var t="Tab"===e.key||9===e.keyCode,o="Escape"===e.key||27===e.keyCode;t&&n.refreshFocusables(),function elementShouldHandleKeydown(e){return elementIsChildOf(e,["NDS-CALENDAR","NDS-INPUT-DATEPICKER","NDS-INPUT-TIME","NDS-INPUT-PICKLIST","NDS-INPUT-DUAL-LISTBOX",'ul[role="listbox"]'])||elementIsNdsRichTextField(e)}(e.target)||elementIsNdsRichTextField(n.getNextFocusable())||(n.isIgnoringKeyPresses?(e.preventDefault(),e.stopPropagation()):t?(e.shiftKey?n.focusPrevFocusable():n.focusNextFocusable(),e.preventDefault(),e.stopPropagation()):o&&null!=n.escapeModal&&(n.escapeModal(),e.preventDefault(),e.stopPropagation()))})),n.refreshFocusables();try{n.firstFocusable().focus()}catch(e){console.warn("Error focusing first focusable element")}}},n.focusNextFocusable=function focusNextFocusable(){var e=n.getNextFocusable();null!=e&&e.focus()},n.focusPrevFocusable=function focusPrevFocusable(){var e=n.getPrevFocusable();null!=e&&e.focus()},n.getNextFocusable=function getNextFocusable(){for(var e=n.focusedFocusable()[1],t=e+1;t!=e;){if(t==n.focusables.length&&(t=0),!n.elementIsDisabled(n.focusables[t]))return n.focusables[t];t++}return null},n.getPrevFocusable=function getPrevFocusable(){for(var e=n.focusedFocusable()[1],t=e-1;t!=e;){if(t<0&&(t=n.focusables.length-1),!n.elementIsDisabled(n.focusables[t]))return n.focusables[t];t--}return null},n.hasListener=function hasListener(e){return n.listeners.filter((t=>t[0]===e)).length>0},n.ignoreKeyPresses=function ignoreKeyPresses(){return n.isIgnoringKeyPresses=!0,n},n.allowKeyPresses=function allowKeyPresses(){return n.isIgnoringKeyPresses=!1,n},n.setFocusables=function setFocusables(e){return n.manualFocusables=e,n},n.setModalEscape=function setModalEscape(e){return n.escapeModal=e,n},n.unfocus=function unfocus(){clearListeners(),n.origin.focus(),n.modalRoot=null,n.escapeModal=null}}))}()},79:()=>{!function(){"use strict";angular.module("docman.decoratorServices",[])}()},3424:()=>{!function(){"use strict";angular.module("docman.decorators",["docman.decoratorServices"])}()},4072:()=>{!function(){"use strict";function actionService(e,t,n,o,r,a){n=n.get();var i=[],l={};return{addAction:function addAction(e){i.push(e)},getActions:function getActions(){return i},executeAction:function executeAction(e,o){var r=t.defer();if(null==l.component){var a={};a.recordId=n.contextId,a.showToast=showToast,a.destroyAction=destroyAction,$Lightning.createComponent(e.componentName,a,"docmanaction",(function(e,t,n){"SUCCESS"===t?e.invoke(o)?(l.component=e,l.destroyComponent=e.destroy.bind(e)):e.destroy():r.reject(t,n)}))}return r.promise},destroyAction};function destroyAction(){l.destroyComponent(),l.component=null}function showToast(t,n){var i={};switch(i.body=n,t){case"success":i.type=r.SUCCESS,i.theme=a.THEME_SUCCESS;break;case"warning":i.type=r.WARNING,i.theme=a.THEME_WARNING;break;case"error":i.type=r.ERROR,i.theme=a.THEME_ERROR;break;default:throw"unknown toast type: "+t}e.$broadcast(o.SET_TOAST,i)}}angular.module("docman.decoratorServices").service("actionService",actionService),actionService.$inject=["$rootScope","$q","config","CONSTANTS","TOAST_TYPES","ALERT_DIALOG"]}()},3804:()=>{!function(){"use strict";angular.module("docman.decoratorServices").service("buttonService",(function buttonService(){var e=[],t=1e3,n="disablePointerEvents";return{getButtonDefinitions:function getButtonDefinitions(){return e},addButton:function addButton(e){addButtons([e])},addButtons,getButton:function getButton(t){for(var n in e){var o=e[n];if(o.id.toLowerCase()===t.toLowerCase())return o}return null},getButtonByDisplayLabel:function getButtonByDisplayLabel(t){for(var n in e){var o=e[n];if(o.displayLabel.toLowerCase()===t.toLowerCase())return o}return null}};function addButtons(t){for(var n=0;n<t.length;n++)setDefaultDisplayOrder(t[n]),setDefaultCssClassOnDisabledButton(t[n]);e=e.concat(t)}function setDefaultDisplayOrder(e){null!==e.displayOrder&&void 0!==e.displayOrder||(e.displayOrder=t)}function setDefaultCssClassOnDisabledButton(e){e.isDisabled&&(null===e.cssClass||void 0===e.cssClass||""===e.cssClass.trim()?e.cssClass=n:e.cssClass=e.cssClass+" "+n)}}))}()},5477:()=>{!function(){"use strict";function filterService(e){var t=[];return{getFilters:function alphaOrderedFilters(){return t.sort((function(e,t){return function alphaSort(e,t){var n=e&&e.displayLabel?e.displayLabel.toUpperCase():"",o=t&&t.displayLabel?t.displayLabel.toUpperCase():"";return n<o?-1:n>o?1:0}(e,t)}))},getFilter,addFilter,addFilters:function addFilters(e){e.forEach((function(e){addFilter(e)}))},activateFilter,deactivateAllFilters,getActiveFilter:function getActiveFilter(){for(var e in t){var n=t[e];if(n.isActive)return n}}};function addFilter(e){void 0===e.onClick&&(e.onClick=selectFilter),t=t.concat([e])}function getFilter(e){for(var n in t){var o=t[n];if(o.id===e)return o}return null}function activateFilter(e){getFilter(e).isActive=!0}function deactivateAllFilters(){!function alterFilters(e,n){t.forEach((function(t){t[e]=n}))}("isActive",!1)}function selectFilter(t,n){e.uncheckAllPlaceholders(),jQuery("#accordion .collapse.in").collapse("hide"),deactivateAllFilters(),n(),activateFilter(t)}}angular.module("docman.decoratorServices").service("filterService",filterService),filterService.$inject=["placeholderService"]}()},7300:()=>{!function(){"use strict";function addFile(e,t,n,o,r,a,i,l,s,c,d){l.get();var u=d.getLabels();return{restrict:"C",scope:{placeholder:"=placeholder"},link:function link(o,l,d){var f=jQuery(l[0]),p=f.siblings(":file");f.unbind("click"),f.click((function(e){(c.hasEditAfterApprovalPermission("UNI_EDIT_DETAILS",o.placeholder.status)||c.hasRequiredViewerAccess(o.placeholder))&&p.trigger("click")})),p.unbind(n.CHANGE_EVENT),p.bind(n.CHANGE_EVENT,(function processChange(l){var c=n.MAX_FILE_SIZE,d=l.target.files[0],f=new FileReader;f.onload=function(f){d.size<c?function uploadFile(t,o,l,c){t.$parent.controller.setFileUploadState(),i.clearFields(n.EXCEPTION_DATE_FIELDS);var d=function getSelectedPlaceholder(e){return void 0===e.placeholder?e.$parent.placeholder:e.placeholder}(t);d.fileUploadingText=u.UPLOADING+" "+o.name+" "+u.TO_LABEL+" "+d.name+n.THREE_PERIODS,a.uploadingToPlaceholder=d,r.checkForExistingContentDocument(d.file).then((function(i){var f=i[1];e.uploadContentDocument(o,l,(function(e){var i=d.status;!0!==e.isExternal?s.createDocumentStorageMetadata(e.id,d.recordId,f,a.generateFileMetadata(d,o)).then((function(e){d.newComment=r.getChatterStatusChangeComment(o.name,i,n.STATUS_IN_FILE),t.$parent.controller.addChatterComment(d),s.savePlaceholderData(d.recordId,null,null).then((function(n){a.copyPlaceholderProperties(n[0],d),r.updatePlaceholderProperties(d,t.$parent.controller.buildImageURL,e),d.isDocumentExternal&&(d.isDocumentExternal=!1,d.documentStorageType=null),t.$parent.controller.postScreenreaderAlert(u.SUCCESSFUL_FILE_UPLOAD,"file-new-success-addFile",!0),c&&c()}))})):c&&c()}),(function(e,o,r){e===n.CANCEL_OVERWRITE?c&&c():t.$apply((function(){d.uploadingFile=!1,a.uploadingToPlaceholder={}}))}),(function(e){t.$apply((function(){r.uploadProgress(d,e)}))}))}))}(o,d,f.target.result,(function(){!function resetFileInput(e){e.val(null)}(jQuery(l.target))})):t.dispatchErrorEvent("",d.name+" "+u.INDIVIDUAL_MAX_FILE_SIZE_ERROR)},d&&f.readAsDataURL(d)}))}}}angular.module("app").directive("uniAddFile",addFile),addFile.$inject=["uploadService","dataService","CONSTANTS","$rootScope","commonService","placeholderService","ssfbService","config","universalDocManRemotingService","permissionService","labels"]}()},5375:()=>{!function(){"use strict";function browse(e,t,n,o,r,a,i,l,s,c){l.get();var d=c.getLabels();return{restrict:"C",scope:{data:"=placeholder"},link:function link(e,r,i){var l=jQuery(r[0]),s=l.siblings(":file");function handleInputFiles(r){for(var i=r.target.files,s=n.MAX_FILE_SIZE,c=0,u=0;u<i.length;u++)!function(n){var r=new FileReader;r.onload=function(r){if(n.size<s)if(null!=e.data)processFileUpload(n,r.target.result,e,(function(){resetFileInput(l)}));else{var u=0===a.stagedFiles.length;o.createFileStagingPlaceholder(n,r.target.result,e,(function(){e.$parent.vm.postScreenreaderAlert(e.$parent.vm.labels.SUCCESSFUL_FILE_UPLOAD,"file-new-success-browse",!1,e.$parent.vm.FILE_STAGING_ALERT_ID),++c===i.length&&resetFileInput(l),e.$parent.vm.modal&&(u&&e.$parent.vm.modal.firstFocusable().focus(),e.$parent.vm.modal.refreshFocusables())}))}else t.dispatchErrorEvent("",d.INDIVIDUAL_MAX_FILE_SIZE_ERROR)},r.readAsDataURL(n)}(i[u])}l.unbind("click"),l.click((function(e){s.trigger("click")})),s.unbind(n.CHANGE_EVENT),s.bind(n.CHANGE_EVENT,(function processChange(t){"addNewFile"===r[0].id?e.$parent.vm.toggleRightNav(e.$parent.vm.fileStaging).then((function(){handleInputFiles(t)})):handleInputFiles(t)}))}};function processFileUpload(t,a,l,u){l.data.fileUploadingText=d.UPLOADING+" "+t.name+" "+d.TO_LABEL+" "+l.data.name+n.THREE_PERIODS,o.checkForExistingContentDocument(l.data.file).then((function(d){l.$parent.controller.setFileUploadState(),i.clearFields(n.EXCEPTION_DATE_FIELDS);var f=d[1];r.uploadingToPlaceholder=l.data,e.uploadContentDocument(t,a,(function(e){var a=l.data.status;l.data.status=c.getLabel(n.STATUS_IN_FILE),!0!==e.isExternal?s.createDocumentStorageMetadata(e.id,l.data.recordId,f,r.generateFileMetadata(l.data,t)).then((function(e){l.$parent.controller.selectedPlaceholder.newComment=o.getChatterStatusChangeComment(t.name,a,n.STATUS_IN_FILE),l.$parent.controller.addChatterComment(l.$parent.controller.selectedPlaceholder),s.savePlaceholderData(l.data.recordId,null,null).then((function(t){r.copyPlaceholderProperties(t[0],l.data),o.updatePlaceholderProperties(l.data,l.$parent.controller.buildImageURL,e),u&&u()}))})).catch((function(e){l.data.uploadingFile=!1,r.uploadingToPlaceholder={}})):u&&u()}),(function(e,t,n){l.data.uploadingFile=!1,r.uploadingToPlaceholder={}}),(function(e){o.uploadProgress(l.data,e)}))}))}function resetFileInput(e){n.IS_IE&&n.IS_IE<10?e.val(null):e.siblings(":file").val(null)}}angular.module("app").directive("uniBrowse",browse),browse.$inject=["uploadService","dataService","CONSTANTS","commonService","placeholderService","fileStagingService","ssfbService","config","universalDocManRemotingService","labels"]}()},4881:()=>{!function(){"use strict";angular.module("app").directive("clickOutside",clickOutside);var e="clickOutside";function clickOutside(t,n){return{restrict:"A",link:function link(o,r,a,i){var l=jQuery(r[0]),s=n(a[e]),handler=function(e){r[0]!==e.target&&0===l.find(e.target).length&&o.$apply((function(){s(o,{})}))};t.on("click",handler),o.$on("$destroy",(function(){t.off("click",handler)}))}}}clickOutside.$inject=["$document","$parse"]}()},6387:()=>{!function(){"use strict";function draggable(e){return{restrict:"A",scope:{account:"=",placeholder:"=",hasPermission:"="},link:function link(t,n,o){t.hasPermission&&(n[0].draggable=!0,n.bind("dragstart",(function processDragEvent(n){e.draggingFromRightNav=!0;var o=t.placeholder;t.account&&(o.accountId=t.account.accountId,o.relationship=t.account.name);(function getDataTransfer(e){return e.dataTransfer||e.originalEvent.dataTransfer})(n).setData("text",JSON.stringify(o))})))}}}angular.module("app").directive("draggable",draggable),draggable.$inject=["$rootScope"]}()},9795:()=>{!function(){"use strict";function fileDropzone(e,t,n,o,r,a,i,l,s,c,d,u,f,p){var E=p.getLabels();return{restrict:"C",scope:{rightnavcontroller:"=rightnavcontroller",hasPermission:"="},link:function link(u,f,p){this.configValues=d.get(),u.hasPermission&&(f.bind(n.DRAG_OVER_EVENT,processDragOverOrEnter),f.bind(n.DRAG_ENTER_EVENT,processDragOverOrEnter),f.bind(n.DROP_EVENT,processDropEvent),f.bind(n.DRAG_LEAVE_EVENT,processDragOverOrEnter));function getDataTransfer(e){return e.dataTransfer||e.originalEvent.dataTransfer}function processDragOverOrEnter(e){var t=jQuery(e.target);return"dragleave"==e.type?t.removeClass("fileHover"):t.addClass("fileHover"),u.hasPermission?(e.type===n.DRAG_ENTER_EVENT||e.type===n.DRAG_OVER_EVENT?(i.draggingFromRightNav||f.addClass(n.STAGE_DRAGGED_CLASS),u&&u.$parent&&u.$parent.vm&&null!=u.$parent.vm.disableDraggingPromise&&($interval.cancel(u.$parent.vm.disableDraggingPromise),u.$parent.vm.disableDraggingPromise=null)):e.type===n.DRAG_LEAVE_EVENT&&f.removeClass(n.STAGE_DRAGGED_CLASS),e&&(e.preventDefault&&e.preventDefault(),e.stopPropagation)||(getDataTransfer(e).effectAllowed=n.COPY_EFFECT),!1):(f.unbind(n.DRAG_OVER_EVENT,processDragOverOrEnter),f.unbind(n.DRAG_ENTER_EVENT,processDragOverOrEnter),f.unbind(n.DROP_EVENT,processDropEvent),f.unbind(n.DRAG_LEAVE_EVENT,processDragOverOrEnter),!1)}function linkRelationshipDoc(e){var a,d={name:e.fileName,size:e.fileSize,type:e.mimeType};u.rightnavcontroller?a=u.rightnavcontroller:u.$parent.vm&&(a=u.$parent.vm),l.linkDocumentVersion(e.file.Id,u.$parent.placeholder.recordId,c.generateFileMetadata(u.$parent.placeholder,d),!0,!0===e.isDocumentExternal,e.file.Title,e.file.documentVersionId).then((function(d){var f=u.$parent.placeholder.status;u.$parent.placeholder.newComment=o.getChatterStatusChangeComment(e.file.Title,f,n.STATUS_IN_FILE),u.$parent.controller.addChatterComment(u.$parent.placeholder),e.isDocumentExternal?(u.$parent.placeholder.isDocumentExternal=e.isDocumentExternal,u.$parent.placeholder.documentStorageType=e.documentStorageType):(u.$parent.placeholder.isDocumentExternal=!1,u.$parent.placeholder.documentStorageType=null),a.rightNavDisplay!==a.collateral&&(e.category&&""!==e.category||function handleFileStagingDocDeletion(e){t.deletePlaceholder(e.recordId,(function(){u.$apply((function(){u.rightnavcontroller||(u.rightnavcontroller=u.$parent.vm),r.stagedFiles.forEach((function(t,n){if(t.recordId===e.recordId)return r.stagedFiles.remove(r.stagedFiles[n]),!1})),t.retrieveArchivedDocumentsWithAttachments((function(e){c.prepareForUrls(e).then((function(){i.archivedFiles=e}))}))}))}))}(e)),function updatePlaceholderFieldsEval(e,t){var n=s.defer();t.rightNavDisplay!=t.collateral&&t.rightNavDisplay!=t.relationship?n.resolve():l.updatePlaceholderFields(e.recordId,u.$parent.placeholder.recordId).then((function(){n.resolve()}));return n.promise}(e,a).then((function(){l.savePlaceholderData(u.$parent.placeholder.recordId,null,null).then((function(e){c.copyPlaceholderProperties(e[0],u.$parent.placeholder),o.updatePlaceholderProperties(u.$parent.placeholder,u.$parent.controller.buildImageURL,d)}))}))})).catch((function(e){u.$parent.placeholder.uploadingFile=!1}))}function getProgressBarData(e,t){u.$parent.placeholder.fileUploadingText=E.UPLOADING+" "+e+" "+E.TO_LABEL+" "+t+" "+n.THREE_PERIODS}function processDropEvent(r){u.$parent.controller.setFileUploadState(),a.clearFields(n.EXCEPTION_DATE_FIELDS);var s=new FileReader,d=getDataTransfer(r).files[0];if(!d)return function handleRightNavFileDrop(t){u.$parent.placeholder.file&&u.$parent.placeholder.file.Id?u.$apply((function(){e.shouldOverwrite().then((function(n){n&&(getProgressBarData(t.file.Title,u.$parent.placeholder.name),o.uploadProgress(u.$parent.placeholder,null,100),e.archiveExistingDocument(u.$parent.placeholder).then((function(){linkRelationshipDoc(t)})))}))})):(u.$apply((function(){getProgressBarData(t.file.Title,u.$parent.placeholder.name),o.uploadProgress(u.$parent.placeholder,null,100)})),linkRelationshipDoc(t))}(JSON.parse(getDataTransfer(r).getData(n.GETDATA))),!1;if(1===getDataTransfer(r).files.length){i.draggingFromRightNav=!1;var p=n.MAX_FILE_SIZE;f.removeClass("stageDragged"),null!=r&&r.preventDefault(),s.onload=function(r){d.size<p?function uploadFile(t,r,a){getProgressBarData(r.name,t.$parent.placeholder.name),c.uploadingToPlaceholder=t.$parent.placeholder,t.$parent.controller.postScreenreaderAlert(t.$parent.placeholder.fileUploadingText,"file-new-uploading-file",!0),o.checkForExistingContentDocument(t.$parent.placeholder.file).then((function(i){var s=i[1];e.uploadContentDocument(r,a,(function(e){var a=t.$parent.placeholder.status;e.isExternal&&!0===e.isExternal||(l.createDocumentStorageMetadata(e.id,t.$parent.placeholder.recordId,s,c.generateFileMetadata(t.$parent.placeholder,r)).then((function(e){l.savePlaceholderData(t.$parent.placeholder.recordId,null,null).then((function(i){c.copyPlaceholderProperties(i[0],t.$parent.placeholder),o.updatePlaceholderProperties(t.$parent.placeholder,t.$parent.controller.buildImageURL,e),t.$parent.placeholder.newComment=o.getChatterStatusChangeComment(r.name,a,n.STATUS_IN_FILE),t.$parent.controller.addChatterComment(t.$parent.placeholder)}))})).catch((function(e){t.$parent.placeholder.uploadingFile=!1,c.uploadingToPlaceholder={}})),t.$parent.placeholder.isDocumentExternal&&(t.$parent.placeholder.isDocumentExternal=!1,t.$parent.placeholder.documentStorageType=null))}),(function(e,o,r){e!==n.CANCEL_OVERWRITE&&(t.$parent.placeholder.uploadingFile=!1,c.uploadingToPlaceholder={})}),(function(e){t.$evalAsync((function(){o.uploadProgress(t.$parent.placeholder,e)}))}))}))}(u,d,r.target.result):(t.dispatchErrorEvent("",E.MAX_FILE_SIZE_ERROR),u.$apply((function(){f.children().removeClass("imageDrag")})))},s.readAsDataURL(d)}else t.dispatchErrorEvent("",E.MULTIPLE_UPLOAD_ERROR),u.$apply((function(){f.removeClass("stageDragged"),f.children().removeClass("imageDrag")}))}}}}angular.module("app").directive("fileDropzone",fileDropzone),fileDropzone.$inject=["uploadService","dataService","CONSTANTS","commonService","fileStagingService","ssfbService","$rootScope","universalDocManRemotingService","$q","placeholderService","config","ALERT_DIALOG","TOAST_TYPES","labels"]}()},6307:()=>{!function(){"use strict";angular.module("app").directive("errorHandler",errorHandler);function errorHandler(e,t){return{restrict:"C",link:function link(n,o,r){jQuery(window).on(e.ERROR_EVENT,(function(e){n.$apply((function(){n.controller.toastType=t.ERROR,n.controller.toast=e.message,n.controller.toastSubHeading=e.toastSubHeading}))}))}}}errorHandler.$inject=["CONSTANTS","TOAST_TYPES"]}()},2412:()=>{!function(){"use strict";function uniHasPermission(e,t,n,o){return{restrict:"A",link:function link(r,a,i){this.configValues=o.get();var l=i.uniHasPermission.trim(),s=this.configValues.contextObjectType,c=t.hasPermission(s,l);function updateElements(e){if(e)switch(a.prop("nodeName")){case"TEXTAREA":a.attr("readonly",!1);break;case"BUTTON":case"A":a.prop("disabled",!1),a.removeClass("disabled");break;case"DIV":jQuery(a).show();break;case"SPAN":a.removeClass("hidden")}else switch(a.prop("nodeName")){case"TEXTAREA":a.attr("readonly",!0);break;case"BUTTON":case"A":a.prop("disabled",!0),a.addClass("disabled");break;case"DIV":jQuery(a).hide();break;case"SPAN":a.addClass("hidden")}}e.$on(n.CHANGED_PRODUCT_PACKAGE_PRODUCT,(function(e,n){updateElements(t.hasPermission(n,l))})),updateElements(c)}}}angular.module("app").directive("uniHasPermission",uniHasPermission),uniHasPermission.$inject=["$rootScope","permissionService","CONSTANTS","config"]}()},5726:()=>{!function(){"use strict";function imageOnLoad(e){return{restrict:"C",scope:{placeholder:"=",hasPermission:"=",hasViewPermission:"=?"},link:function link(t,n,o){n.bind("load",(function processLoad(o){t.$apply((function(){t&&t.$parent&&(t.$parent.controller&&(o.target.attributes.Id.value==e.TARGET_LARGE_IMG_PREVIEW?clearInterval(t.$parent.controller.enlargedPreviewLoadingInterval):clearInterval(t.$parent.controller.imagePreviewLoadingInterval)),t.placeholder&&!t.placeholder.file&&(t.placeholder.file={}),o.target.attributes.Id.value==e.TARGET_LARGE_IMG_PREVIEW?(t.$parent.controller.enlargedPreviewLoaded=!0,t.$parent.controller.isLoadingLargeImage=!1):t.placeholder.file.previewLoaded=!0),n.removeClass("imageDrag"),t.$parent.controller.proccessErrorOccurred=!1}))})),n.bind("error",(function processError(n){n.target.attributes.Id.value==e.TARGET_LARGE_IMG_PREVIEW&&(t.$parent.controller.processErrorOccurred||t.$apply((function(){t.$parent.controller.proccessErrorOccurred=!0})))})),t.hasPermission&&(n.bind("dragenter",processDragEnter),n.bind("dragover",processDragEnter),n.bind("dragleave",(function processDragLeave(e){t.$apply((function(){n.removeClass("imageDrag")}))})));(t.hasPermission||t.hasViewPermission)&&t.placeholder&&n.bind("click",(function showExpandedPreview(){t.placeholder.file.previewUnavailable||t.placeholder.isDocumentExternal||t.$parent&&t.$parent.controller&&(t.$parent.controller.isLoadingLargeImage=!0,t.$parent.controller.showExpandedPreview(t.placeholder))}));function processDragEnter(e){t.$apply((function(){n.addClass("imageDrag")}))}}}}angular.module("app").constant("ELEMENTS",{TARGET_LARGE_IMG_PREVIEW:"largeImagePreview"}).directive("imageOnLoad",imageOnLoad),imageOnLoad.$inject=["ELEMENTS"]}()},9304:()=>{!function(){function infiniteScroll(e,t,n,o){return{restrict:"A",scope:{infiniteScroll:"&",infiniteScrollContainer:"=",infiniteScrollDistance:"=",infiniteScrollDisabled:"=",infiniteScrollUseDocumentBottom:"=",infiniteScrollListenForEvent:"@"},link:function link(r,a,i){var l=angular.element(t),s=null,c=null,d=null,u=null,f=!0,p=!1,E=null,m=!1;function height(e){var t=e[0]||e;return isNaN(t.offsetHeight)?t.document.documentElement.clientHeight:t.offsetHeight}function pageYOffset(e){var t=e[0]||e;return isNaN(window.pageYOffset)?t.document.documentElement.scrollTop:t.ownerDocument.defaultView.pageYOffset}function offsetTop(e){if(e[0].getBoundingClientRect&&!e.css("none"))return e[0].getBoundingClientRect().top+pageYOffset(e)}function defaultHandler(){var t,o;if(u===l)t=height(u)+pageYOffset(u[0].document.documentElement),o=offsetTop(a)+height(a);else{t=height(u);var i=0;void 0!==offsetTop(u)&&(i=offsetTop(u)),o=offsetTop(a)-i+height(a)}p&&(o=height((a[0].ownerDocument||a[0].document).documentElement)),o-t<=height(u)*s+1?(d=!0,c&&(r.$$phase||e.$$phase?r.infiniteScroll():r.$apply(r.infiniteScroll))):(m&&n.cancel(m),d=!1)}var g=null!=o?function throttle(e,t){var o=null,r=0;function later(){return r=(new Date).getTime(),n.cancel(o),o=null,e.call()}return function throttled(){var a=(new Date).getTime(),i=t-(a-r);i<=0?(n.cancel(o),o=null,r=a,e.call()):o||(o=n(later,i,1))}}(defaultHandler,o):defaultHandler;function handleInfiniteScrollDistance(e){s=parseFloat(e)||0}function handleInfiniteScrollDisabled(e){(c=!e)&&d&&(d=!1,g())}function handleInfiniteScrollUseDocumentBottom(e){p=e}function changeContainer(e){null!=u&&u.unbind("scroll",g),u=e,null!=e&&u.bind("scroll",g)}r.$on("$destroy",(function handleDestroy(){u.unbind("scroll",g),null!=E&&(E(),E=null);m&&n.cancel(m)})),r.$watch("infiniteScrollDistance",handleInfiniteScrollDistance),handleInfiniteScrollDistance(r.infiniteScrollDistance),r.$watch("infiniteScrollDisabled",handleInfiniteScrollDisabled),handleInfiniteScrollDisabled(r.infiniteScrollDisabled),r.$watch("infiniteScrollUseDocumentBottom",handleInfiniteScrollUseDocumentBottom),handleInfiniteScrollUseDocumentBottom(r.infiniteScrollUseDocumentBottom),changeContainer(l),r.infiniteScrollListenForEvent&&(E=e.$on(r.infiniteScrollListenForEvent,g));function handleInfiniteScrollContainer(e){if(null!=e&&0!==e.length){var t;if(null==(t=e.nodeType&&1===e.nodeType?angular.element(e):"function"==typeof e.append?angular.element(e[e.length-1]):"string"==typeof e?angular.element(document.querySelector(e)):e))throw new Error("invalid infinite-scroll-container attribute.");changeContainer(t)}}r.$watch("infiniteScrollContainer",handleInfiniteScrollContainer),handleInfiniteScrollContainer(r.infiniteScrollContainer||[]),null!=i.infiniteScrollParent&&changeContainer(angular.element(a.parent()));null!=i.infiniteScrollImmediateCheck&&(f=r.$eval(i.infiniteScrollImmediateCheck));return m=n((function intervalCheck(){f&&g();return n.cancel(m)}))}}}angular.module("app").directive("infiniteScroll",infiniteScroll).value("THROTTLE_MILLISECONDS",null),infiniteScroll.$inject=["$rootScope","$window","$interval","THROTTLE_MILLISECONDS"]}()},8508:()=>{!function(){"use strict";angular.module("app").directive("ndsDateValueDocMan",(function ndsDateValue(){return{restrict:"A",scope:{ndsDateValueDocMan:"="},link:function(e,t){t[0].value=e.ndsDateValueDocMan,t.bind("valueChange",(function(t){e.$apply((function(){var n=t.originalEvent.detail;e.ndsDateValueDocMan=null!==n?n:null}))}))}}}))}()},852:()=>{!function(){"use strict";angular.module("app").directive("ndsDatetimeValue",(function ndsDatetimeValue(){return{restrict:"A",scope:{ndsDatetimeValue:"="},link:function(e,t){t[0].value=e.ndsDatetimeValue,t.bind("valueChange",(function(t){e.$apply((function(){var n=t.originalEvent.detail;e.ndsDatetimeValue=null!==n?n:null}))}))}}}))}()},9523:()=>{!function(){"use strict";angular.module("app").directive("resizer",(function(){return{restrict:"A",scope:{columnName:"<columnName"},link:function(e,t){var n,o,r,a="Status"===e.columnName?188:62,i=800,l=document.body,s=t[0].children[0];function handleMousedown(e){e.stopPropagation(),r=t[0].parentNode.offsetWidth,n=e.clientX,l.addEventListener("mousemove",handleMovement,!0),l.addEventListener("mouseup",handleMouseup,!0)}function handleMovement(e){e.stopPropagation();var t=e.clientX,a=t-n,i=o?o+a:a;isValidWidth(r+i)&&transformResizeHandle(s,i),n=t,o=i}function handleMouseup(n){n.stopPropagation();var a=adjustForLimits((r=t[0].parentNode.offsetWidth)+o);l.removeEventListener("mousemove",handleMovement,!0),l.removeEventListener("mouseup",handleMouseup,!0),resetHandle(s),e.emitResizeEvent(e.columnName,a),o=null}function isValidWidth(e){return!(e<a)&&!(e>i)}function adjustForLimits(e){return e<a?a:e>i?i:e}function transformResizeHandle(e,t){e.setAttribute("style","will-change: transform; transform: translateX("+t+"px)")}function resetHandle(e){e.setAttribute("style","will-change: transform;")}e.isValidWidth=isValidWidth,e.adjustForLimits=adjustForLimits,e.transformResizeHandle=transformResizeHandle,e.resetHandle=resetHandle,e.emitResizeEvent=function emitResizeEvent(t,n){if(void 0!==t&&void 0!==n){var o={columnName:t,columnWidth:n};e.$emit("resizeColumn",o)}},e.handleMousedown=handleMousedown,e.handleMovement=handleMovement,e.handleMouseup=handleMouseup,s.addEventListener("mousedown",handleMousedown,!1)}}}))}()},8211:()=>{!function(){"use strict";function rightClick(e,t,n){return{restrict:"A",scope:{controller:"=controller",data:"=placeholder",method:"&rightClick"},link:function link(e,t,n,o){jQuery(t[0]).bind("contextmenu",(function(t){e.$apply((function(){t.preventDefault(),e.controller.rightClickedPlaceholder=e.data,e.controller.showContextMenu=!0,e.method()(t,e.data)}))}))}}}angular.module("app").constant("RIGHT_CLICK_CONSTANTS",{MENU_SELECTOR:"#placeholderContextMenu",PARENT_SELECTOR:"#docmanapp"}).directive("rightClick",rightClick),rightClick.$inject=["RIGHT_CLICK_CONSTANTS","PERMISSIONS","permissionService"]}()},5367:()=>{!function(){"use strict";function stageDrop(e,t,n,o,r,a){var i=a.getLabels();return{restrict:"C",scope:{},link:function link(a,l,s){function processDragOverOrEnter(t){return t.type===e.DRAG_ENTER_EVENT||t.type===e.DRAG_OVER_EVENT?(o.draggingFromRightNav||l.addClass("stageDragged"),null!=a.$parent.vm.disableDraggingPromise&&(n.cancel(a.$parent.vm.disableDraggingPromise),a.$parent.vm.disableDraggingPromise=null)):t.type===e.DRAG_LEAVE_EVENT&&l.removeClass("stageDragged"),t&&(t.preventDefault&&t.preventDefault(),t.stopPropagation),!1}l.bind(e.DRAG_OVER_EVENT,processDragOverOrEnter),l.bind(e.DRAG_ENTER_EVENT,processDragOverOrEnter),l.bind(e.DRAG_LEAVE_EVENT,processDragOverOrEnter),l.bind(e.DROP_EVENT,(function processDrop(n){null!=n&&n.preventDefault(),o.draggingFromRightNav=!1,l.removeClass("stageDragged"),a.$parent.vm.draggingFiles=!1;var s=n.target.files;if(n.type===e.DROP_EVENT&&(s=t.getDataTransfer(n).files),s.length<=e.MAX_NUMBER_DRAGGED_FILES){if((s=function validateFiles(e){if(!o.allowedFileExtensions||0===o.allowedFileExtensions.length||""===o.allowedFileExtensions)return e;for(var t,n,a=[],l=[],s=0;s<e.length;s++)n=void 0,n=(t=e[s]).name.substr(t.name.lastIndexOf(".")+1).toLowerCase(),-1!==o.allowedFileExtensions.indexOf(n)?l.push(e[s]):a.push(e[s].name);return a.length>0&&r.dispatchErrorEvent("",i.INVALID_FILE_EXTENSIONS_PART_1+" ",null,i.INVALID_FILE_EXTENSIONS_PART_2+" "+a.join(", ")+"\n"+i.VALID_FILE_EXTENSIONS+o.allowedFileExtensions.join(", ")),l}(s)).length>0)for(var c=e.MAX_FILE_SIZE,d=0;d<s.length;d++)!function(e){var n=new FileReader;n.onload=function(n){e.size<c?t.createFileStagingPlaceholder(e,n.target.result,a):r.dispatchErrorEvent("",i.INDIVIDUAL_MAX_FILE_SIZE_ERROR)},n.readAsDataURL(e)}(s[d])}else r.dispatchErrorEvent("",i.MAX_NUMBER_DRAGGED_FILES_ERROR)}))}}}angular.module("app").directive("uniStageDrop",stageDrop),stageDrop.$inject=["CONSTANTS","commonService","$interval","$rootScope","dataService","labels"]}()},5275:()=>{!function(){"use strict";angular.module("docman.extensions").service("customLinkService",(function customLinkService(){this.customLinkDefinitions=function customLinkDefinitions(){return[]}}))}()},549:()=>{!function(){"use strict";function downloadService(e){return{before:function before(){return!1},after:function after(e){return null},execute:function execute(){return null}}}angular.module("docman.extensions").service("downloadService",downloadService),downloadService.$inject=["$q"]}()},8373:()=>{!function(){"use strict";angular.module("docman.extensions",[])}()},2790:()=>{!function(){"use strict";function fileUploadService(e){return{before:function before(){return!1},after:function after(e){return null},execute:function execute(e,t,n){return null}}}angular.module("docman.extensions").service("fileUploadService",fileUploadService),fileUploadService.$inject=["$q"]}()},2301:()=>{!function(){"use strict";function LeftNavController(e,t,n,o,r,a,i,l,s){var c=this;function validatedObjectArray(e,t){for(var n=[],r=0;r<e.length;r++){var a=!0;for(var i in t)e[r].hasOwnProperty(i)?typeof e[r][i]!=typeof t[i]&&(a=!1,console.log(i+o.TYPE_SHOULD_BE+typeof t[i])):(a=!1,console.log(o.REQUIRED_PROPERTY_MISSING+i));a&&n.push(e[r])}return n}s=s.get(),c.customLinks=[],c.buttons=[],c.filters=[],c.showArchiveLink,c.docmanFilterElements,c.updateAriaChecked=function updateAriaChecked(e){c.docmanFilterElements||(c.docmanFilterElements=document.querySelectorAll('div[id^="docmanFilter-"'));c.docmanFilterElements.forEach((e=>{e.setAttribute("aria-checked",!1)})),c.docmanFilterElements[e].setAttribute("aria-checked",!0)},function activate(){c.showArchiveLink=s.systemPropsMap.get(r.ARCHIVE_BROWSER_VISIBLE),function retrieveCustomLinks(){var t=e.customLinkDefinitions();c.customLinks=validatedObjectArray(t,a)}(),function retrieveButtons(){var e=t.getButtonDefinitions();c.buttons=validatedObjectArray(e,i)}(),function retrieveFilters(){var e=n.getFilters();c.filters=validatedObjectArray(e,l)}()}()}angular.module("app").controller("LeftNavController",LeftNavController),LeftNavController.$inject=["customLinkService","buttonService","filterService","CONSTANTS","SYSTEM_PROPERTIES","CUSTOM_LINK_REQUIREMENTS","CUSTOM_BUTTON_REQUIREMENTS","CUSTOM_FILTER_REQUIREMENTS","config"]}()},7369:()=>{!function(){"use strict";function PlaceholderController(e,t,n,o,r,a,i,l,s,c,d,u,f,p,E,m,g,h,v,T,S,P,_,C,D,A,I,N,w,O,L,R,b,M,U,y,F,k,V,x,B,j,G,$,H,q){var W=this;function initializeDynamicVariables(){W.categoryViewerAccessUnavailable=!1,W.defaultEsignatureMessage="",W.isLoading=!0,W.reverse=!1,W.selectedNewOption=E.ADD_NEW,W.isNewPlaceholderShown=!1,W.newPlaceholder={},W.selectedPlaceholder=null,W.placeholderSelectedForExpandedPreview=null,W.rightClickedPlaceholder=null,W.imagePreviewLoadingInterval=null,W.enlargedPreviewLoadingInterval=null,W.searchText="",W.productSearchText="",W.selectedLeftNavHeader=W.leftNavAllDocumentsHeader,W.eSignPlaceholderSelected=!1,W.canPrepareForESignaturePlaceholder=!1,d.draggingFromRightNav=!1,W.hasEditPermissions=W.permissionService.hasPermission(W.configValues.contextObjectType,h.UNI_EDIT_DETAILS),W.hasNamePermission=W.permissionService.hasPermission(W.configValues.contextObjectType,h.UNI_CREATE_PLACEHOLDER_NAME),W.showRelationshipLink=!1,W.showCollateralLink=!1,W.allPlaceholdersSelected=!1,W.placeholderFilterValue,W.enlargedPreviewLink="",W.picklistValueChanged=!1,W.isEsignaturePluginActive=UniDocMan.ESignaturePluginActive,W.hasBulkUpdate=W.configValues.systemPropsMap.get(T.BULK_UPDATE_ENABLED),W.enhancedPlaceholderViewerPermissionsEnabled=W.configValues.systemPropsMap.get(T.ENHANCED_PLACEHOLDER_VIEWER_PERMISSIONS_KEY),W.labels=U.getLabels()}function setIsEditVisible(e){W.isEditVisible=e}function setIsSaveVisible(e){W.isSaveVisible=e}function setIsCancelVisible(e){W.isCancelVisible=e}function getFieldSetMetadata(e,t){_.retrieveFieldSetMetadata(e,t).then((function(e){t.forEach((function(t){W.fieldSetMetadataMap[t]=k.adjustFieldSetMetadata(e.fieldSetMetadataMap[t])}))}))}function getPlaceholderContextType(){return W.isLoanDocMan?u.PLACEHOLDER_APEX_TYPE_TO_API_NAME.LoanDocument:W.isAccountDocMan?u.PLACEHOLDER_APEX_TYPE_TO_API_NAME.AccountDocument:u.PLACEHOLDER_APEX_TYPE_TO_API_NAME.UniversalDocument}function focusDeleteModal(){var e=document.activeElement;if("BODY"==e.tagName){var t=null;["rightNavTableFileStagingFilter","rightNavTableArchiveFilter"].forEach((function(e){t||(t=document.getElementById(e))})),t&&(e=t)}W.modal=new q("docManDeleteModal",e),W.modal.focus()}function toggleIsPlaceholderDetailExpanded(){W.isPlaceholderDetailExpanded=!W.isPlaceholderDetailExpanded}function selectedPlaceholderCount(){document.getElementById("docManAlerter")&&(document.getElementById("docManAlerter").innerHTML="");var e=0,t=!1,n=!1,o=[u.STATUS_IN_FILE.toLowerCase(),u.STATUS_SIGNATURE_UPLOADING.toLowerCase(),u.STATUS_SIGNATURE_READY_TO_TAG.toLowerCase(),u.STATUS_SIGNATURE_NEEDED.toLowerCase()];W.eSignPlaceholderSelected=!1,W.canPrepareForESignaturePlaceholder=!1,angular.forEach(I.placeholders,(function(r,a){r.isSelected&&(e+=1,r.status&&o.includes(r.status.toLowerCase())||(n=!0),r.status&&r.status.toLowerCase()===u.STATUS_SIGNATURE_NEEDED.toLowerCase()||(t=!0))})),W.canPrepareForESignaturePlaceholder=!n&&e>0,W.eSignPlaceholderSelected=!t&&e>0;var r=null;return 1==e?r=`${e} ${W.labels.ITEM_SELECTED}`:e>1&&(r=`${e} ${W.labels.OF} ${W.visiblePlaceholderCount} ${W.labels.ITEMS_SELECTED}`),null!=r&&W.postScreenreaderAlert(r,"selected-placeholder-count-notification",!0),e}function filterByCategories(e){null!=e&&W.selectCategory(e),I.uncheckAllPlaceholders(),jQuery("#accordion .collapse.in").collapse("hide"),W.isCategoriesOpen=!0,W.placeholderFilterValue=void 0,W.isFilterByCategories=!0,W.filterService.deactivateAllFilters()}function retrievePlaceholders(){I.retrievePlaceholders().then((function(){I.placeholders&&I.placeholders.length&&(angular.forEach(I.placeholders,(function(e,t){W.permissionService.hasRequiredViewerAccess(e)||(e.file&&""!==e.file||(e.file={}),e.file.previewUnavailable=!0,W.categoryViewerAccessUnavailable=!0)})),updatePlaceholderCount(),i.detectIE()?W.placeHolderPaginationLimit=30:W.placeHolderPaginationLimit=W.totalPlaceholdersCount),W.isLoading=!1,W.refocusProductPackage&&(W.refocusProductPackage=!1,c((function(){document.getElementById("docManProductPackageDropdown").focus()}),10))})).catch((function(e){e.includes("ENTITY_IS_LOCKED")&&showErrorToast(W.labels.LOCKED_LOAN_ERROR_MESSAGE)}))}function setLegalEntities(){_.retrieveLegalEntities(window.DocManId).then((function(e){W.relationshipOptions=[{recordId:"",accountId:"",name:U.getLabels().NONE_OPTION}].concat(e)}))}function setCategories(){W.categoryViewerAccessUnavailable?$.fetchAdHocCategories().then((function(e){W.docTypeOptions=e})):$.fetchCategories().then((function(e){W.docTypeOptions=e}))}function setArchivedFiles(){a.retrieveArchivedDocumentsWithAttachments((function(e){I.prepareForUrls(e).then((function(){d.archivedFiles=e,W.isLoaded=!0}))}))}function focusESigInProgressModal(){W.modal=new q("eSignatureUploadInProgress",document.querySelector('button[id="docManActionsMenu"]')),W.modal.focus()}function isESignActiveStatus(e){return e&&-1===N.getESignatureNonActiveStatuses().indexOf(e.toUpperCase())}function determineContextObjectType(){W.isLoanDocMan=!1,W.isAccountDocMan=!1,W.isUniversalDocMan=!1,x.updateScreenSections(!0).then((function(e){W.addNewScreenSections=e})),W.contextObjectType===u.CONTEXT_OBJECT_TYPE_LOAN?(W.isLoanDocMan=!0,W.contextObjType="LLC_BI__Loan__c"):W.contextObjectType===u.CONTEXT_OBJECT_TYPE_ACCOUNT?(W.isAccountDocMan=!0,W.contextObjType="Account"):W.contextObjectType===u.CONTEXT_OBJECT_TYPE_PRODUCT_PACKAGE?(W.isUniversalDocMan=!0,W.contextObjType="Universal",null!=M.selectedProductInProductPackage&&(M.selectedProductInProductPackage.objectType===u.CONTEXT_OBJECT_TYPE_LOAN?(W.isUniversalDocMan=!1,W.isLoanDocMan=!0):M.selectedProductInProductPackage.objectType===u.CONTEXT_OBJECT_TYPE_ACCOUNT&&(W.isUniversalDocMan=!1,W.isAccountDocMan=!0))):W.isUniversalDocMan=!0}function focusPortalRejectionModal(){var e=document.querySelector(`button[id="status-btn-${W.selectedPlaceholder.recordId}-placeholderDetails"]`);W.modal=new q("docManPortalRejectionModal",e),W.modal.setFocusables(['button[id="docManModalCloseButton"]','select[id="docManPortalRejectionReason"]','textarea[id="docManPortalRejectionComment"]','button[id="docManPortalRejectionCancel"]','button[id="docManPortalRejectionSave"]']),W.modal.setModalEscape((function(){c(W.cancelPortalRejectionModal,100)})),W.modal.focus()}function focusDeleteMultiplePlaceholdersModal(){var e=document.querySelector('button[id="docManActionsMenu"]');W.modal=new q("docManDeleteModal",e),W.modal.focus()}function focusDeletePlaceholderModal(){var e=document.querySelector('div[id="placeholderSearch"] > input');W.modal=new q("docManDeleteModal",e),W.modal.focus()}function focusRequestDocumentsModal(){W.modal=new q("docManRequestDocumentsModal",document.querySelector('button[id="docManActionsMenu"]')),W.modal.setModalEscape((function(){c(W.closeRequestingDocuments,100)})),W.modal.focus()}function focusCancelPortalModal(){W.modal=new q("docManDeleteModal",document.querySelector('button[id="docManActionsMenu"]')),W.modal.focus()}function focusPortalOptionsModal(){var e=document.activeElement;W.modal=new q("docManPortalOptionsModal",e),W.modal.setFocusables(['button[id="docManModalCloseButton"]','input[id="portalOptionEnabled"]','input[id="portalOptionPortalName"]','textarea[id="portalOptionPortalDescription"]','button[id="portalOptionCancelButton"]','button[id="portalOptionSaveButton"]']),W.modal.setModalEscape((function(){c(W.cancelPortalOptionsUpdate,100)})),W.modal.focus()}function ignoreTabNavigation(e){return("Tab"===e.key||9===e.keyCode)&&(e.preventDefault(),!0)}function focusViewerPermissionsModal(){W.modal=new q("docManViewerPermissionsModal",document.activeElement),W.modal.setModalEscape((function(){c(W.cancelViewerPermissionsUpdate,100)})),W.modal.focus(),document.body.removeEventListener("keydown",ignoreTabNavigation)}function cancelViewerPermissionsUpdate(){W.showViewerPermissionsModal=!1,W.modal.unfocus(),W.modal=null}function processPermOptions(e,t){for(var n in e)W.portalPermissions.push({label:n,value:e[n],selected:t.includes(n.toLowerCase())})}function markPlaceholderAsTrash(){W.modal.origin=document.querySelector('div[id="placeholderSearch"] > input'),W.modal.ignoreKeyPresses(),_.removeFileFromPlaceholders([W.placeholderToBeDeleted.recordId]).then((function(e){d.archivedFiles=e[0],I.unlinkRequirementFromPlaceholder([W.placeholderToBeDeleted.recordId]),I.convertPropertyNamesFromCamelCase(d.archivedFiles),_.archivePlaceholderFromFileStaging(W.placeholderToBeDeleted.recordId).then((function(){var e=I.placeholders.indexOf(W.placeholderToBeDeleted);I.placeholders.splice(e,1),W.placeholderToBeDeleted=null,W.showDeleteModal=!1,W.modal&&(W.modal.unfocus(),W.modal=null),updatePlaceholderCount()})).catch((function(){W.placeholderToBeDeleted=null,W.showDeleteModal=!1,W.modal&&(W.modal.unfocus(),W.modal=null)}))})).catch((function(){W.placeholderToBeDeleted=null,W.showDeleteModal=!1,W.modal&&(W.modal.unfocus(),W.modal=null)}))}function configureDynamicColumn(){var e=W.contextObjectType;e===u.CONTEXT_OBJECT_TYPE_PRODUCT_PACKAGE&&null!==M.selectedProductInProductPackage&&(e=M.selectedProductInProductPackage.objectType,d.$broadcast(u.CHANGED_PRODUCT_PACKAGE_PRODUCT,e)),_.getConfigurableColumns(e).then((function(e){W.configurableColumns=JSON.parse(e),W.columnHeaders=[{label:t.NAME,title:t.NAME,name:"name",fieldPath:"Name",columnStyle:"col-xs-6 col-sm-2 col-lg-3 docman-header-column",sortReverseDefault:!1}];var n=0;angular.forEach(W.configurableColumns,(function(e,o){var r=u.SORT_REVERSE_DEFAULT_TYPES.indexOf(e.typeApex)>-1,a=u.CONVERT_TO_RELATIONSHIP_LABEL.indexOf(e.label.toLowerCase())>-1;e.type==u.TEXTAREA_TYPE&&(W.columnWidths[e.fieldPath]=u.DEFAULT_TEXTAREA_COLUMN_WIDTH),a&&(e.label=t.RELATIONSHIP),u.CONVERT_TO_CATEGORY_LABEL.indexOf(e.label.toLowerCase())>-1&&(e.label=t.CATEGORY);var i,l={label:(i=e.label,i.split(" ").map((e=>e.match(new RegExp(`.{1,${W.word_break_point}}`,"g")).join("&shy;"))).join(" ")),title:e.label,name:"configurableColumns["+n+"].sortValue",fieldPath:e.fieldPath,columnStyle:"col-sm-2 docman-header-column",sortReverseDefault:r};l.fieldPath===window.UniDocMan.namespacePrefix+"Legal_entity__r.LLC_BI__Account__c"&&(l.fieldPath=window.UniDocMan.namespacePrefix+"Legal_entity__r.LLC_BI__Account__r.Name"),W.columnHeaders.push(l),n++}))})),W.showRelationshipLink=e!==u.CONTEXT_OBJECT_TYPE_ACCOUNT&&e!==u.CONTEXT_OBJECT_TYPE_COLLATERAL,W.showCollateralLink=e===u.CONTEXT_OBJECT_TYPE_LOAN,e===u.CONTEXT_OBJECT_TYPE_PRODUCT_PACKAGE&&W.configValues.includeProductPackageDocMan===u.STRING_VALUE_TRUE&&angular.forEach(M.productPackageProducts,(function(e,t){e.objectType!==u.CONTEXT_OBJECT_TYPE_LOAN||(W.showCollateralLink=!0)}))}function sortOrder(e,t,n=null){if(n){var o="click"===n.type,r="keydown"===n.type,a="mouseup"===n.type,i="Space"===n.code||32===n.keyCode,l="Enter"===n.code||13===n.keyCode;if(!(o||a||r&&(i||l)))return;n.preventDefault(),n.stopPropagation()}"status"!==e?(W.columnSortHeader===e?W.reverse=!W.reverse:(W.reverse=t,W.secondarySortHeader=W.secondarySortHeader||W.columnSortHeader!==e?W.columnSortHeader:"name"),W.columnSortHeader=e):(angular.isFunction(W.columnSortHeader)?W.reverse=!W.reverse:W.reverse=!1,W.columnSortHeader=function(e){switch(e.statusTranslation){case U.getLabel(u.STATUS_EXCEPTION):return 1;case U.getLabel(u.STATUS_IN_FILE):return 2;case U.getLabel(u.STATUS_REVIEWED):return 3;case U.getLabel(u.STATUS_APPROVED):return 4;case U.getLabel(u.STATUS_OPEN):return 5;case U.getLabel(u.STATUS_WAIVED):return 6}})}function renderPreview(e,t,n){var o,a=t===r.CONTENT_PREVIEW_LARGE,i=t===r.CONTENT_PREVIEW_THUMBNAIL;if(W.permissionService.hasRequiredViewerAccess(e)){if(i)e.isDocumentExternal&&(e.file&&""!==e.file||(e.file={}),e.file.previewLink=UniDocMan.IMAGE_PREVIEW_NOT_AVAILABLE_EXTERNAL,W.enlargedPreviewLink=""),o=100,window.clearInterval(W.enlargedPreviewLoadingInterval),W.imagePreviewLoadingInterval=setIntervalFunction(r.CONTENT_PREVIEW_THUMBNAIL,r.CONTENT_PREVIEW_URL+e.file.Id,o);else if(a&&!e.isDocumentExternal){W.selectedVersion||(W.selectedVersion=e.file);var l=W.selectedVersion.enlargedPreviewBaseUrl+W.selectedVersion.Id;l+=void 0!==n?"&page="+n:"",o=1e3,window.clearInterval(W.enlargedPreviewLoadingInterval),W.enlargedPreviewLoadingInterval=setIntervalFunction(r.CONTENT_PREVIEW_LARGE,l,o)}}else i?W.selectedPlaceholder.file.previewLink=UniDocMan.IMAGE_PREVIEW_NOT_AVAILABLE_FALLBACK:a&&(W.selectedVersion=W.selectedVersion||e.file,W.selectedVersion.enlargedPreviewLink=UniDocMan.IMAGE_EXPANDED_PREVIEW_NOT_AVAILABLE)}function setIntervalFunction(t,n,o){var a=0;return window.setInterval((function(){a++;var i=W.enlargedPreviewLink;e.$apply((function(){t===r.CONTENT_PREVIEW_THUMBNAIL?W.selectedPlaceholder.file.previewLink="":t===r.CONTENT_PREVIEW_LARGE&&(W.enlargedPreviewLink="")})),e.$apply((function(){a>o?t===r.CONTENT_PREVIEW_THUMBNAIL?(W.selectedPlaceholder.file.previewLink=UniDocMan.IMAGE_PREVIEW_NOT_AVAILABLE_FALLBACK,W.enlargedPreviewLink=UniDocMan.IMAGE_EXPANDED_PREVIEW_NOT_AVAILABLE,W.selectedPlaceholder.file.previewUnavailable=!0):t===r.CONTENT_PREVIEW_LARGE&&(W.enlargedPreviewLink=UniDocMan.IMAGE_EXPANDED_PREVIEW_NOT_AVAILABLE):t===r.CONTENT_PREVIEW_THUMBNAIL?(W.selectedPlaceholder.file.previewLink=n,""!==i&&(W.enlargedPreviewLink=i)):t===r.CONTENT_PREVIEW_LARGE&&(W.enlargedPreviewLink=n)}))}),100)}function renderModal(e){_.getESignatureDefaultMessage().then((function(t){!function setSelected(e){for(var t=[],n=0;n<e.length;n++)e[n].isSelected=!0,t.push(e[n].recordId);for(n=0;n<I.placeholders.length;n++)-1===t.indexOf(I.placeholders[n].recordId)&&(I.placeholders[n].isSelected=!1)}(e),W.selectedPlaceholders=e,W.defaultEsignatureMessage=t,W.showEsignatureMessageModal=!0,W.workingModal=!1,document.body.removeEventListener("keydown",ignoreTabNavigation),c(focusESigMessageModal,100)}))}function focusESigMessageModal(){W.modal=new q("eSigMessageModal",document.querySelector('button[id="docManActionsMenu"]')),W.modal.setModalEscape((function(){d.$apply(W.closeESigMessageModal)})),W.modal.focus()}function getLegalEntityRelationshipName(e){for(var t=e[window.UniDocMan.namespacePrefix+"Legal_entity__c"],n=0;n<W.relationshipOptions.length;n++)if(W.relationshipOptions[n].recordId==t)return W.relationshipOptions[n].name}function getRelationshipFieldValue(e,t){return e.split(".").reduce((function(e,t){return e?e[t]:null}),t||self)}function ssfbSave(e){j.publish(LifeCycle.Topics.GlobalActionButtonHandler.FIRE_CONTINUE_WITHOUT_SAVE),W.toggleButtonDisable();var t=W.ssfbDetermineChangeOfStatus(e);W.fileUploadedWhileFormInDirtyState=!1,F.saveFormBuilder().then((function(n){"success"===n?function ssfbSavePlaceholderSuccess(e,t){setIsCancelVisible(!1),setIsSaveVisible(!1),setIsEditVisible(!0),e.isEditing=!1,W.toggleButtonDisable(),e.file?e.file.previewLoaded=!0:e.file={previewLoaded:!0,previewLink:""};W.loadPlaceholderDetails(e,500,!0),updateLegalEntityFieldDisplayValue(),t&&(V.ssfbBuildChatterCommentForChangedFields(e,F.formBuilder.fields,(function(n){(t.length>0||n.length>0)&&(e.newComment=t+"  "+n,W.addChatterComment(e)),W.retrieveChatterComments(e)})),a.updatePlaceholderStatus(e.recordId,e.status));I.updateRequirementRemote([e.recordId]).then((function(){W.postScreenreaderAlert(W.labels.PLACEHOLDER_EDIT_DETAILS_SAVE_SUCCESS,"placeholder-details-save-success",!0)})),W.selectedPlaceholder.screenSectionFields=JSON.parse(JSON.stringify(F.formBuilder.fields))}(e,t):"failure"===n&&W.toggleButtonDisable(),W.focusPlaceholderEditDetailsButton()}))}function updateLegalEntityFieldDisplayValue(){var e=x.getFields([S.LEGAL_ENTITY.LOAN,S.LEGAL_ENTITY.UNIVERSAL],F.formBuilder.fields,!1);angular.forEach(e,(function(e){for(var t in W.relationshipOptions){var n=W.relationshipOptions[t];if(n.recordId===e.value){e.displayValue=n.name;break}}}))}function addCustomField(e){for(var t=0;t<W.customFields.length;t++)e.fieldName&&W.customFields[t].fieldName?W.customFields[t].fieldName.toLowerCase()===e.fieldName.toLowerCase()&&(W.customFields[t]=e):e.referenceFieldPath&&W.customFields[t].referenceFieldPath&&W.customFields[t].referenceFieldPath.toLowerCase()===e.referenceFieldPath.toLowerCase()&&(W.customFields[t]=e);W.customFields=W.customFields.concat([e])}function savePlaceholderFailure(e){O.setMessage({type:O.messageTypes.error,text:e,context:"modal"}),W.toggleButtonDisable()}function resetToast(){W.toast="",W.toastSubHeading="",W.downloadSubHeading1="",W.downloadSubHeading2="",W.downloadLinkValue="",W.downloadVersionId="",W.focusedElement&&W.focusedElement.focus()}function focusAddNewModal(){document.body.removeEventListener("keydown",ignoreTabNavigation),W.modal=new q("addNewModal",document.activeElement),W.modal.setModalEscape((function(){c(hideNewDialog,100)})),W.modal.focus()}function hideNewDialog(){W.isNewPlaceholderShown=!1,W.newPlaceholder={},x.clearScreenSections(),function restoreCachedValues(){x.mapValues(F.screenSections,W.cachedSections),x.mapValues(F.formBuilder.fields,W.cachedFormBuilder)}(),F.setIsEditing(!1),W.modal.unfocus(),W.modal=null}function setCategoryNameDisplayValue(e,t){e.category=t,e.configurableColumns&&e.configurableColumns.forEach((e=>{"LLC_BI__docType__r.Name"!==e.fieldPath&&"LLC_BI__DocType__r.Name"!==e.fieldPath||(e.displayValue=t,e.sortValue=t)}))}function updatePlaceholderCount(){W.totalPlaceholdersCount=I.placeholders.length,W.visiblePlaceholderCount=G("placeholderViewerRolesFilter")(I.placeholders,W.enhancedPlaceholderViewerPermissionsEnabled).length,W.placeholderPagination()}function renderPreviewPage(e){clearInterval(W.enlargedPreviewLoadingInterval),W.isLoadingLargeImage=!0,renderPreview(e,r.CONTENT_PREVIEW_LARGE,W.selectedVersion.currentPreviewPage-1)}function focusESigDetailsModal(){W.modal=new q("eSigDetailsModal",document.querySelector('div[id="placeholderSearch"] > input')),W.modal.setModalEscape((function(){d.$apply(W.closeESigDetailsModal)})),W.modal.focus()}function renderContextMenu(e,t){var n=jQuery(e.target),o=jQuery("#docmanapp"),r=jQuery("#placeholderContextMenu");if(e.preventDefault(),e.stopPropagation(),W.showContextMenu=!0,W.rightClickedPlaceholder=t,"more-options-button"==n.attr("id"))d.$$postDigest((function(){var e=jQuery(window).scrollTop()+jQuery(window).height(),t=n.offset().top+n.height(),o=r.outerHeight();t+o>e?r.css({top:n.offset().top-o,left:n.offset().left}):r.css({top:t,left:n.offset().left})}));else{var a=e.pageX-5,i=e.pageY,l=r.outerWidth(),s=r.outerHeight();a-n.offset().left+l>n.width()&&(a-=l),i-o.offset().top+s>o.height()&&(i-=s)}r.css({display:"block",position:"absolute",left:a,top:i}),r.appendTo("body")}function focusVersionModal(){W.modal=new q("docManVersionsModal",document.activeElement),W.modal.setModalEscape((function(){c(W.closeVersionModal,100)})),W.modal.focus()}function getOffsetDatetime(e){var t=new Date(e);return e&&!isNaN(t.getTime())&&window.LifeCycle.Internationalize?window.LifeCycle.Internationalize.timeZoneUtil&&window.LifeCycle.Internationalize.timeZoneUtil.applyAggregateOffset?new Date(window.LifeCycle.Internationalize.timeZoneUtil.applyAggregateOffset("add",t.getTime())):t:null}function getSelectedPlaceholders(){for(var e=[],t=0;t<I.placeholders.length;t++)I.placeholders[t].isSelected&&e.push(I.placeholders[t]);return e}function hasEditAccess(e,t){return W.permissionService.hasRequiredViewerAccess(e)&&W.permissionService.hasEditAfterApprovalPermission(h.UNI_EDIT_DETAILS,e.status,t)}function showErrorToast(e){showToast(e,v.ERROR,f.THEME_ERROR,"Error")}function showSuccessToast(e){showToast(e,v.SUCCESS,f.THEME_SUCCESS,"Success")}function showToast(e,t,n,o){W.toast=e,W.toastType=t,W.toastIcon=n,W.toastLabel=o,W.focusToast()}function getSelectedPlaceholders(){return I.placeholders.filter((e=>e.isSelected))}W.connection,W.categoryViewerAccessUnavailable=!1,W.columnSortHeader="",W.secondarySortHeader="",W.leftNavAllDocumentsHeader=o.ALL_DOCUMENTS,W.selectedLeftNavHeader=W.leftNavAllDocumentsHeader,W.relationshipOptions=[],W.docTypeOptions=[],W.docTypeLabel=m.LABEL,W.showDeleteModal=!1,W.showDeleteMultipleModal=!1,W.workingModal=!1,W.showVersionsModal=!1,W.showEsignatureCollectionDetailModal=!1,W.showEsignatureCancelDetails=!1,W.isFilterByCategories=!1,W.showPortalOptionsModal=!1,W.showViewerPermissionsModal=!1,W.viewRequestDocumentsModal=!1,W.requestDocumentsEditMode=!1,W.placeholderToBeDeleted=null,W.placeholdersToBeDeleted=[],W.placeholdersInCollection=[],W.displayPreviewBackground=!1,W.showContextMenu=!1,W.hasEditPermissions=!1,W.hasNamePermission=!1,W.showAddNewDropdown=!1,W.performingAjax=!1,function initializeToast(){W.toastStack=[{toastIcon:f.THEME_SUCCESS}],W.toastType=v.MESSAGE,W.toastIcon=f.THEME_WARNING,W.toastLabel="Message",resetToast()}(),W.showEsignatureMessageModal=!1,W.statusLists={},W.statusTheme={},W.contextObjectType="",W.placeholderNames=[],W.selectedCategory="",W.isLoanDocMan=!1,W.isAccountDocMan=!1,W.isUniversalDocMan=!1,W.contextObjType="",W.showPortalRejectionModal=!1,W.versioningEnabled=!0,W.rejectionReasons=[],W.configValues=L.get(),W.configurableColumns=[],W.buttonDisabled=!1,W.showCancelPortalModal=!1,W.placeholdersToBeCancelled=[],W.isTranslated=!1,W.selectedPlaceholder,W.selectedVersion,W.isCategoriesOpen=!0,W.documentManagerFileSizeLimit="",W.bulkUpdateRecords=[],W.selectedCategories=[],W.esignUploadInProgress=!1,W.selectedPlaceholders=[],W.canPrepareForESignaturePlaceholder=!1,W.eSignatureService=N,W.defaultDownloadService=C,W.permissionService=g,W.placeholderService=I,W.commonService=l,W.productPackageService=M,W.uploadServiceData=s,W.filterService=B,W.config=L,W.CONSTANTS=u,W.navigator=y,W.fieldRestrictions=[],W.modal=null,W.modalPreview=null,W.modalExternal=null,W.refocusProductPackage=!1,W.shouldAlertPortalRejection=!1,W.word_break_point=4,W.isEsignaturePluginActive=!1,W.addNewPlaceholder=function addNewPlaceholder(){W.toggleButtonDisable(),W.newPlaceholder=x.buildPlaceholderFromSection(),function validateNewPlaceholderAndSave(){var t=F.screenSections[Object.keys(F.screenSections)[0]].guid;if(F.isValidForm(t)){W.newPlaceholder.validationErr=!1;var n=W.docTypeOptions?.find((e=>e.id===W.newPlaceholder.LLC_BI__docType__c||e.id===W.newPlaceholder.LLC_BI__DocType__c)),o=n?.name;a.addNewPlaceholder(W.newPlaceholder,(function(t){e.$apply((function(){hideNewDialog(),o&&setCategoryNameDisplayValue(t,o),I.setStatuses(t),I.placeholders.push(t),updatePlaceholderCount(),W.toggleButtonDisable()})),W.modal&&(W.modal.unfocus(),W.modal=null)}),(function(e,t){W.toggleButtonDisable(),W.newPlaceholder.err=!0,W.postScreenreaderAlert(W.labels.ERROR_OCURRED,"new-placeholder-err",!0,"new-placeholder-alert-div")}))}else W.newPlaceholder.validationErr=!0,W.postScreenreaderAlert(W.labels.REQUIRED_FIELDS,"validate-new-placeholder-incomplete-fields",!0,"new-placeholder-alert-div"),W.toggleButtonDisable()}()},W.addChatterComment=function addChatterComment(e,t=!0,n=!1){W.performingAjax=!0,e.newComment&&a.addChatterComment(e.recordId,e.newComment,(function(){e.newComment="",W.performingAjax=!1,t&&W.retrieveChatterComments(e),n&&W.postScreenreaderAlert(W.labels.SUCCESSFUL_COMMENT_MESSAGE,"placeholder-comment-new-success")}))},W.addFile=function addFile(){jQuery("#rightClickAddFile-"+W.rightClickedPlaceholder.recordId+":hidden").trigger("click")},W.buildImageURL=function buildImageURL(e){if(e.file){var t=e;(e=[])[t.file.ParentId]=t}d.currentTime=(new Date).getTime(),I.buildImageUrls(e).then((function(){W.selectedPlaceholder&&W.loadPlaceholderDetails(W.selectedPlaceholder,500)}))},W.canPrepareForESignature=function canPrepareForESignature(){return W.isEsignaturePluginActive&&W.permissionService.hasPrepareForESignature()},W.cancelDelete=function cancelDelete(){W.showDeleteModal=!1,W.showDeleteMultipleModal=!1,W.placeholderToBeDeleted=null,W.placeholdersToBeDeleted=[],W.modal.unfocus(),W.modal=null},W.cancelEditDetails=function cancelEditDetails(){W.selectedPlaceholder&&(W.selectedPlaceholder.isEditing=!1,W.selectedPlaceholder.fields=jQuery.extend(!0,{},W.selectedPlaceholder.beforeFields),W.selectedPlaceholder.validationErr=!1,W.selectedPlaceholder.err=!1,O.clear(),j.publish(LifeCycle.Topics.GlobalActionButtonHandler.FIRE_CONTINUE_WITHOUT_SAVE),F.setIsEditing(!1).then((function(){setIsCancelVisible(!1),setIsSaveVisible(!1),setIsEditVisible(!0),F.revertFields(Object.keys(F.screenSections)[0]),W.fileUploadedWhileFormInDirtyState&&x.clearFields(u.EXCEPTION_DATE_FIELDS,!0),W.focusPlaceholderEditDetailsButton(),W.fileUploadedWhileFormInDirtyState=!1})))},W.setMultiPicklistValue=function setMultiPicklistValue(e,t){var n=e.getAttribute("data-field"),o=e.getAttribute("data-id"),r=t.fields[n];if(n){var a=jQuery("select[data-id="+o+"]"),i=jQuery("img.picklistArrowRight[data-id="+o+"]"),l=a[0],s=a[1];if(r&&l){for(var c,d=r.split(";"),u=0,f=s.options.length;u<f;u++)c=s.options[u],-1!=d.indexOf(c.innerHTML)&&(c.selected="selected");i.click()}}},W.updateMultiPicklistValue=function updateMultiPicklistValue(e,t){for(var n,o=[],r=e&&e.options,a=e.getAttribute("data-field"),i=e.getAttribute("data-id"),l=0,s=r.length;l<s;l++)(n=r[l]).selected&&o.push(n.value);i=="update-picklist-"+a?t.fields[a]=o.join(";"):i=="add-new-picklist-"+a&&(t[a]=o.join(";"))},W.cancelPortalOptionsUpdate=function cancelPortalOptionsUpdate(){W.showPortalOptionsModal=!1,W.modal.unfocus(),W.modal=null},W.cancelViewerPermissionsUpdate=cancelViewerPermissionsUpdate,W.cancelPortalRejectionModal=function cancelPortalRejectionModal(){W.showPortalRejectionModal=!1,W.selectedPlaceholder.portalRejectionComment=W.originalRejectionComment,W.selectedPlaceholder.portalRejectionReason=W.originalRejectionReason,W.modal.unfocus(),W.modal=null},W.cancelOverwrite=function cancelOverwrite(){d.$broadcast(u.OVERWRITE_CONFIRM,!1),W.modal.unfocus(),W.modal=null,W.showOverwriteModal=!1,jQuery(".docman-placeholder-row").removeClass("fileHover")},W.closeExpandedPreview=function closeExpandedPreview(){clearInterval(W.enlargedPreviewLoadingInterval),W.displayPreviewBackground=!1,W.isLoadingNewPage=!1,W.isProcessing=!1,W.enlargedPreviewLink="",W.modalPreview&&(W.modalPreview.unfocus(),W.modalPreview=null);W.modalExternal?W.modalExternal.allowKeyPresses():W.modal&&W.modal.allowKeyPresses()},W.configureDynamicColumn=configureDynamicColumn,W.closeModal=function closeModal(){R.url(p.DEFAULT_ROUTE)},W.resetToast=resetToast,W.changeLeftNavFilter=function changeLeftNavFilter(e){W.selectedLeftNavHeader=e},W.confirmDelete=function confirmDelete(){markPlaceholderAsTrash(W.placeholderToBeDeleted)},W.confirmDeleteMultiple=function confirmDeleteMultiple(){W.workingModal=!0,W.modal.ignoreKeyPresses(),document.body.addEventListener("keydown",ignoreTabNavigation);var e=[];angular.forEach(W.placeholdersToBeDeleted,(function(t,n){e.push(t.recordId)})),W.showDeleteMultipleModal=!1,I.unlinkRequirementFromPlaceholder(e),_.removeFileFromPlaceholders(e).then((function(){_.archivePlaceholdersFromFileStaging(e).then((function(){angular.forEach(W.placeholdersToBeDeleted,(function(e,t){var n=I.placeholders.indexOf(e);I.placeholders.splice(n,1)})),W.updatePlaceholderCount(),W.setArchivedFiles(),W.workingModal=!1,W.placeholdersToBeDeleted=[],W.modal&&(W.modal.unfocus(),W.modal=null),document.body.removeEventListener("keydown",ignoreTabNavigation)})).catch((function(){W.workingModal=!1,W.placeholdersToBeDeleted=[],document.body.removeEventListener("keydown",ignoreTabNavigation),W.modal&&(W.modal.unfocus(),W.modal=null)}))})).catch((function(){W.workingModal=!1,W.placeholdersToBeDeleted=[],document.body.removeEventListener("keydown",ignoreTabNavigation),W.modal&&(W.modal.unfocus(),W.modal=null)}))},W.confirmOverwrite=function confirmOverwrite(){d.$broadcast(u.OVERWRITE_CONFIRM,!0),W.modal.unfocus(),W.modal=null,W.showOverwriteModal=!1},W.copyFileLink=function copyFileLink(e){var t="https://"+R.$$host;e.file.RecordType===r.ATTACHMENT?t+=r.ATTACHMENT_DOWNLOAD_URL+e.file.Id:t+=r.CONTENT_DOWNLOAD_URL+e.file.Id;l.copyToClipboard(t)},W.deletePlaceholder=function deletePlaceholder(e){W.placeholderToBeDeleted=e,W.showDeleteModal=!0,c(focusDeletePlaceholderModal,100)},W.deletePlaceholders=function deletePlaceholders(){angular.forEach(I.placeholders,(function(e,t){e.isSelected&&W.placeholdersToBeDeleted.push(e)})),W.placeholdersToBeDeleted.length&&(W.showDeleteMultipleModal=!0,c(focusDeleteMultiplePlaceholdersModal,100))},W.downloadFile=function downloadFile(e){if(void 0!==D.before&&typeof D.before===u.FUNCTION&&void 0!==D.after&&typeof D.after===u.FUNCTION&&void 0!==D.execute&&typeof D.execute===u.FUNCTION&&!0===D.before(e.recordId,e.isDocumentExternal,e.documentStorageType))return void D.execute().then((function(e){D.after(e)}),(function(e){D.after(e)}));C.executeDownload(e)},W.retrieveAndProcessData=function retrieveAndProcessData(){configureDynamicColumn(),retrievePlaceholders(),determineContextObjectType(),setLegalEntities(),setCategories(),setArchivedFiles(),A.retrieveFileStagingPlaceholders().then((function(){})),sortOrder("name",!1),getFieldSetMetadata(getPlaceholderContextType(),[window.UniDocMan.namespacePrefix+"DocMan_Fields"]),x.updateScreenSections().then((function(e){W.screenSections=e}))},W.downloadVersion=function downloadVersion(e,t,n){if(e.isExternalReference)window.open(e.externalDownloadUrl);else if(t){var o;1==L.get().systemPropsMap.get(T.DOCUMENT_DOWNLOAD_NAME_KEY)?o=e.Title:(o=W.selectedPlaceholder.name,e!==W.selectedPlaceholder.versions[0]&&(o+=u.DASH+e.versionNumber));var a=r.CONTENT_DOWNLOAD_URL,i=!0;e.RecordType===r.ATTACHMENT&&(a=r.ATTACHMENT_DOWNLOAD_URL,i=!1);var l=C.getDownloadLink(a,e.Id,n);C.updateFileTitleAndDownload(e.Id,o,i,l,e.Title)}else C.downloadVersion(e.Id,n)},W.doubleClickPlaceholderRow=function doubleClickPlaceholderRow(e){jQuery(u.HASH+e.recordId).collapse("toggle"),toggleIsPlaceholderDetailExpanded()},W.duplicatePlaceholder=function duplicatePlaceholder(t){if(null==t)return{errorMessage:U.getLabels().PLACEHOLDER_OBJECT_NULL};a.duplicatePlaceholder(t.recordId,(function(t){e.$apply((function(){t.file="",I.setStatuses(t),I.placeholders.push(t),updatePlaceholderCount()}))}))},W.contextMenuEditDetails=function contextMenuEditDetails(e){e===W.selectedPlaceholder&&W.selectedPlaceholder.isOpen?W.showEditDetails(e):(e.rightClickEditDetails=!0,jQuery(u.HASH+e.recordId).collapse("show"))},W.filterByCategories=filterByCategories,W.formatContentSize=function formatContentSize(e){return null==e||isNaN(e)||""===e?"":e/1024e6>=1?"("+Math.round(10*e/1024e6)/10+" GB)":e/1024e3>=1?"("+Math.round(10*e/1024e3)/10+" MB)":e/1024>=1?"("+Math.round(e/1024)+" KB)":e/1024<1?"("+e+" Bytes)":""},W.hideNewDialog=hideNewDialog,W.initializeDynamicVariables=initializeDynamicVariables,W.downloadMultipleFiles=function downloadMultipleFiles(){C.downloadMultipleFiles(I.placeholders)},W.initializePortalRejectionModal=function initializePortalRejectionModal(e){W.showPortalRejectionModal=!0,I.loadRejectionReasonPicklistValues(e.apexType).then((function(t){W.rejectionReasons=t,W.selectedPlaceholder=e,W.originalRejectionReason=W.selectedPlaceholder.portalRejectionReason,W.originalRejectionComment=W.selectedPlaceholder.portalRejectionComment,c(focusPortalRejectionModal,100)}))},W.isCategoryField=function isCategoryField(e){if(e===m.PATH||e===m.PATH2)return!0;return!1},W.isDocTypeField=function isDocTypeField(e){return e.toLowerCase()===(window.UniDocMan.namespacePrefix+u.DOC_TYPE_FIELD).toLowerCase()||e.toLowerCase()===(u.DEFAULT_NAMESPACE+u.DOC_TYPE_FIELD).toLowerCase()},W.isLegalEntityField=function isLegalEntityField(e){return e===window.UniDocMan.namespacePrefix+u.ENTITY_LOOKUP_FIELD},W.isPlaceholderDetailExpanded=!1,W.toggleIsPlaceholderDetailExpanded=toggleIsPlaceholderDetailExpanded,W.isRelationshipField=function isRelationshipField(e){return e===window.UniDocMan.namespacePrefix+u.RELATIONSHIP_LOOKUP_FIELD},W.isSortedByStatus=function isSortedByStatus(){return angular.isFunction(W.columnSortHeader)},W.loadPlaceholderDetails=function loadPlaceholderDetails(t,o,i){clearInterval(W.imagePreviewLoadingInterval),!i&&W.selectedPlaceholder&&W.selectedPlaceholder.beforeFields&&delete W.selectedPlaceholder.beforeFields;W.selectedPlaceholder!==t&&(x.clearScreenSections(),W.selectedPlaceholder=t);i&&I.convertPropertyNamesFromCamelCase([W.selectedPlaceholder]);W.retrieveChatterComments(t),I.placeholderHasFileOrExternal(W.selectedPlaceholder)?void 0!==W.selectedPlaceholder.file.RecordType&&W.selectedPlaceholder.file.RecordType===n.FILE?void 0===W.selectedPlaceholder.file.ParentId||W.selectedPlaceholder.file.previewLoaded||(!function isPreviewSupported(e){return-1!==["PDF","WORD_X","WORD","EXCEL_X","EXCEL","POWER_POINT_X","POWER_POINT","PNG","JPEG","JPG","BMP","TEXT"].indexOf(e)}(t.file.FileType)?c((function(){e.$apply((function(){W.selectedPlaceholder.file?(W.selectedPlaceholder.file.previewLoaded=!0,W.selectedPlaceholder.file.previewUnavailable=!0):W.selectedPlaceholder.file={previewLoaded:!0,previewLink:""},W.selectedPlaceholder.file.previewLink=UniDocMan.IMAGE_PREVIEW_NOT_AVAILABLE_TYPE}))}),o):renderPreview(W.selectedPlaceholder,r.CONTENT_PREVIEW_THUMBNAIL)):W.selectedPlaceholder.isDocumentExternal&&W.selectedPlaceholder.documentStorageType?renderPreview(W.selectedPlaceholder,r.CONTENT_PREVIEW_THUMBNAIL):c((function(){e.$apply((function(){W.selectedPlaceholder.file?(W.selectedPlaceholder.file.previewLoaded=!0,W.selectedPlaceholder.file.previewUnavailable=!0):W.selectedPlaceholder.file={previewLoaded:!0},W.selectedPlaceholder.file.previewLink=UniDocMan.IMAGE_PREVIEW_NOT_AVAILABLE_FALLBACK}))}),o):c((function(){e.$apply((function(){W.selectedPlaceholder.file?(W.selectedPlaceholder.file.previewLoaded=!0,W.selectedPlaceholder.file.previewUnavailable=!0):W.selectedPlaceholder.file={previewLoaded:!0},W.selectedPlaceholder.file.previewLink=""}))}),o);a.retrievePlaceholderWithFields(W.selectedPlaceholder.recordId,(function(t){a.retrievePlaceholderFieldSet(W.selectedPlaceholder.recordId,(function(n){e.$apply((function(){W.selectedPlaceholder.fieldSetSchema=JSON.parse(n),W.selectedPlaceholder.fields=t,W.selectedPlaceholder.beforeFields=jQuery.extend(!0,{},W.selectedPlaceholder.fields),W.selectedPlaceholder.rightClickEditDetails&&(W.selectedPlaceholder.rightClickEditDetails=!1,W.showEditDetails(W.selectedPlaceholder)),function updatePlaceholderConfigurableColumns(){for(var e=0;e<I.placeholders.length;e++)if(I.placeholders[e].isOpen){var t,n,o=W.selectedPlaceholder.fields;W.selectedPlaceholder.name=o.Name;for(var r=0;r<I.placeholders[e].configurableColumns.length;r++)(t=I.placeholders[e].configurableColumns[r].fieldPath).split(".").length>1?(n=t.split(".")[0]==window.UniDocMan.namespacePrefix+"Legal_entity__r"?getLegalEntityRelationshipName(o):getRelationshipFieldValue(t,o),I.placeholders[e].configurableColumns[r].displayValue=n,I.placeholders[e].configurableColumns[r].value=n):(I.placeholders[e].configurableColumns[r].displayValue=o[t],I.placeholders[e].configurableColumns[r].value=o[t]);break}}()}))}))}))},W.markPlaceholderAsTrash=markPlaceholderAsTrash,W.passedExceptionDate=function passedExceptionDate(e,t){if(-1!==u.EXCEPTION_DATE_FIELDS.indexOf(e)){if(t.fields&&t.fields[e])if(null!=t.fields[e])if(new Date(t.fields[e])<=new Date)return!0}return!1},W.placeholderFilter=function placeholderFilter(e){I.uncheckAllPlaceholders(),jQuery("#accordion .collapse.in").collapse("hide"),W.placeholderFilterValue=e,W.isFilterByCategories=!1,W.selectedCategories=[],W.filterService.deactivateAllFilters()},W.productPackageProductChange=function productPackageProductChange(e){M.selectedProductInProductPackage=e,window.DocManId=M.selectedProductInProductPackage.recordId,W.refocusProductPackage=!0,initializeDynamicVariables(),configureDynamicColumn(),retrievePlaceholders(),determineContextObjectType(),I.populateStatusObjects(),setLegalEntities(),setCategories(),setArchivedFiles(),x.updateScreenSections().then((function(e){W.screenSections=e})),A.retrieveFileStagingPlaceholders().then((function(){}))},W.renderPreview=renderPreview,W.retrieveChatterComments=function retrieveChatterComments(t){null!=t&&a.retrieveChatterComments(t.recordId,(function(n){e.$apply((function(){if(t.comments=n,t.comments&&t.comments.length>0)for(var e=0;e<t.comments.length;e++)t.comments[e].body=String(t.comments[e].body).replace(/<[^>\<]+>/gm,"")}))}))},W.retrievePlaceholderNames=function retrievePlaceholderNames(e){W.selectedCategory=e,W.performingAjax=!0,_.retrievePlaceholderNames(W.selectedCategory).then((function(e){W.selectedPlaceholder&&W.selectedPlaceholder.fieldSetSchema&&l.formatDateFieldsForInput(W.selectedPlaceholder,W.selectedPlaceholder.fieldSetSchema),e&&e.length>0&&(W.placeholderNames=e),W.performingAjax=!1}))},W.retrievePlaceholders=retrievePlaceholders,W.savePlaceholderPortalFields=function savePlaceholderPortalFields(e){W.toggleButtonDisable();var t={},n=[];for(var o in u.PORTAL_FIELDS){var r=u.PORTAL_FIELDS[o];null!=e.fields[r]&&(t[r]=e.fields[r])}if(e.fields){for(var r in t){var a=t[r];null==a||""===a?(n.push(r),delete t[r],-1!==r.indexOf("Portal_Doc_Name__c")&&(e.portalDocName=e.name)):-1!==r.indexOf("Portal_Doc_Name__c")&&(e.portalDocName=a)}_.savePlaceholderPortalData(e.recordId,t,n).then((function(t){W.showPortalOptionsModal=!1,W.savePlaceholderSuccess(t,e),W.modal.unfocus(),W.modal=null,W.postScreenreaderAlert(W.labels.PLACEHOLDER_PORTAL_OPTIONS_SAVE_SUCCESSFUL,"portal-options-save-success",!0)}),(function(e){savePlaceholderFailure(e)}))}},W.savePlaceholderWithFields=function savePlaceholderWithFields(e){W.toggleButtonDisable();var t=function determineChangeOfStatus(e){var t="",n=new Date,o=null,r="";e.apexType.indexOf("LoanDocument")>-1||e.apexType.indexOf("AccountDocument")>-1?(o=new Date(parseInt(e.fields.LLC_BI__exceptionDate__c)),r="LLC_BI__reviewStatus__c"):(o=new Date(parseInt(e.fields.LLC_BI__Exception_Date__c)),r="LLC_BI__Review_Status__c");e.file||(e.file={previewLoaded:!1,previewLink:""});if(o<=n&&W.selectedPlaceholder.status!=u.STATUS_EXCEPTION)e.fields[r]=u.STATUS_EXCEPTION,t+=" "+U.getLabels().STATUS_CHANGED_FROM+" "+U.getLabel(W.selectedPlaceholder.status,1)+" "+U.getLabels().TO_LABEL+" "+U.getLabel(u.STATUS_EXCEPTION,1)+u.PERIOD,W.selectedPlaceholder.status=u.STATUS_EXCEPTION,W.selectedPlaceholder.statusTranslation=U.getLabel(u.STATUS_EXCEPTION);else if(o>n&&W.selectedPlaceholder.status==u.STATUS_EXCEPTION){var a=u.STATUS_OPEN;(e.file.Title||e.file.Id)&&(a=u.STATUS_IN_FILE),e.fields[r]=a,t+=" "+U.getLabels().STATUS_CHANGED_FROM+" "+U.getLabel(u.STATUS_EXCEPTION,1)+" "+U.getLabels().TO_LABEL+" "+U.getLabel(a,1)+u.PERIOD,W.selectedPlaceholder.status=a,W.selectedPlaceholder.statusTranslation=U.getLabel(a)}return t}(e),n=function chooseFieldsToBeSaved(e){var t={};for(var n in e.fields)(null==e.beforeFields[n]||e.beforeFields[n]!==e.fields[n]||u.REQUIRED_FIELDS_TO_BE_SAVED.some((function(e){return n===e})))&&(t[n]=e.fields[n]);return t}(e),o=[];if(e.fields){var r=!1;for(var a in e.fieldSetSchema){var i=e.fieldSetSchema[a],l=e.fields.hasOwnProperty(i.fieldPath)?e.fields[i.fieldPath]:"";if(!0===i.required&&(null==l||""===l)){r=!0,W.selectedPlaceholder.validationErr=!0,W.postScreenreaderAlert(W.labels.REQUIRED_FIELDS,"save-new-placeholder-incomplete-fields",!0,"new-placeholder-alert-div"),W.toggleButtonDisable();break}"DATE"===i.typeApex&&n.hasOwnProperty(i.fieldPath)&&(null==e.fields[i.fieldPath]||""===e.fields[i.fieldPath]?n[i.fieldPath]=null:n[i.fieldPath]=parseInt(e.fields[i.fieldPath])),"DATETIME"===i.typeApex&&n.hasOwnProperty(i.fieldPath)&&(null==e.fields[i.fieldPath]?n[i.fieldPath]=null:n[i.fieldPath]=parseInt(e.fields[i.fieldPath]))}r||(angular.forEach(n,(function(e,t){null!==e&&""!==e||(o.push(t),delete n[t])})),j.publish(LifeCycle.Topics.GlobalActionButtonHandler.SAVE),_.savePlaceholderData(e.recordId,n,o).then((function(n){W.selectedPlaceholder.validationErr=!1,W.savePlaceholderSuccess(n,e,t)}),(function(e){savePlaceholderFailure(e)})))}},W.savePortalRejectionReasons=function savePortalRejectionReasons(e){W.performingAjax=!0;var t=u.REJECTION_REASON_FIELD,n=u.REJECTION_COMMENT_FIELD,o={};o[t]=e.portalRejectionReason,o[n]=e.portalRejectionComment,_.savePortalRejectionReasons(e.recordId,o).then((function(){W.performingAjax=!1,W.showPortalRejectionModal=!1,d.$broadcast(u.SAVED_PORTAL_REJECTION_REASON,e,u.STATUS_EXCEPTION),W.modal.unfocus(),W.modal=null,W.shouldAlertPortalRejection=!0}))},W.searchTextCollapse=function searchTextCollapse(){W.searchText.length>2&&jQuery("#accordion .collapse.in").collapse("hide")},W.selectCategory=function selectCategory(e){if(W.selectedCategories.includes(e)){var t=W.selectedCategories.indexOf(e);W.selectedCategories.splice(t,1)}else W.selectedCategories.push(e);0===W.selectedCategories.length&&filterByCategories()},W.confirmCancelAllESignatureCollections=function confirmCancelAllESignatureCollections(){N.confirmCancelAllESignatureCollections(e)},W.cancelESignatureCollection=function cancelESignatureCollection(){N.cancelESignatureCollection(e,W.placeholdersInCollection),W.closeESigDetailsModal()},W.placeholderPagination=function placeholderPagination(){W.placeHolderPaginationLimit+10<W.totalPlaceholdersCount?W.placeHolderPaginationLimit+=10:W.placeHolderPaginationLimit=W.totalPlaceholdersCount},W.retrieveIsTranslated=function retrieveIsTranslated(){W.performingAjax=!0,I.retrieveIsTranslated().then((function(){null!==I.isTranslated&&(W.isTranslated=I.isTranslated),W.performingAjax=!1}))},W.selectedPlaceholderCount=selectedPlaceholderCount,W.sendESignatures=function sendESignatures(){if(!0===W.eSignPlaceholderSelected)return N.sendESignatureDocuments(W.selectedPlaceholders,W.defaultEsignatureMessage).then((function(t){t?(showSuccessToast(f.E_SIGNATURE_SENT_SUCCESS_MSG),angular.forEach(W.selectedPlaceholders,(function(t,n){t.isSelected&&t.status.toLowerCase()===u.STATUS_SIGNATURE_NEEDED.toLowerCase()&&l.performStatusUpdate(e,t,u.STATUS_SIGNATURE_PENDING)}))):showErrorToast(f.ERROR_MSG),W.modal&&W.closeESigMessageModal()})).catch((function(){W.modal&&W.closeESigMessageModal()})),!0;return!1},W.setShowContextMenu=function setShowContextMenu(e){W.showContextMenu=e},W.showEditDetails=function showEditDetails(e){W.selectedPlaceholder.screenSectionFields=JSON.parse(JSON.stringify(F.formBuilder.fields)),W.selectedPlaceholder.isEditing=!0,W.retrievePlaceholderNames(x.getPlaceholderCategory(e)),W.retrieveIsTranslated(),F.setIsEditing(!0).then((function(){setIsEditVisible(!1),setIsSaveVisible(!0),setIsCancelVisible(!0),j.publish(LifeCycle.Topics.GlobalActionButtonHandler.FIRE_SAVE_WITH_CONTINUE),W.focusEditDetailsForm()}))},W.showEsignatureMessage=function showEsignatureMessage(){if(!0===W.eSignPlaceholderSelected){W.workingModal=!0,document.body.addEventListener("keydown",ignoreTabNavigation);var e=getSelectedPlaceholders();!function placeholdersContainCollectionId(e){for(var t=0;t<e.length;t++)if(e[t].documentCollectionId)return!0;return!1}(e)?renderModal(e):(e=function findAllCollectionIdPlaceholders(e){for(var t=[],n=0;n<I.placeholders.length;n++)I.placeholders[n].documentCollectionId&&e[0].documentCollectionId&&I.placeholders[n].documentCollectionId===e[0].documentCollectionId&&t.push(I.placeholders[n]);return t}(e),w.validateDocumentsForSend(e)?function isCollectionActive(e){var t=b.defer();return _.retrieveActiveDocumentCollections([e]).then((function(e){e&&!e.length?(showErrorToast(f.E_SIGNATURE_INACTIVE_COLLECTION_ID),t.resolve(!1)):t.resolve(!0)})),t.promise}(e[0].documentCollectionId).then((function(t){t?renderModal(e):(W.workingModal=!1,document.body.removeEventListener("keydown",ignoreTabNavigation))})):(W.workingModal=!1,document.body.removeEventListener("keydown",ignoreTabNavigation)))}},W.showESignatureCollectionDetails=function showESignatureCollectionDetails(e,t){W.placeholdersInCollection=[],W.showEsignatureCancelDetails=t,e.documentCollectionId&&angular.forEach(I.placeholders,(function(t,n){t.documentCollectionId&&t.documentCollectionId==e.documentCollectionId&&W.placeholdersInCollection.push(t)}));W.showEsignatureCollectionDetailModal=!0,c(focusESigDetailsModal,100)},W.showExpandedPreview=function showExpandedPreview(e,t,n){if(W.placeholderSelectedForExpandedPreview=e,W.selectedVersion=e.file,t&&e.versions){var o=e.versions.filter((function(e){return e.Id===t}));o&&o.length>0&&(W.selectedVersion=o[0])}e.isExternalReference?window.open(e.externalPreviewUrl):(W.connection=W.connection?W.connection:new jsforce.Connection({accessToken:a.sessionId}),W.expandedFileTitle=W.selectedVersion.fileName,W.displayPreviewBackground=!0,W.isLoadingLargeImage=!0,W.selectedVersion.currentPreviewPage=0,W.selectedVersion.previewUrlCount>-1&&void 0!==W.selectedVersion.previewFormat&&!W.selectedVersion.hasConnectApiError?renderAvailablePreviews(e,W.selectedVersion.previewUrlCount,W.selectedVersion.previewFormat):I.getContentDocumentByVersion(W.selectedVersion.Id,W.selectedVersion.contentDocumentId).then((function(e){var t,n=W.configValues.siteBaseSecureUrl;return t=W.isSite?n+"/services/data/v51.0/connect/files/"+e.Id+"/previews":"/connect/files/"+e.Id+"/previews",W.connection.chatter.resource(t)})).then((function(t){var n=function selectAvailablePreview(e){var t,n={},o={};return e.forEach((function(e){"Available"===e.status?n[e.format]=e:"InProgress"===e.status||"NotScheduled"===e.status?o[e.format]=e:"NotAvailable"===e.status&&(t=e)})),n.hasOwnProperty("Jpg")?n.Jpg:n.hasOwnProperty("Svg")?n.Svg:o.hasOwnProperty("Jpg")?o.Jpg:o.hasOwnProperty("Svg")?o.Svg:n.hasOwnProperty("ThumbnailBig")?n.ThumbnailBig:t}(t.previews);n&&"Available"===n.status?(W.selectedVersion.hasConnectApiError=!1,renderAvailablePreviews(e,n.previewUrlCount,n.format),W.isProcessing=!1,I.setPreviewConfiguration(W.selectedVersion.Id,n.previewUrlCount,n.format).then((function(){W.modalPreview.refreshFocusables(),W.modalPreview.firstFocusable().focus()}))):renderWithoutPreviews(n?n.status:null)}),(function(t){W.isSite&&window.fetch&&!W.selectedVersion.hasFallbackPreviews?function getFallbackPreviews(){W.selectedVersion.hasConnectApiError=!0,W.getPreviews("Jpg").then((function(t){t.count>0?(renderAvailablePreviews(e,t.count,t.format),W.isProcessing=!1):W.getPreviews("Svg").then((function(n){n.count>0?(renderAvailablePreviews(e,n.count,n.format),W.isProcessing=!1):0===n.count&&0===t.count?(renderAvailablePreviews(e,-1,"ThumbnailBig"),W.isProcessing=!1):handlePreviewError()})).catch(handlePreviewError)}))}():W.selectedVersion.hasFallbackPreviews?renderAvailablePreviews(e,W.selectedVersion.previewUrlCount,W.selectedVersion.previewFormat):handlePreviewError()})).catch(handlePreviewError),W.modalExternal=n,W.modalExternal?W.modalExternal.ignoreKeyPresses():W.modal&&W.modal.ignoreKeyPresses(),c((function focusExpandedFilePreview(){W.modalPreview=new q("docManExpandedFilePreview",document.activeElement),W.modalPreview.setFocusables(['button[id="expandedPreviewClose"]',"img[tabindex]",'button[id="expandedPreviewPreviousPage"]','input[id="expandedPreviewCurrentPage"]','button[id="expandedPreviewNextPage"]']),W.modalPreview.setModalEscape((function(){c(W.closeExpandedPreview,100)})),W.modalPreview.focus()}),100));function renderWithoutPreviews(e){"InProgress"===e||"NotScheduled"===e?W.isProcessing=!0:(W.processErrorOccurred=!0,W.enlargedPreviewLink=UniDocMan.IMAGE_EXPANDED_PREVIEW_NOT_AVAILABLE)}function renderAvailablePreviews(e,t,n){W.selectedVersion.currentPreviewPage=1,W.selectedVersion.previewUrlCount=t,W.selectedVersion.previewFormat=n,W.selectedVersion.enlargedPreviewBaseUrl=r.PREVIEW_URLS[n],renderPreview(e,r.CONTENT_PREVIEW_LARGE)}function handlePreviewError(e){renderWithoutPreviews()}},W.changePageBy=function changePageBy(e){var t=W.selectedVersion.currentPreviewPage+e;(function inPreviewRange(e){var t=0,n=W.selectedVersion.previewUrlCount;return t<e==e<=n})(t)&&(W.selectedVersion.hasConnectApiError&&!W.selectedVersion.hasFallbackPreviews&&W.getPreviews(W.selectedVersion.previewFormat).then((function(e){e.count>W.selectedVersion.previewUrlCount&&(W.selectedVersion.previewUrlCount=e.count)})).catch((function(e){})),W.selectedVersion.currentPreviewPage=t,renderPreviewPage(W.placeholderSelectedForExpandedPreview),1==t?W.modalPreview.focusNextFocusable():t==W.selectedVersion.previewUrlCount&&W.modalPreview.firstFocusable().focus())},W.onKeyDown=function onKeyDown(e){13===e.originalEvent.keyCode&&renderPreviewPage(W.placeholderSelectedForExpandedPreview)},W.showMoreComments=function showMoreComments(e){var t=e.commentsLimit;e.commentsLimit+=u.MORE_COMMENTS,setTimeout((function(){document.getElementById(t).focus()}),10),W.postScreenreaderAlert(W.labels.LOADED_OLDER_COMMENTS,"placeholder-comment-loaded")},W.showNewDialog=function showNewDialog(){W.selectedPlaceholder&&W.selectedPlaceholder.isOpen&&jQuery(u.HASH+W.selectedPlaceholder.recordId).collapse("toggle");(function cacheValues(){W.cachedSections=F.screenSections,W.cachedFormBuilder=F.formBuilder.fields,F.formBuilder.fields={},F.screenSections={}})(),W.isNewPlaceholderShown=!0,F.setIsEditing(!0),document.body.addEventListener("keydown",ignoreTabNavigation)},W.showModal=function showModal(e){R.url(e)},W.showRequestDocumentsModal=function showRequestDocumentsModal(){selectedPlaceholderCount()&&(W.viewRequestDocumentsModal=!0,c(focusRequestDocumentsModal,100))},W.requestPortalDocuments=function requestPortalDocuments(){W.toggleButtonDisable();for(var e=selectedPlaceholderCount(),t=[],n={},o=0;o<I.placeholders.length;o++){var r=I.placeholders[o];r.isSelected&&(n={recordId:r.recordId,portalDocName:r.portalDocName,portalDocDescription:r.portalDocDescription},t.push(n))}t.length>0?(W.modal.ignoreKeyPresses(),_.requestPortalDocuments(t).then((function(t){for(var n=0;n<I.placeholders.length;n++){var o=I.placeholders[n];o.isSelected&&(o.portalEnabled=!0)}I.uncheckAllPlaceholders(),W.toggleButtonDisable();var r=e+" ";showSuccessToast(1===e?r+W.labels.PORTAL_DOC_REQUEST_SINGULAR:r+W.labels.PORTAL_DOC_REQUEST_PLURAL),W.closeRequestingDocuments()}))):(W.toggleButtonDisable(),showErrorToast(W.labels.PORTAL_DOC_REQUEST_NONE),W.closeRequestingDocuments())},W.cancelPortalDocuments=function cancelPortalDocuments(){W.placeholdersToBeCancelled.length>0&&(W.modal.ignoreKeyPresses(),_.cancelPortalRequests(W.placeholdersToBeCancelled).then((function(e){for(var t=0;t<I.placeholders.length;t++)I.placeholders[t].isSelected&&(I.placeholders[t].portalEnabled=!1);I.uncheckAllPlaceholders(),W.hideCancelPortalModal()})))},W.cancelPortalModal=function cancelPortalModal(){W.placeholdersToBeCancelled=[];for(var e=0;e<I.placeholders.length;e++)I.placeholders[e].isSelected&&!0===I.placeholders[e].portalEnabled&&W.placeholdersToBeCancelled.push(I.placeholders[e].recordId);if(0===W.placeholdersToBeCancelled.length)return void showErrorToast(W.labels.PORTAL_DOC_BULK_CANCEL_NONE);W.showCancelPortalModal=!0,c(focusCancelPortalModal,100)},W.hideCancelPortalModal=function hideCancelPortalModal(){W.showCancelPortalModal=!1,W.modal.unfocus(),W.modal=null},W.showPortalOptions=function showPortalOptions(){W.showPortalOptionsModal=!0,c(focusPortalOptionsModal,100)},W.showViewerPermissions=function showViewerPermissions(e){W.portalPermissions=null,W.showViewerPermissionsModal=!0,e?W.getPartnerPortalPermissionOptions(e).then((function(){c(focusViewerPermissionsModal,100)})):W.getPartnerPortalPermissionOptions(W.selectedPlaceholder).then((function(){c(focusViewerPermissionsModal,100)}));d.$$postDigest((function(){angular.element(jQuery("#viewerPermissionPicklist")[0]).on("valueChange",(function(e){W.portalPermissions.forEach((t=>{t.selected=!1;for(var n=0;n<e.originalEvent.detail.length&&!t.selected;n++)e.originalEvent.detail[n].value==t.value&&(t.selected=!0)})),c(W.modal.refreshFocusables,10)}))})),document.body.addEventListener("keydown",ignoreTabNavigation)},W.cancelViewerPermissionsUpdate=cancelViewerPermissionsUpdate,W.saveViewerPermissions=function saveViewerPermissions(){W.performingAjax=!0;var e=W.rightClickedPlaceholder?W.rightClickedPlaceholder:W.selectedPlaceholder,t={};W.portalPermissions.forEach((function(e){e.selected&&(t[e.value.trim()]=e.label.trim())})),_.savePlaceholderViewerPerms(e.recordId,t).then((function(t){W.portalPermissions=null,e.viewerRoles=t.viewerRoles,e.viewerGroups=t.viewerGroups,e.viewerProfiles=t.viewerProfiles,W.postScreenreaderAlert(W.labels.PLACEHOLDER_VIEWER_PERMISSION_SAVE_SUCCESSFUL,"viewer-permissions-save-success",!0)}),(function(e){W.portalPermissions=null,savePlaceholderFailure(e)})),W.showViewerPermissionsModal=!1,W.modal.unfocus(),W.modal=null,W.performingAjax=!1},W.showVersionModal=function showVersionModal(){I.setVersionHistory(W.selectedPlaceholder).then((function(){angular.forEach(W.selectedPlaceholder.versions,(function(e,t){I.sendPreviewLinkURLRequest(e.previewLink)})),W.showVersionsModal=!0,c(focusVersionModal,100)}))},W.closeVersionModal=function closeVersionModal(){W.showVersionsModal=!1,W.modal.unfocus(),W.modal=null},W.sortOrder=sortOrder,W.toggleButtonDisable=function toggleButtonDisable(){W.buttonDisabled=!W.buttonDisabled},W.updatePortalRejectionComment=function updatePortalRejectionComment(){W.selectedPlaceholder&&angular.forEach(W.rejectionReasons,(function(e,t){e.reason===W.selectedPlaceholder.portalRejectionReason&&(W.selectedPlaceholder.portalRejectionComment=e.comment)}))},W.updatePlaceholderCount=updatePlaceholderCount,W.setArchivedFiles=setArchivedFiles,W.nameInPlaceholderNames=function nameInPlaceholderNames(e){return W.placeholderNames.indexOf(e)>-1},W.formatCommentDate=function formatCommentDate(e){var t=new Date(e);if(!e||isNaN(t.getTime())||!window.LifeCycle.Internationalize)return e;var n=window.LifeCycle.Internationalize.format(t,"d"),o=window.LifeCycle.Internationalize.format(t,"t");return n+" "+o},W.formatDatetime=function formatDatetime(e){var t=getOffsetDatetime(e);if(!t)return e;return window.LifeCycle.Internationalize.format(t,"d")+" "+window.LifeCycle.Internationalize.format(t,"t")},W.formatDatetimeAsDate=function formatDatetimeAsDate(e){var t=getOffsetDatetime(e);if(!t)return e;return window.LifeCycle.Internationalize.format(t,"d")},W.showBulkUpdateModal=function showBulkUpdateModal(){var e=function getSelectedPlaceholderIds(){for(var e=[],t=[],n=0;n<I.placeholders.length;n++){var o=I.placeholders[n];o.isSelected&&(hasEditAccess(o,!0)||t.push(o),e.push(o.recordId))}if(t.length>0)return function showBulkEditAfterApprovalError(e){for(var t="",n=0;n<e.length;n++)t+="\n\t• "+e[n].name;showErrorToast(W.labels.BULK_UPDATE_AFTER_APPROVAL_DENIED+t)}(t),[];return e}();if(0===e.length)return;W.isLoading=!0,I.getBulkUpdateScreenSectionData(window.DocManId,e).then((function(e){W.isLoading=!1,e&&e.summaryScreenSectionModel&&(W.fieldGridScreenSectionId=e.updateScreenSectionId,W.bulkUpdateRecords=e.summaryScreenSectionModel.records,W.fieldRestrictions=JSON.parse(e.fieldRestrictions))}))},W.onBulkUpdateClosed=function onBulkUpdateClosed(){W.bulkUpdateRecords=[];var e=document.getElementById("docManActionsMenu");e&&e.focus()},W.onBulkUpdateComplete=function onBulkUpdateComplete(){W.isLoading=!0;for(var e=[],t=0;t<W.bulkUpdateRecords.length;t++)e.push(W.bulkUpdateRecords[t].recordId);(function determineChangeOfStatusBulk(){var e=W.getSelectedPlaceholders();I.retrievePlaceholders().then((function(){var t=[];e.forEach((function(e){for(var n,o={},r=new Date,i=0;i<I.placeholders.length;i++){var l=I.placeholders[i];e.recordId==l.recordId&&(e.newPlaceholder=l)}o.old=null==e.exceptionDate?null:new Date(e.exceptionDate),o.new=null==e.newPlaceholder.exceptionDate?null:new Date(e.newPlaceholder.exceptionDate),n=e.newPlaceholder.file&&""!=e.newPlaceholder.file&&(e.newPlaceholder.file.Title||e.newPlaceholder.file.Id),o.new&&(o.new<=r&&e.newPlaceholder.status!=u.STATUS_EXCEPTION?e.newPlaceholder.status=u.STATUS_EXCEPTION:o.new>r&&e.newPlaceholder.status==u.STATUS_EXCEPTION&&(e.newPlaceholder.status=n?u.STATUS_IN_FILE:u.STATUS_OPEN)),e.newPlaceholder.statusTranslation=U.getLabel(e.newPlaceholder.status),a.updatePlaceholderStatus(e.recordId,e.newPlaceholder.status),t.push({recordId:e.recordId,status:{old:e.status,new:e.newPlaceholder.status},exceptionDate:{old:e.exceptionDate,new:e.newPlaceholder.exceptionDate}})})),function postChatterCommentBulk(e){e.forEach((e=>{if(e.newComment="",e.status.old!=e.status.new&&(e.newComment+=V.ssfbBuildStatusChatterComment(e.status.old,e.status.new)),e.exceptionDate.old!=e.exceptionDate.new){var t=e.exceptionDate;t.old=null==t.old?null:l.formatMillisecondsToUTCDate(t.old),t.new=null==t.new?null:l.formatMillisecondsToUTCDate(t.new),e.newComment+=V.ssfbBuildDateChatterComment(null,{originalValue:e.exceptionDate.old,updatedValue:e.exceptionDate.new})}""!=e.newComment&&W.addChatterComment(e,!1)}))}(t)}))})(),I.updateRequirementRemote(e),I.uncheckAllPlaceholders(),W.isLoading=!1},W.showVersionOverwriteModal=function showVersionOverwriteModal(e,t){return W.showOverwriteModal=!0,c(focusDeleteModal,100)},W.prepareForESig=function prepareForESig(){if(w.validateDocuments(I.placeholders)){W.workingModal=!0,document.body.addEventListener("keydown",ignoreTabNavigation);var e=w.getReadyForTaggingCollectionId(I.placeholders);if(e&&""!==e)document.body.removeEventListener("keydown",ignoreTabNavigation),function getESignatureTaggingUrl(e){return _.getESignatureTaggingUrl(e)}(e).then((function(t){if(W.workingModal=!1,t&&""!==t){var n=window.location.origin+t;n+="&documentCollectionId="+e,window.open(n)}}));else{W.workingModal=!1,W.esignUploadInProgress=!0,document.body.removeEventListener("keydown",ignoreTabNavigation),c(focusESigInProgressModal,100);var t=l.getDocStoresFromSelectedPlaceholders(I.placeholders);(function getActiveDocumentCollections(){for(var e=b.defer(),t=[],n=0;n<I.placeholders.length;n++){var o=I.placeholders[n];o.documentCollectionId&&t&&t.indexOf(o.documentCollectionId)<0&&o.status&&isESignActiveStatus(o.status)&&t.push(o.documentCollectionId)}if(0===t.length)return e.resolve([]),e.promise;return _.retrieveActiveDocumentCollections(t).then((function(t){e.resolve(t)})),e.promise})().then((function(e){0===e.length?function createCollection(e){return _.createCollection(e,!0)}(t).then((function(e){(function createVendorCollection(e,t){return _.createVendorCollection(e,t)})(t,e).then((function(e){retrievePlaceholders()})).catch((function(t){_.deleteCollection(e).then((function(){retrievePlaceholders()}))}))})):function associateDocsToCollection(e,t){return _.associateDocsToCollection(e,t)}(t,e[0]).then((function(e){retrievePlaceholders()}))}))}}},W.hasEditAccess=hasEditAccess,W.bulkScreenSectionPostLoad=function bulkScreenSectionPostLoad(e,t,n){var o=F.getPropertyBagObject(W.fieldGridScreenSectionId);Object.keys(o).forEach((function(e){var t=o[e];if(function isRestrictedField(e){return 0!==W.fieldRestrictions.length&&(e&&e.hasOwnProperty("fieldName")&&Object.keys(W.fieldRestrictions).indexOf(e.fieldName)>-1)}(t)){var n=W.fieldRestrictions[t.fieldName];null===n?t.isVisible=!1:t.options&&(t.options=t.options.filter((function(e){return-1===n.indexOf(e.value)})))}}))},W.isESigDetailAvailable=function isESigDetailAvailable(e){return e&&e.status.toUpperCase()!==u.STATUS_SIGNATURE_CANCEL_PENDING.toUpperCase()&&g.isESignLockedPlaceholder(e.status)&&e.documentCollectionId&&W.hasEditPermissions},W.placeholderToEntity=k.placeholderToEntity,W.getPlaceholderContextType=getPlaceholderContextType,W.getFieldSetMetadata=getFieldSetMetadata,W.columnWidths={},W.fieldSetMetadataMap={},W.namespacePrefix=window.UniDocMan.namespacePrefix,W.init=function init(e,n,o,r,i,l,s){t.CATEGORY=e,t.EXCEPTION_DATE=n,t.LAST_MODIFIED_DATE=o,t.NAME=r,t.RELATIONSHIP=i,t.STATUS=l,t.YEAR=s,initializeDynamicVariables(),function activate(){R.url(p.DEFAULT_ROUTE),W.contextObjectType=W.configValues.contextObjectType,W.contextObjectType&&"LLC_BI__Product_Package__c"==W.contextObjectType?a.configureContextObject((function(e){e&&(e.LLC_BI__Product_Package__c?(M.setProductPackageProducts(e),x.updateScreenSections(!0).then((function(e){W.addNewScreenSections=e})),d.$$postDigest((function(){jQuery("#docManProductPackageContainer").on("hide.bs.dropdown",(function(e){document.getElementById("docManProductPackageDropdown").focus()})),jQuery("#docManProductPackageContainer").on("shown.bs.dropdown",(function(e){jQuery("#docManProductPackageContainer > ul > li > input").focus()}))}))):e.Contact&&(window.DocManId=e.Contact)),W.retrieveAndProcessData()})):W.retrieveAndProcessData();jQuery("#placeholderTable").on("show.bs.collapse",(function(e){jQuery("#accordion .collapse.in").collapse("hide"),setIsCancelVisible(!1),setIsSaveVisible(!1),setIsEditVisible(!0);for(var t=0;t<W.totalPlaceholdersCount;t++)if(I.placeholders[t].recordId===e.target.id){I.placeholders[t].isOpen=!0,W.loadPlaceholderDetails(I.placeholders[t],0);break}})),W.documentManagerFileSizeLimit=L.get().systemPropsMap.get(T.UNI_DOCMAN_FILE_SIZE_LIMIT),d.allowedFileExtensions=L.get().systemPropsMap.get(T.ALLOWED_FILE_EXTENSIONS),d.allowedFileExtensions=angular.isString(d.allowedFileExtensions)?d.allowedFileExtensions.split(","):"",jQuery("#placeholderTable").on("hide.bs.collapse",(function(e){if(!e.target.getAttribute("uni-date-picker"))for(var t=0;t<W.totalPlaceholdersCount;t++)if(I.placeholders[t].recordId===e.target.id){I.placeholders[t].isOpen=!1,I.placeholders[t].newComment="",j.publish(LifeCycle.Topics.GlobalActionButtonHandler.CANCEL);break}})),jQuery("#productDropDownSearch").click((function(e){e.stopPropagation()})),jQuery("#accordion").on("shown.bs.collapse",(function(e){setIsCancelVisible(!1),setIsSaveVisible(!1),setIsEditVisible(!0),function scrollTo(e){var t=angular.element(e.target.parentElement),n=angular.element("#accordion");n.animate({scrollTop:n.scrollTop()+t.position().top-35},400)}(e)})),jQuery(window).on("dragover",(function(e){e.preventDefault(),e.stopPropagation()})),jQuery(window).on("drop",(function(e){e.preventDefault(),e.stopPropagation(),d.draggingFromRightNav=!1})),jQuery("#docManActionsMenuContainer").on("hide.bs.dropdown",(function(e){document.getElementById("docManActionsMenu").focus()})),jQuery("#docManActionsMenuContainer").on("shown.bs.dropdown",(function(e){jQuery("#docManActionsMenuContainer li:first-child a").focus()})),jQuery("body").popover({selector:'[id*="portal-toggletip"]',trigger:"focus manual",container:"body",placement:"right",template:'<div class="popover slds-theme--inverse">\n\t\t\t\t\t\t<div class="arrow"></div>\n\t\t\t\t\t\t<h3 class="popover-title"></h3>\n\t\t\t\t\t\t<div class="popover-content"></div>\n\t\t\t\t\t</div>'}),d.$on(u.SHOW_OVERWRITE_MODAL,W.showVersionOverwriteModal),d.$on(u.ERROR_TOAST_SHOWN,W.focusToast),d.$on(u.SET_TOAST,(function(e,t){var n=null==t.label?"Notification":t.label;showToast(t.body,t.type,t.theme,n),t.link&&(W.downloadSubHeading1=f.DOWNLOAD_SUBHEADING_1,W.downloadVersionId=t.link,W.downloadLinkValue=f.DOWNLOAD_LINK_VALUE,W.downloadSubHeading2=f.DOWNLOAD_SUBHEADING_2),c(d.$digest.bind(d))})),d.$on("resizeColumn",(function(e,t){W.columnWidths[t.columnName]=t.columnWidth}))}(),function subscribeToSaveEvent(){j.subscribe(LifeCycle.Topics.GlobalActionButtonHandler.SAVE,(function(){ssfbSave(W.selectedPlaceholder)}))}()},W.savePlaceholderSuccess=function savePlaceholderSuccess(e,t,n){I.copyPlaceholderProperties(e[0],t),t.isEditing=!1,O.clear(),W.toggleButtonDisable(),t.file?t.file.previewLoaded=!0:t.file={previewLoaded:!0,previewLink:""};W.loadPlaceholderDetails(t,500,!0),n&&V.buildChatterCommentForChangedFields(t,W.selectedPlaceholder.beforeFields,(function(e){(n.length>0||e.length>0)&&(t.newComment=n+"  "+e,W.addChatterComment(t)),W.retrieveChatterComments(t)}));I.updateRequirementRemote([t.recordId]),W.selectedPlaceholder.beforeFields=t.fields},W.handlePermissionsKeydown=function handlePermissionsKeydown(e){"Space"!==e.code&&32!==e.keyCode||W.modal.refreshFocusables()},W.closeRequestingDocuments=function closeRequestingDocuments(){W.viewRequestDocumentsModal=!1,W.requestDocumentsEditMode=!1,W.modal.unfocus(),W.modal=null},W.toggleRequestDocumentsEditMode=function toggleRequestDocumentsEditMode(e){W.requestDocumentsEditMode=e,W.modal.ignoreKeyPresses(),c((function(){var t;t=e?"docManToggleEditModeOff":"docManToggleEditModeOn",W.modal.refreshFocusables(),document.querySelector(`button[id="${t}"]`).focus(),W.modal.allowKeyPresses()}),50)},W.clickEventElement=function clickEventElement(e){var t="Space"===e.code||32===e.keyCode,n="Enter"===e.code||13===e.keyCode,o="keydown"===e.type&&(t||n);o&&(c((function(){angular.element(e.target).click()}),1),e.preventDefault());return o},W.closeESigInProgressModal=function closeESigInProgressModal(){W.esignUploadInProgress=!1,W.modal.unfocus(),W.modal=null},W.closeESigMessageModal=function closeESigMessageModal(){W.modal.unfocus(),W.modal=null,W.showEsignatureMessageModal=!1},W.closeESigDetailsModal=function closeESigDetailsModal(){W.modal.unfocus(),W.modal=null,W.showEsignatureCollectionDetailModal=!1},W.renderContextMenu=renderContextMenu,W.focusContextMenu=function focusContextMenu(e,t){var n="Space"===e.code||32===e.keyCode,o="Enter"===e.code||13===e.keyCode,r="keydown"===e.type;("click"===e.type||r&&(n||o))&&(renderContextMenu(e,t),c((function(){W.modal&&(W.modal.unfocus(),W.modal=null),W.modal=new q("placeholderContextMenu",document.activeElement),W.modal.setModalEscape((function(){d.$apply(W.unfocusContextMenu)})),W.modal.focus()}),100))},W.unfocusContextMenu=function unfocusContextMenu(){W.setShowContextMenu(!1),W.modal&&"placeholderContextMenu"==W.modal.modalRootIdentifier&&(W.modal.unfocus(),W.modal=null)},W.focusToast=function focusToast(){setTimeout((function(){var e=document.getElementById("docManToastCloseButton");e||(e=document.getElementById("docManComponentToastCloseButton")),e&&(W.focusedElement=document.activeElement,e.focus())}),300)},W.handleDropdownInputKeydown=function handleDropdownInputKeydown(e){var t=jQuery(e.target),n=null,o=null,r=null,a=null,i=document.activeElement;n=t.parents();for(var l=0;l<n.length&&null==o;l++){(s=jQuery(n[l])).hasClass("dropdown")&&(o=s)}if(o){n=o.find('[class*="dropdown-item"]');for(l=0;l<n.length;l++){var s;if((s=jQuery(n[l])).is(t)){r=jQuery(n[l>0?l-1:n.length-1]),a=jQuery(n[l<n.length-1?l+1:0]);break}}d.$$postDigest((function(){if("Escape"===e.key||27===e.keyCode)o.trigger("click");else if(38===e.keyCode&&null!=r)r.focus();else if(40===e.keyCode&&null!=a)a.focus();else if(("Space"===e.key||32===e.keyCode)&&"INPUT"===i.tagName&&"text"===i.getAttribute("type")||!W.clickEventElement(e)&&!ignoreTabNavigation(e))return;e.preventDefault(),e.stopPropagation()}))}},W.clickDropdown=function clickDropdown(e,t=!0){if(t){for(var n=null,o=jQuery(e.target).parents(),r=0;r<o.length&&null==n;r++){var a=jQuery(o[r]);a.hasClass("dropdown")&&(n=a)}null!=n&&(n.one("hidden.bs.dropdown",(function(){n.find('[data-toggle*="dropdown"]').focus()})),n.one("shown.bs.dropdown",(function(){n.find('[class*="dropdown-item"]')[0].focus()})))}},W.ignoreEnter=function ignoreEnter(e){if("Enter"===e.key||13===e.keyCode)return e.preventDefault(),!0;return!1},W.postScreenreaderAlert=function postScreenreaderAlert(e,t="",n=!1,o="docManAlerter"){var r=document.getElementById(o);if(null==r)return;var a=document.createElement("div"),i=jQuery(`#${o} > div[data-msg-id*="${t}"]`);i=1==i.length?parseInt(i[0].getAttribute("data-msg-repeats")):i.length,n&&(r.innerHTML="");a.id="msg-"+Date.now().toString(),a.setAttribute("data-msg-id",t),a.setAttribute("data-msg-repeats",i+1),a.appendChild(document.createTextNode(e+" ".repeat(i))),r.appendChild(a)},W.getFormattedLabel=function getFormattedLabel(e,t={}){var n=W.labels[e];n&&Object.keys(t).forEach((e=>{n=n.replaceAll(`\${${e}}`,t[e])}));return n},W.focusPlaceholderEditDetailsButton=function focusPlaceholderEditDetailsButton(){c((function(){jQuery("#docManPlaceholderOutputEditDetails").focus()}),10)},W.focusEditDetailsForm=function focusEditDetailsForm(){c((function(){jQuery("#docManPlaceholderOutputSSFBSection nc-screen-section-form-builder").find(":focusable").first().focus()}),10)},W.ignoreTabNavigation=ignoreTabNavigation,W.closeFileExtensionErrorToast=function closeFileExtensionErrorToast(){W.uploadServiceData.showToast=!1,W.focusedElement.focus()},W.closeFileSizeErrorToast=function closeFileSizeErrorToast(){W.uploadServiceData.showSizeToast=!1,W.focusedElement.focus()},W.dismissPortalToggletip=function dismissPortalToggletip(e){"keydown"!==e.type||27!==e.keyCode&&"Escape"!==e.code||jQuery(e.target).popover("hide");e.stopImmediatePropagation()},W.showProductPackageDropdown=function showProductPackageDropdown(){return M.productPackageProducts.length},W.ssfbSave=ssfbSave,W.postLoad=function postLoad(){j.publish(LifeCycle.Topics.GlobalActionButtonHandler.HIDE_SAVE),j.publish(LifeCycle.Topics.GlobalActionButtonHandler.HIDE_CANCEL),j.publish(LifeCycle.Topics.GlobalActionButtonHandler.HIDE_EDIT),function loadLegalEntityCustomField(){addCustomField({fieldName:S.LEGAL_ENTITY.LOAN,templateName:"legal-entity-custom-field-loan",templateParams:{options:W.relationshipOptions}}),addCustomField({fieldName:S.LEGAL_ENTITY.UNIVERSAL,templateName:"legal-entity-custom-field-universal",templateParams:{options:W.relationshipOptions}}),updateLegalEntityFieldDisplayValue()}(),function loadDocTypeCustomField(){addCustomField({fieldName:S.DOCTYPE,templateName:"doc-type-custom-field",templateParams:{}})}(),function loadDocTypeNameCustomField(){addCustomField({referenceFieldPath:P.ACCOUNT.DOCTYPE_NAME,templateName:"doc-type-name-custom-field",templateParams:{}}),addCustomField({referenceFieldPath:P.LOAN.DOCTYPE_NAME,templateName:"doc-type-name-custom-field",templateParams:{}}),addCustomField({referenceFieldPath:P.UNIVERSAL.DOCTYPE_NAME,templateName:"doc-type-name-custom-field",templateParams:{}})}(),function loadNameCustomField(){addCustomField({fieldName:S.NAME,templateName:"name-custom-field",templateParams:{}})}(),document.querySelector("#addNewModal")&&c(focusAddNewModal,500)},W.shouldShowHeader=function shouldShowHeader(e){return x.hasVisibleFields(e)},W.ssfbDetermineChangeOfStatus=function ssfbDetermineChangeOfStatus(e){var t=F.formBuilder.fields,n=x.getFields(["LLC_BI__exceptionDate__c","LLC_BI__Exception_Date__c"],t,!0),o=x.getFields(["LLC_BI__reviewStatus__c","LLC_BI__Review_Status__c"],t,!0),r="",a=new Date,i=new Date(parseInt(n.value));e.file||(e.file={previewLoaded:!1,previewLink:""});if(i<=a&&W.selectedPlaceholder.status!=u.STATUS_EXCEPTION)o.value=u.STATUS_EXCEPTION,r+=V.ssfbBuildStatusChatterComment(W.selectedPlaceholder.status,u.STATUS_EXCEPTION),W.selectedPlaceholder.status=u.STATUS_EXCEPTION,W.selectedPlaceholder.statusTranslation=U.getLabel(u.STATUS_EXCEPTION);else if(i>a&&W.selectedPlaceholder.status==u.STATUS_EXCEPTION){var l=u.STATUS_OPEN;(e.file.Title||e.file.Id)&&(l=u.STATUS_IN_FILE),o.value=l,r+=V.ssfbBuildStatusChatterComment(u.STATUS_EXCEPTION,l),W.selectedPlaceholder.status=l,W.selectedPlaceholder.statusTranslation=U.getLabel(l)}return r},W.getCustomFields=function getCustomFields(){return W.customFields},W.setCategoryNameDisplayValue=setCategoryNameDisplayValue,W.customFields=[],W.addNewScreenSections=[],W.fetchPreviewData=function fetchPreviewData(e,t,n){return fetch(e+t.count).then((function(o){return 200===o.status&&t.count<n?(t.count++,fetchPreviewData(e,t,n)):o.status>=400?(t.count>0&&(W.selectedVersion.hasFallbackPreviews=!0),t):t})).catch((function(e){return t}))},W.getPreviews=function getPreviews(e){var t=W.selectedVersion.previewUrlCount>-1?W.selectedVersion.previewUrlCount:0,n=W.selectedVersion.previewFormat?W.selectedVersion.previewFormat:e,o="Svg"===n?"SVGZ":"JPGZ",r={format:n,count:t},a=function buildPagePreviewRequest(e,t){var n=W.configValues.siteBaseSecureUrl+"/sfc/servlet.shepherd/version/renditionDownload?rendition=";return n+=t+"&versionId="+e+"&page=",n}(W.selectedVersion.Id,o);return W.fetchPreviewData(a,r,t+3).then((function(e){return e})).catch((function(e){return previewDataResponse}))},W.isEditVisible=!0,W.isSaveVisible=!1,W.isCancelVisible=!1,W.isSite=""!==W.configValues.siteBaseSecureUrl,W.fileUploadedWhileFormInDirtyState=!1,W.setFileUploadState=function setFileUploadState(){W.isSaveVisible&&W.isCancelVisible&&(W.fileUploadedWhileFormInDirtyState=!0)},W.deactivateLegacyFilters=function deactivateLegacyFilters(){W.isFilterByCategories=!1,W.selectedCategories=[]},W.getPartnerPortalPermissionOptions=function getPartnerPortalPermissionOptions(e){var t=b.defer(),n=W.permissionService.getViewerPermissions(e);W.portalPermissions||(W.portalPermissions=[],_.getPlaceholderPermOptions().then((function(e){processPermOptions(e,n),t.resolve(W.portalPermissions)})));return t.promise},W.processPermOptions=processPermOptions,W.portalPermissions=null,W.actionService=H,W.getSelectedPlaceholders=getSelectedPlaceholders,W.focusedElement=null}angular.module("app").controller("PlaceholderController",PlaceholderController),PlaceholderController.$inject=["$scope","COLUMNS","FILE_RECORD_TYPES","LEFT_NAV_FILTER_HEADERS","FILE","dataService","browserDetectService","commonService","uploadService","$timeout","$rootScope","CONSTANTS","ALERT_DIALOG","ROUTES","NEW_OPTIONS","CATEGORY_FIELD","permissionService","PERMISSIONS","TOAST_TYPES","SYSTEM_PROPERTIES","FIELD_NAMES","REFERENCE_PATHS","universalDocManRemotingService","defaultDownloadService","downloadService","fileStagingService","placeholderService","eSignatureService","eSignaturePreparationService","messageService","config","$location","$q","productPackageService","labels","navigator","screenSection","ndsFormService","chatterService","ssfbService","filterService","pubsub","$filter","categoryService","actionService","Modal"]}()},9505:()=>{!function(){"use strict";function StatusController(e,t,n,o,r,a){this.updatePlaceholderStatus=function updatePlaceholderStatus(t,o){o===a.STATUS_EXCEPTION&&t.portalEnabled?e.controller.initializePortalRejectionModal(t):n.performStatusUpdate(e,t,o)},this.canOpenStatusDropdown=function canOpenStatusDropdown(e){var t=o.hasEditAfterApprovalPermission("UNI_REVIEW_DOCUMENTS",e.status),n=r.statusLists[e.statusListValue];return t&&n.length>0},function activate(){t.$$listeners[a.SAVED_PORTAL_REJECTION_REASON]||t.$on(a.SAVED_PORTAL_REJECTION_REASON,(function(t,o,r){n.performStatusUpdate(e,o,r)}));t.$$listeners[a.UPDATE_PLACEHOLDER_STATUS]||t.$on(a.UPDATE_PLACEHOLDER_STATUS,(function(t,o,r){n.performStatusUpdate(e,o,r)}))}()}angular.module("app").controller("StatusController",StatusController),StatusController.$inject=["$scope","$rootScope","commonService","permissionService","placeholderService","CONSTANTS"]}()},8760:()=>{!function(){"use strict";angular.module("app").provider("docManConfig",(function Config(){var e=this;function replaceAll(e,t,n){return e.replace(new RegExp(t.replace(/[-\/\\^$*+?.()|[\]{}]/g,"\\$&"),"g"),n)}function htmlDecodeRecursive(e){if("string"==typeof e||e instanceof String)return function htmlDecode(e){e=replaceAll(e,"\\'","'"),e=replaceAll(e,"\\&quot;",'"'),e=replaceAll(e,"\\\\","\\");var t={amp:"&",lt:"<",gt:">",quot:'"'};return e.replace(/&(#(?:x[0-9a-f]+|\d+)|[a-z]+);?/gi,(function(e,n){return"#"===n[0]?String.fromCharCode("x"===n[1].toLowerCase()?parseInt(n.substr(2),16):parseInt(n.substr(1),10)):t.hasOwnProperty(n)?t[n]:e}))}(e);for(var t in e)e.hasOwnProperty(t)&&(e[t]=htmlDecodeRecursive(e[t]));return e}e.config={},e.$get=function(t){return{get:function(){return e.config}}},e.set=function(t){e.config=angular.merge(e.config,t)},e.setHtmlEncoded=function(t){for(var n in t)t.hasOwnProperty(n)&&(e.config[n]=htmlDecodeRecursive(t[n]))}}))}()},9871:()=>{!function(){"use strict";angular.module("app").provider("labels",(function Labels(){var e=this;e.labels={},e.$get=function(){return{getLabels:function(){return e.labels},getLabel:function(t,n){var o=t.replace(/-|\s/g,"_").toUpperCase(),r=e.labels[o];return null==r&&(r=t),1==n&&(r=r.toUpperCase()),r},setLabels:function(t){return angular.merge(e.labels,t)}}},e.setLabels=function(t){e.labels=angular.merge(e.labels,t)}}))}()},9479:()=>{!function(){"use strict";function RightNavController(e,t,n,o,r,a,i,l,s,c,d,u,f,p){var E=this;function initializeDynamicVariables(){E.relationships=[],E.selectedRelationship=null,E.selectedRelationshipPlaceholders=[],E.noSelectedRelationshipPlaceholders=!0,E.pledgedCollateral=[],E.selectedCollateral=null,E.selectedCollateralPlaceholders=[],E.noSelectedCollateralPlaceholders=!0,E.isLoaded=!1,E.rightNavDisplay="",E.draggingFiles=!1,E.disableDraggingPromise=null,r.archivedFiles=[]}function focusRightNavFileStaging(){E.modal=new u("rightNavTableFileStaging",document.activeElement),E.modal.focus()}function focusRightNavRelationships(){E.modal=new u("rightNavRelationshipTable",document.activeElement),E.modal.focus()}function focusRightNavCollateral(){E.modal=new u("rightNavCollateralTable",document.activeElement),E.modal.focus()}E.archive=n.ARCHIVE,E.relationship=n.RELATIONSHIP,E.fileStaging=n.FILE_STAGING,E.collateral=n.COLLATERAL,E.showPermanentDeleteModal=!1,E.placeholderToBeDeleted=null,E.rightNavIsBusy=!1,E.fileStagingService=i,E.configValues=d.get(),E.labels=p.getLabels(),E.modal=null,E.FILE_STAGING_ALERT_ID="docManAlerterFS",E.toggleRelationship=function toggleRelationship(n){E.selectedRelationship=n,E.rightNavSearchText="",E.selectedRelationshipPlaceholders=[],E.noSelectedRelationshipPlaceholders=!0,t.retrieveDocumentsWithAttachmentsForSpecifiedId(n.accountId,(function(t){t.length>0?s.prepareForUrls(t).then((function(){E.selectedRelationshipPlaceholders=t,e.$$postDigest((function(){E.modal.refreshFocusables(),E.modal.allowKeyPresses()}))})):e.$apply((function(){E.selectedRelationshipPlaceholders=t,E.noSelectedRelationshipPlaceholders=!1,E.modal.refreshFocusables(),E.modal.allowKeyPresses()}))}),null)},E.togglePledgedCollateral=function togglePledgedCollateral(n){E.selectedCollateral=n,E.rightNavSearchText="",E.selectedCollateralPlaceholders=[],E.noSelectedCollateralPlaceholders=!0,n&&t.retrieveDocumentsWithAttachmentsForSpecifiedId(n.collateralId,(function(t){t.length>0?s.prepareForUrls(t).then((function(){E.selectedCollateralPlaceholders=t,e.$$postDigest((function(){E.modal.refreshFocusables(),E.modal.allowKeyPresses()}))})):e.$apply((function(){E.selectedCollateralPlaceholders=t,E.noSelectedCollateralPlaceholders=!1,E.modal.refreshFocusables(),E.modal.allowKeyPresses()}))}),null)},E.toggleRightNav=function toggleRightNav(e){if(!E.rightNavIsBusy){E.rightNavIsBusy=!0;var t=!1,n=!1;return E.rightNavDisplay===e&&(t=!0),E.rightNavDisplay=e,E.isLoaded?t?(E.rightNavDisplay="",E.isLoaded=!1,E.rightNavIsBusy=!1,E.modal&&(E.modal.unfocus(),E.modal=null)):(n=!0,E.rightNavIsBusy=!1):(n=!0,E.isLoaded=!0,E.rightNavIsBusy=!1),n?(null!=E.modal&&(E.modal.unfocus(),E.modal=null),E.initiateRemoteCallToRetrieveRightNavData()):null}},E.archiveFromFileStaging=function archiveFromFileStaging(n){E.modal.ignoreKeyPresses();var o=E.fileStagingService.stagedFiles.indexOf(n);a.archivePlaceholderFromFileStaging(n.recordId).then((function(){var n=E.modal.getNextFocusable();e.$evalAsync((function(){E.fileStagingService.stagedFiles.remove(E.fileStagingService.stagedFiles[o])})),f((function(){E.modal.allowKeyPresses(),E.modal.refreshFocusables(),n.focus()}),100),E.postScreenreaderAlert(E.labels.ARCHIVE_FILE_SUCCESS,"file-archive-success",!1,E.FILE_STAGING_ALERT_ID),t.retrieveArchivedDocumentsWithAttachments((function(e){s.prepareForUrls(e).then((function(){r.archivedFiles=e}))}))}))},E.initiateRemoteCallToRetrieveRightNavData=function initiateRemoteCallToRetrieveRightNavData(){if(E.rightNavSearchText="",E.rightNavDisplay===E.relationship){if(E.relationships=[],E.configValues.contextObjectType===o.CONTEXT_OBJECT_TYPE_PRODUCT_PACKAGE&&c.selectedProductInProductPackage.objectType===o.CONTEXT_OBJECT_TYPE_PRODUCT_PACKAGE){var e=[];angular.forEach(c.productPackageProducts,(function(t,n){a.retrieveLegalEntities(t.recordId).then((function(t){angular.forEach(t,(function(t,n){t&&t.accountId&&e.indexOf(t.accountId)<0&&(e.push(t.accountId),E.relationships.push(t))})),setTimeout(focusRightNavRelationships,100)}))}))}else a.retrieveLegalEntities(window.DocManId).then((function(e){e&&(E.relationships=e),setTimeout(focusRightNavRelationships,100)}));E.isLoaded=!0}if(E.rightNavDisplay===E.collateral){E.pledgedCollateral=[];var n=[];E.configValues.contextObjectType===o.CONTEXT_OBJECT_TYPE_PRODUCT_PACKAGE&&c.selectedProductInProductPackage.objectType===o.CONTEXT_OBJECT_TYPE_PRODUCT_PACKAGE?angular.forEach(c.productPackageProducts,(function(e,t){e.objectType===o.CONTEXT_OBJECT_TYPE_LOAN&&n.push(e.recordId)})):n.push(window.DocManId),a.retrieveMultiplePledgedCollateral(n).then((function(e){e&&e.length>0&&(E.pledgedCollateral=e),f(focusRightNavCollateral,100)}))}E.rightNavDisplay===E.archive&&t.retrieveArchivedDocumentsWithAttachments((function(e){s.prepareForUrls(e).then((function(){r.archivedFiles=e,E.isLoaded=!0}))}));if(E.rightNavDisplay===E.fileStaging)return i.retrieveFileStagingPlaceholders().then((function(){E.isLoaded=!0,f(focusRightNavFileStaging,100)}));return null},E.initializeDynamicVariables=initializeDynamicVariables,E.permanentlyDelete=function permanentlyDelete(e){E.showPermanentDeleteModal=!0,E.placeholderToBeDeleted=e},E.cancelDelete=function cancelDelete(){E.showPermanentDeleteModal=!1,E.placeholderToBeDeleted=null},E.confirmDelete=function confirmDelete(){!function deletePlaceholderIndex(n){t.deletePlaceholderIndex(n.recordId,(function(){e.$apply((function(){var e=r.archivedFiles.indexOf(n);r.archivedFiles.splice(e,1),E.placeholderToBeDeleted=null,E.showPermanentDeleteModal=!1}))}),null)}(E.placeholderToBeDeleted)},E.addFileFromLeftNav=function addFileFromLeftNav(){E.isLoaded||E.toggleRightNav(E.fileStaging)},E.toggleAllPlaceholders=function toggleAllPlaceholders(){var t=e.$parent.controller,n=[];n=!e.toggleState||t.totalPlaceholdersCount>t.placeHolderPaginationLimit&&!t.searchText&&!t.placeholderFilterValue?t.placeholderService.placeholders:e.filteredPlaceholders;angular.forEach(n,(function(t,n){l.hasRequiredViewerAccess(t)&&(t.isSelected=e.toggleState)}))},E.closeRightNav=function closeRightNav(){""!==E.rightNavDisplay&&E.toggleRightNav(E.rightNavDisplay)},E.expandAccordion=function expandAccordion(e){var t="Space"===e.code||32===e.keyCode,n="Enter"===e.code||13===e.keyCode;"keydown"===e.type&&(t||n)&&(E.modal.ignoreKeyPresses(),f((function(){angular.element(e.target).click()}),1));e.preventDefault()},E.postScreenreaderAlert=function postScreenreaderAlert(e,t="",n=!1,o="docManAlerter"){angular.element('[ng-controller*="PlaceholderController"]').controller().postScreenreaderAlert(e,t,n,o)},jQuery("#rightNavRelationshipTable").on("show.bs.collapse",(function(e){e.target.getAttribute("uni-date-picker")||angular.forEach(E.relationships,(function(t,n){t.accountId===e.target.id?(t.isOpen=!0,E.toggleRelationship(t)):(t.isOpen=!1,jQuery(o.HASH+t.accountId).removeClass(o.IN_CLASS))}))})),jQuery("#rightNavCollateralTable").on("show.bs.collapse",(function(e){e.target.getAttribute("uni-date-picker")||angular.forEach(E.pledgedCollateral,(function(t,n){t.recordId===e.target.id?(t.isOpen=!0,E.togglePledgedCollateral(t)):(t.isOpen=!1,jQuery(o.HASH+t.recordId).removeClass(o.IN_CLASS))}))})),jQuery("#rightNavRelationshipTable").on("hide.bs.collapse",(function(t){if(!t.target.getAttribute("uni-date-picker")){for(var n=0;n<E.relationships.length;n++)if(E.relationships[n].accountId==t.target.id){e.$apply((function(){E.relationships[n].isOpen=!1}));break}E.modal.refreshFocusables(),E.modal.allowKeyPresses()}})),jQuery("#rightNavCollateralTable").on("hide.bs.collapse",(function(t){if(!t.target.getAttribute("uni-date-picker")){for(var n=0;n<E.pledgedCollateral.length;n++)if(E.pledgedCollateral[n].recordId==t.target.id){e.$apply((function(){E.pledgedCollateral[n].isOpen=!1}));break}E.modal.refreshFocusables(),E.modal.allowKeyPresses()}})),r.$on(o.FILE_STAGING_UPLOAD_COMPLETE,(function(){r.$evalAsync(E.modal.refreshFocusables)})),initializeDynamicVariables()}angular.module("app").controller("RightNavController",RightNavController),RightNavController.$inject=["$scope","dataService","SECTION","CONSTANTS","$rootScope","universalDocManRemotingService","fileStagingService","permissionService","placeholderService","productPackageService","config","Modal","$timeout","labels"]}()},2808:()=>{!function(){"use strict";function browserDetectService(e,t){return{detectIE:function detectIE(){var e=window.navigator.userAgent,t=e.indexOf("MSIE ");if(t>0)return parseInt(e.substring(t+5,e.indexOf(".",t)),10);if(e.indexOf("Trident/")>0){var n=e.indexOf("rv:");return parseInt(e.substring(n+3,e.indexOf(".",n)),10)}var o=e.indexOf("Edge/");if(o>0)return parseInt(e.substring(o+5,e.indexOf(".",o)),10);return!1}}}angular.module("app").service("browserDetectService",browserDetectService),browserDetectService.$inject=["CONSTANTS","$q"]}()},8901:()=>{!function(){"use strict";function categoryService(e,t,n,o){return{fetchCategories:function fetchCategories(){var o=e.defer();return n.retrieveCategories().then((function(e){var n=[{id:"",name:t.getLabels().NONE_OPTION}];if(e){for(var r=0;r<Object.keys(e).length;r++){var a=e[r];n=n.concat(processCategories(a))}(n=n.slice(1)).sort(alphabetizeByName)}o.resolve(n)})),o.promise},fetchAdHocCategories:function fetchAdHocCategories(){return n.retrieveAdhocCategories()}};function processCategories(e){var t=[];for(var n in e)e.hasOwnProperty(n)&&(e[n]=JSON.parse(e[n]),t.push({id:n,name:e[n].category,viewerGroups:e[n].viewerGroups,viewerRoles:e[n].viewerRoles,viewerProfiles:e[n].viewerProfiles}));return t}function alphabetizeByName(e,t){var n=e.name?e.name.toUpperCase():"",o=t.name?t.name.toUpperCase():"",r=0;return n<o&&(r=-1),n>o&&(r=1),r}}angular.module("app").service("categoryService",categoryService),categoryService.$inject=["$q","labels","dataService","permissionService"]}()},5188:()=>{!function(){"use strict";function chatterService(e,t,n,o){return{ssfbBuildChatterCommentForChangedFields:function ssfbBuildChatterCommentForChangedFields(n,o,r){var a="",i=["LLC_BI__date__c","LLC_BI__Date__c"],l=["LLC_BI__exceptionDate__c","LLC_BI__Exception_Date__c"],s=e.getFields(i,n.screenSectionFields,!0),c=e.getFields(i,o,!0),d=e.getFields(l,n.screenSectionFields,!0),u=e.getFields(l,o,!0),f=null,p=null;s.value!==c.value&&(f={originalValue:t.formatMillisecondsToUTCDate(s.value),updatedValue:t.formatMillisecondsToUTCDate(c.value)});d.value!==u.value&&(p={originalValue:t.formatMillisecondsToUTCDate(d.value),updatedValue:t.formatMillisecondsToUTCDate(u.value)});a+=ssfbBuildDateChatterComment(f,p),r(a)},ssfbBuildDateChatterComment,ssfbBuildStatusChatterComment:function ssfbBuildStatusChatterComment(e,t){return" "+o.getLabels().STATUS_CHANGED_FROM+" "+o.getLabel(e,1)+" "+o.getLabels().TO_LABEL+" "+o.getLabel(t,1)+n.PERIOD},buildChatterCommentForChangedFields:function buildChatterCommentForChangedFields(e,r,a){var i="",l=null,s=null,c=null,d=null;e.apexType.indexOf("LoanDocument")>-1||e.apexType.indexOf("AccountDocument")>-1?(s=t.formatMillisecondsToUTCDate(e.fields.LLC_BI__date__c),l=t.formatMillisecondsToUTCDate(r.LLC_BI__date__c),d=t.formatMillisecondsToUTCDate(e.fields.LLC_BI__exceptionDate__c),c=t.formatMillisecondsToUTCDate(r.LLC_BI__exceptionDate__c)):(s=t.formatMillisecondsToUTCDate(e.fields.LLC_BI__Date__c),l=t.formatMillisecondsToUTCDate(r.LLC_BI__Date__c),d=t.formatMillisecondsToUTCDate(e.fields.LLC_BI__Exception_Date__c),c=t.formatMillisecondsToUTCDate(r.LLC_BI__Exception_Date__c));!l&&s?i=o.getLabels().DATE+" "+s+" "+o.getLabels().WAS_ADDED:l&&!s?i=o.getLabels().DATE+" "+l+" "+o.getLabels().WAS_REMOVED+n.PERIOD:l&&s&&l!=s&&(i=o.getLabels().DATE_CHANGED_FROM+" "+l+" "+o.getLabels().TO_LABEL+" "+s+n.PERIOD);!c&&d?i+=" "+o.getLabels().EXCEPTION_DATE+" "+d+" "+o.getLabels().WAS_ADDED:c&&!d?i+=" "+o.getLabels().EXCEPTION_DATE+" "+c+" "+o.getLabels().WAS_REMOVED+n.PERIOD:c&&d&&c!=d&&(i+=" "+o.getLabels().EXCEPTION_DATE_CHANGED_FROM+" "+c+" "+o.getLabels().TO_LABEL+" "+d+n.PERIOD);a(i)}};function ssfbBuildDateChatterComment(e,t){var r="";return e&&(r=null===e.originalValue||void 0===e.originalValue?o.getLabels().DATE+" "+e.updatedValue+" "+o.getLabels().WAS_ADDED+n.PERIOD:null===e.updatedValue||void 0===e.updatedValue?o.getLabels().DATE+" "+e.originalValue+" "+o.getLabels().WAS_REMOVED+n.PERIOD:o.getLabels().DATE_CHANGED_FROM+" "+e.originalValue+" "+o.getLabels().TO_LABEL+" "+e.updatedValue+n.PERIOD),t&&(null===t.originalValue||void 0===t.originalValue?r+=" "+o.getLabels().EXCEPTION_DATE+" "+t.updatedValue+" "+o.getLabels().WAS_ADDED:null===t.updatedValue||void 0===t.updatedValue?r+=" "+o.getLabels().EXCEPTION_DATE+" "+t.originalValue+" "+o.getLabels().WAS_REMOVED+n.PERIOD:r+=" "+o.getLabels().EXCEPTION_DATE_CHANGED_FROM+" "+t.originalValue+" "+o.getLabels().TO_LABEL+" "+t.updatedValue+n.PERIOD),r}}angular.module("app").service("chatterService",chatterService),chatterService.$inject=["ssfbService","commonService","CONSTANTS","labels"]}()},9012:()=>{!function(){"use strict";function commonService(e,t,n,o,r,a,i,l,s,c,d,u,f,p){var E=f.getLabels(),m={updatePlaceholderProperties:function updatePlaceholderProperties(e,t,n,o){e.file=n,d.convertPropertyNamesFromCamelCase([e]),e.file.ContentSize&&(e.file.Size=e.file.ContentSize);e.file.ParentId&&(e.documentStoreId=e.file.ParentId);e.accountId=o,d.setStatuses(e),e.uploadingFile=!1,t(e)},uploadProgress:function uploadProgress(e,t,n){e.uploadingFile||(e.uploadingFile=!0);e.uploadProgress=n||Math.floor(t.loaded/t.total*100);100==e.uploadProgress&&setTimeout((function(){e.uploadingFile=!1}),1200)},getDataTransfer:function getDataTransfer(e){return e.dataTransfer||e.originalEvent.dataTransfer},createFileStagingPlaceholder:function createFileStagingPlaceholder(n,a,i,l){c.createFileStagingPlaceholder().then((function(s){var u=s[0];o.stagedFiles.push(u),u.uploadingFile||(u.uploadingFile=!0),u.fileUploadingText=E.UPLOADING+" "+n.name+r.THREE_PERIODS,d.uploadingToPlaceholder=u,t.uploadContentDocument(n,a,(function(t){if(i.$parent.controller.postScreenreaderAlert(u.fileUploadingText,"file-new-uploading-file",!0,"docManAlerterFS"),u.uploadingFile=!1,e.$broadcast(r.FILE_STAGING_UPLOAD_COMPLETE),!0===t.isExternal)return o.retrieveFileStagingPlaceholders().then((function(){})),void(l&&l());c.createDocumentStorageMetadata(t.id,u.recordId,null,d.generateFileMetadata(u,n)).then((function(e){u.file=e,d.prepareForUrls([u]).then((function(){l&&l()}))}))}),(function(e,t,n){i.$apply((function(){u.uploadingFile=!1,console.log(e),console.log(t),console.log(n)}))}),(function(e){i.$apply((function(){u.uploadingFile||(u.uploadingFile=!0),u.uploadProgress=Math.floor(e.loaded/e.total*100)}))}))}))},getDateFieldNames,formatDateFieldsForDisplay:function formatDateFieldsForDisplay(e,t){for(var n=0;n<t.length;n++){var o=t[n];e[o]&&(e[o]=convertMillisecondsToDate(e[o]))}},formatDateFieldsForInput:function formatDateFieldsForInput(e,t){for(var n=getDateFieldNames(t),o=0;o<n.length;o++){var r=n[o];e.fields[r]&&(e.fields[r]=formatUTCDateToMilliseconds(new Date(e.fields[r])))}},formatMillisecondsToUTCDate:function formatMillisecondsToUTCDate(e){if(!e)return"";return e=parseInt(e),window.LifeCycle.Internationalize.format(new Date(parseInt(e)),"zzz")},formatUTCDateToMilliseconds,checkForExistingContentDocument:function checkForExistingContentDocument(e){var t=s.defer(),n=null;e.ParentId&&(n=e.ParentId);null!=n?c.isDocStoreShared(n).then((function(e){!0===e&&(n=null),t.resolve([null,n])})):t.resolve([null,n]);return t.promise},performStatusUpdate:function performStatusUpdate(e,t,o){if(t&&o){var a=t.status,i=document.getElementById("status-btn-"+t.recordId);setElementOpacity(i,"0.5"),n.updatePlaceholderStatus(t.recordId,o,(function(){var i;o!=a&&(i=E.STATUS_CHANGED_FROM+" "+f.getLabel(a,1)+" "+E.TO_LABEL+" "+f.getLabel(o,1)+r.PERIOD),o.translation===f.getLabel(r.STATUS_EXCEPTION)&&t.portalEnabled&&(i+=" "+E.PORTAL_REJECTION_REASON_CHANGED+" "+t.portalRejectionReason+" "+E.PORTAL_REJECTION_COMMENT_CHANGED+" "+t.portalRejectionComment+r.DOUBLE_QUOTE+r.PERIOD),t.newComment&&(i+="  "+t.newComment),t.newComment=i,c.savePlaceholderData(t.recordId,null,null).then((function(o){!function retrievePlaceholderWithFields(e,t,o){var a=document.getElementById("status-btn-"+t.recordId);n.retrievePlaceholderWithFields(t.recordId,(function(i){n.retrievePlaceholderFieldSet(t.recordId,(function(n){e.$apply((function(){m.setExceptionDates(i),t.fieldSetSchema=JSON.parse(n),t.fields=i,t.status!==f.getLabel(r.STATUS_EXCEPTION)&&angular.forEach(r.EXCEPTION_DATE_FIELDS,(function(e,n){t.fields[n]&&(t.fields[n]=null)})),e.controller.retrieveChatterComments(e.controller.selectedPlaceholder)})),setElementOpacity(a,"1.0")}),(function(){setElementOpacity(a,"1.0"),t.status=o}))}),(function(){t.status=o}))}(e,t,a),d.copyPlaceholderProperties(o[0],t),e.controller.addChatterComment(t),e.controller.shouldAlertPortalRejection&&(e.controller.postScreenreaderAlert(e.controller.labels.PLACEHOLDER_PORTAL_REJECTION_SAVE_SUCCESSFUL,"portal-reject-save-success",!0),e.controller.shouldAlertPortalRejection=!1),t.file?t.file.previewLoaded=!0:t.file={previewLoaded:!0,previewLink:""},d.setStatuses(t)}))}),(function(){setElementOpacity(i,"1.0"),t.status=a}))}},copyToClipboard:function copyToClipboard(t){var n=!1;if(window.clipboardData&&window.clipboardData.setData)n=clipboardData.setData("Text",t);else if(document.queryCommandSupported&&document.queryCommandSupported("copy")){var o=document.createElement("textarea");o.textContent=t,o.style.position="fixed",document.body.appendChild(o),o.select();try{n=document.execCommand("copy")}finally{document.body.removeChild(o)}}var l=angular.element("button.slds-notify__close");l.css("opacity",0);var s=i.ERROR,c=a.THEME_ERROR,d=a.COPY_ERROR_MSG;n&&(s=i.SUCCESS,c=a.THEME_SUCCESS,d=a.LINK_COPY_SUCCESS_MSG);e.$broadcast(r.SET_TOAST,{type:s,theme:c,body:d}),setTimeout((function(){l.click().css("opacity",1)}),1500)},normalizeCompare:function normalizeCompare(e,t){if(e.length&&t.length)return e.toLowerCase()==t.toLowerCase();return!1},setElementOpacity,convertMillisecondsToDate,addOffsetAndConvertToDateTime:function addOffsetAndConvertToDateTime(e){return convertMillisecondsToDateTime(function applyAggregateOffset(e,t){return window.LifeCycle.Internationalize.timeZoneUtil.applyAggregateOffset(e,t)}("add",e))},convertMillisecondsToDateTime,getDocStoresFromSelectedPlaceholders:function getDocStoresFromSelectedPlaceholders(e){for(var t=[],n=0;n<e.length;n++)e[n].isSelected&&t.push(e[n].documentStoreId);return t},getChatterStatusChangeComment:function getChatterStatusChangeComment(e,t,n){var o=e+" "+E.WAS_ADDED+r.PERIOD;t&&t!==n&&(o+=" "+E.STATUS_CHANGED_FROM+" "+f.getLabel(t,1)+" "+E.TO_LABEL+" "+f.getLabel(n,1)+r.PERIOD);return o},setExceptionDates:function setExceptionDates(e){var t=p.formBuilder.fields;angular.forEach(t,(function(n,o){var a=t[o];if(a)for(var i=0;i<a.length;i++){var l=a[i];l.fieldName==r.EXCEPTION_DATE_FIELDS[0]?p.formBuilder.fields[o][i].value=e[r.EXCEPTION_DATE_FIELDS[0]]:l.fieldName==r.EXCEPTION_DATE_FIELDS[1]&&(p.formBuilder.fields[o][i].value=e[r.EXCEPTION_DATE_FIELDS[1]])}}))}};return m;function getDateFieldNames(e){for(var t=[],n=0;n<e.length;n++)e[n].type===r.DATE_TYPE&&t.push(e[n].fieldPath);return t}function formatUTCDateToMilliseconds(e){return new Date(e).getTime()}function convertMillisecondsToDate(e){return e?(e+=6e4*new Date(e).getTimezoneOffset(),new String(new Date(parseInt(e))).replace('"',"")):null}function convertMillisecondsToDateTime(e){return e?new String(new Date(parseInt(e))).replace('"',""):null}function setElementOpacity(e,t){e&&(e.style.opacity=t)}}angular.module("app").service("commonService",commonService),commonService.$inject=["$rootScope","uploadService","dataService","fileStagingService","CONSTANTS","ALERT_DIALOG","TOAST_TYPES","$filter","$q","universalDocManRemotingService","placeholderService","config","labels","screenSection"]}()},9003:()=>{!function(){"use strict";function dataService(e,t){var n=this;return n.config=t.get(),n.namespacePrefix=n.config.namespacePrefix?n.config.namespacePrefix.replace("__","."):"nDOC.",{addChatterComment:function addChatterComment(e,t,o,r){return Visualforce.remoting.Manager.invokeAction(n.namespacePrefix+"UniversalDocManController.addChatterComment",e,t,(function(e,t){t.status?o.apply(this,[e]):(UniDocMan.dispatchErrorEvent(t.type,t.message,t.where),r&&r.apply(this,[t,e]))}),{escape:!1,buffer:!1})},addNewPlaceholder:function addNewPlaceholder(e,t,o){return Visualforce.remoting.Manager.invokeAction(n.namespacePrefix+"PlaceholderDataController.addNewPlaceholder",window.DocManId,e,(function(e,n){n.status?t.apply(this,[e]):(UniDocMan.dispatchErrorEvent(n.type,n.message,n.where),o.apply(this,[n,e]))}),{escape:!1,buffer:!1})},configureContextObject:function configureContextObject(e,t){return Visualforce.remoting.Manager.invokeAction(n.namespacePrefix+"UniversalDocManController.configureContextObject",n.config.contextIdPageParam,(function(n,o){o.status?e.apply(this,[n]):(UniDocMan.dispatchErrorEvent(o.type,o.message,o.where),t.apply(this,[o,n]))}),{escape:!1,buffer:!1})},createFileStagingPlaceholder:function createFileStagingPlaceholder(e,t){return Visualforce.remoting.Manager.invokeAction(n.namespacePrefix+"UniversalDocManController.createFileStagingPlaceholder",window.DocManId,(function(n,o){o.status?e.apply(this,[n]):(UniDocMan.dispatchErrorEvent(o.type,o.message,o.where),t.apply(this,[o,n]))}),{escape:!1,buffer:!1})},deletePlaceholder:function deletePlaceholder(e,t,o){return Visualforce.remoting.Manager.invokeAction(n.namespacePrefix+"UniversalDocManController.deletePlaceholder",window.DocManId,e,(function(e,n){n.status?t.apply(this,[e]):(UniDocMan.dispatchErrorEvent(n.type,n.message,n.where),o&&o.apply(this,[n,e]))}),{escape:!1,buffer:!1})},deletePlaceholderIndex:function deletePlaceholderIndex(e,t,o){return Visualforce.remoting.Manager.invokeAction(n.namespacePrefix+"UniversalDocManController.deletePlaceholderIndex",window.DocManId,e,(function(e,n){n.status?t.apply(this,[e]):(UniDocMan.dispatchErrorEvent(n.type,n.message,n.where),o.apply(this,[n,e]))}),{escape:!1,buffer:!1})},dispatchErrorEvent:UniDocMan.dispatchErrorEvent,duplicatePlaceholder:function duplicatePlaceholder(e,t,o){return Visualforce.remoting.Manager.invokeAction(n.namespacePrefix+"UniversalDocManController.duplicatePlaceholder",window.DocManId,e,(function(e,n){n.status?t.apply(this,[e]):(UniDocMan.dispatchErrorEvent(n.type,n.message,n.where),o.apply(this,[n,e]))}),{escape:!1,buffer:!1})},getNamespacePrefix:function getNamespacePrefix(e,t){return Visualforce.remoting.Manager.invokeAction(n.namespacePrefix+"UniversalDocManController.getNamespacePrefix",(function(n,o){o.status?e.apply(this,[n]):(UniDocMan.dispatchErrorEvent(o.type,o.message,o.where),t.apply(this,[o,n]))}),{escape:!1,buffer:!1})},retrieveArchivedDocumentsWithAttachments:function retrieveArchivedDocumentsWithAttachments(e,t){return Visualforce.remoting.Manager.invokeAction(n.namespacePrefix+"UniversalDocManController.retrieveArchivedDocumentsWithAttachments",window.DocManId,(function(n,o){o.status?e.apply(this,[n]):(UniDocMan.dispatchErrorEvent(o.type,o.message,o.where),t.apply(this,[o,n]))}),{escape:!1,buffer:!1})},retrieveCategories:function retrieveCategories(){var t=e.defer();return Visualforce.remoting.Manager.invokeAction(n.namespacePrefix+"PlaceholderDataController.retrieveCategories",window.DocManId,(function(e,n){n.status?t.resolve([e]):(UniDocMan.dispatchErrorEvent(n.type,n.message,n.where),t.reject([n,e]))}),{escape:!1,buffer:!1}),t.promise},retrieveChatterComments:function retrieveChatterComments(e,t,o){return Visualforce.remoting.Manager.invokeAction(n.namespacePrefix+"UniversalDocManController.retrieveChatterComments",e,(function(e,n){n.status?t.apply(this,[e]):(UniDocMan.dispatchErrorEvent(n.type,n.message,n.where),o.apply(this,[n,e]))}),{escape:!1,buffer:!1})},retrieveDocumentsWithAttachmentsForSpecifiedId:function retrieveDocumentsWithAttachmentsForSpecifiedId(e,t,o){return Visualforce.remoting.Manager.invokeAction(n.namespacePrefix+"UniversalDocManController.retrieveDocumentsWithAttachments",e,(function(e,n){n.status?t.apply(this,[e]):(UniDocMan.dispatchErrorEvent(n.type,n.message,n.where),o.apply(this,[n,e]))}),{escape:!1,buffer:!1})},retrieveFileStagingPlaceholders:function retrieveFileStagingPlaceholders(e,t){return Visualforce.remoting.Manager.invokeAction(n.namespacePrefix+"UniversalDocManController.retrieveFileStagingPlaceholders",window.DocManId,(function(n,o){o.status?e.apply(this,[n]):(UniDocMan.dispatchErrorEvent(o.type,o.message,o.where),t.apply(this,[o,n]))}),{escape:!1,buffer:!1})},retrievePlaceholderFieldSet:function retrievePlaceholderFieldSet(e,t,o){return Visualforce.remoting.Manager.invokeAction(n.namespacePrefix+"PlaceholderDataController.retrievePlaceholderFieldSet",e,(function(e,n){n.status?t.apply(this,[e]):(UniDocMan.dispatchErrorEvent(n.type,n.message,n.where),o.apply(this,[n,e]))}),{escape:!1,buffer:!1})},retrievePlaceholderWithFields:function retrievePlaceholderWithFields(e,t,o){return Visualforce.remoting.Manager.invokeAction(n.namespacePrefix+"PlaceholderDataController.retrievePlaceholderWithFields",e,(function(e,n){n.status?t.apply(this,[e]):(UniDocMan.dispatchErrorEvent(n.type,n.message,n.where),o.apply(this,[n,e]))}),{escape:!1,buffer:!1})},retrieveClosingChecklistNamesByCategory:function retrieveClosingChecklistNamesByCategory(t){var o=e.defer();return Visualforce.remoting.Manager.invokeAction("nFORCE.RemoteActionController.invoke",n.namespacePrefix+"UniDocManRemoteActionController.RetrieveClosingChecklistByDocType",{Id:t},(function(e,t){t.status?o.resolve(e):(UniDocMan.dispatchErrorEvent(t.type,t.message,t.where),o.reject(t.message))}),{escape:!1,buffer:!1}),o.promise},retrieveUserAssignedPermissions:function retrieveUserAssignedPermissions(e,t){return Visualforce.remoting.Manager.invokeAction(n.namespacePrefix+"UniversalDocManController.retrieveUserAssignedPermissions",(function(n,o){o.status?e.apply(this,[n]):(UniDocMan.dispatchErrorEvent(o.type,o.message,o.where),t.apply(this,[o,n]))}),{escape:!1,buffer:!1})},sessionId:window.UniDocMan.sessionId,updateAccountOnPlaceholder:function updateAccountOnPlaceholder(e,t,o,r){return Visualforce.remoting.Manager.invokeAction(n.namespacePrefix+"UniversalDocManController.updateAccountOnPlaceholder",e,t,window.DocManId,(function(e,t){t.status?o.apply(this,[e]):(UniDocMan.dispatchErrorEvent(t.type,t.message,t.where),r.apply(this,[t,e]))}),{escape:!1,buffer:!1})},updateFileTitle:function updateFileTitle(e,t,o,r,a){return Visualforce.remoting.Manager.invokeAction(n.namespacePrefix+"UniversalDocManController.updateFileTitle",e,t,o,(function(e,t){t.status?r.apply(this,[e]):(UniDocMan.dispatchErrorEvent(t.type,t.message,t.where),a.apply(this,[t,e]))}),{escape:!1,buffer:!1})},updatePlaceholderStatus:function updatePlaceholderStatus(e,t,o,r){return Visualforce.remoting.Manager.invokeAction(n.namespacePrefix+"PlaceholderDataController.updatePlaceholderStatus",e,t,(function(e,t){t.status?o&&o.apply(this,[e]):(UniDocMan.dispatchErrorEvent(t.type,t.message,t.where),r&&r.apply(this,[t,e]))}),{escape:!1,buffer:!1})},retrieveAdhocCategories:function retrieveAdhocCategories(){var t=e.defer();return Visualforce.remoting.Manager.invokeAction("nFORCE.RemoteActionController.invoke",n.namespacePrefix+"PlaceholderDataController.RetriveAdHocCategories",{contextId:window.DocManId,userLicense:n.config.userLicenseType,userProfile:n.config.userProfileName,userRole:UniDocMan.getUserRoleName(),userGroups:JSON.stringify(n.config.userGroupsList)},(function(e,n){n.status?t.resolve(e):(UniDocMan.dispatchErrorEvent(n.type,n.message,n.where),t.reject(n.message))}),{escape:!1,buffer:!1}),t.promise},emitAnalyticsEvent:function emitAnalyticsEvent(t,o,r){var a=e.defer();return Visualforce.remoting.Manager.invokeAction("nFORCE.RemoteActionController.invoke",n.namespacePrefix+"AnalyticsEmitterRemote.Emit",{args:JSON.stringify(t)},(function(e,t){t.status?a.resolve(e):(UniDocMan.dispatchErrorEvent(t.type,t.message,t.where),a.reject(t.message))}),{escape:!1,buffer:!1}),a.promise}}}angular.module("app").service("dataService",dataService),dataService.$inject=["$q","config"]}()},586:()=>{!function(){"use strict";function defaultDownloadService(e,t,n,o,r,a,i){return{downloadMultipleFiles:function downloadMultipleFiles(e){var a=[],i=[];(function retrievePlaceholdersWithAttachments(e,t,o){angular.forEach(e,(function(e,r){e.isSelected&&e.file&&(e.file.RecordType===n.ATTACHMENT?t.push(e):e.file.RecordType===n.FILE&&o.push(e))}))})(e,a,i),function downloadContent(e){var n=r.defer();if(e.length>0){var a={},i={},l="";angular.forEach(e,(function(e,t){e.file.Id&&(l+=e.file.Id+"/")})),function createContentDocumentDownloadTitles(e,t,n){angular.forEach(e,(function(e,o){t[e.file.Id]=generateDownloadTitle(e),n[e.file.Id]=e.file.Title}))}(e,a,i),o.renameMultipleContentDocuments(a).then((function(){l=l.substring(0,l.length-1),function initiateContentDocumentDownload(e,n){window.open(t.CONTENT_DOWNLOAD_URL+n).addEventListener("unload",(function(){o.renameMultipleContentDocuments(e)}),!0)}(i,l)}))}return n.resolve(),n.promise}(i).then(function downloadAttachments(e){angular.forEach(e,(function(e){updateFileTitleAndDownload(e.file.Id,generateDownloadTitle(e),!1,getDownloadLink(t.ATTACHMENT_DOWNLOAD_URL,e.file.Id,e.downloadAsPDF),e.file.Title)}))}(a))},downloadVersion:function downloadVersion(e,n){window.open(getDownloadLink(t.CONTENT_DOWNLOAD_URL,e,n))},getDownloadLink,executeDownload:function executeDownload(e){var n;e.file.RecordType===t.ATTACHMENT?updateFileTitleAndDownload(e.file.Id,generateDownloadTitle(e),!1,getDownloadLink(t.ATTACHMENT_DOWNLOAD_URL,e.file.Id,e.downloadAsPDF),e.file.Title):e.file.Id&&!e.isDocumentExternal?updateFileTitleAndDownload(n=e.file.Id,generateDownloadTitle(e),!0,getDownloadLink(t.CONTENT_DOWNLOAD_URL,n,e.downloadAsPDF),e.file.Title):e.isDocumentExternal?window.open(e.file.externalDownloadUrl):o.getContentDocumentLink(e.file.ParentId).then((function(o){updateFileTitleAndDownload(n=o.ContentDocument.LatestPublishedVersionId,generateDownloadTitle(e),!0,getDownloadLink(t.CONTENT_DOWNLOAD_URL,n,e.downloadAsPDF),e.file.Title)}))},updateFileTitleAndDownload};function updateFileTitleAndDownload(t,n,o,r,a){e.updateFileTitle(t,n,o,(function(){window.setTimeout((function(){window.open(r).addEventListener("unload",(function(){e.updateFileTitle(t,a,o,(function(){}))}),!0)}),1e3)}))}function generateDownloadTitle(e){if(1==a.get().systemPropsMap.get(i.DOCUMENT_DOWNLOAD_NAME_KEY))return e.file.Title;var n=e.name;return e.year&&(n+=t.DASH+e.year),n+=e.file.Title.substring(e.file.Title.lastIndexOf(t.PERIOD))}function getDownloadLink(e,n,o){var r=e+n;return o&&(r+=t.AS_PDF),r}}angular.module("app").service("defaultDownloadService",defaultDownloadService),defaultDownloadService.$inject=["dataService","FILE","FILE_RECORD_TYPES","universalDocManRemotingService","$q","config","SYSTEM_PROPERTIES"]}()},5322:()=>{!function(){"use strict";function eSignatureNotificationService(e){var t=this;t.pendingUpdates=0,t.updateThrottle,function registerESignatureNotification(){UniDocMan.esignatureNotification||(UniDocMan.esignatureNotification=function(n){var o=!1;if(n&&n.data&&n.data.sobject)for(var r=n.data.sobject.LLC_BI__Document_Store__c,a=0;a<e.placeholders.length;a++)e.placeholders[a].documentStoreId===r&&(o=!0);o&&function throttleRetrievePlaceholders(){t.pendingUpdates?(t.pendingUpdates++,clearTimeout(t.updateThrottle),t.updateThrottle=setTimeout(e.retrievePlaceholders().then((function(){t.pendingUpdates--})),500)):(t.pendingUpdates++,e.retrievePlaceholders().then((function(){t.pendingUpdates--})))}()})}()}angular.module("app").service("eSignatureNotificationService",eSignatureNotificationService),eSignatureNotificationService.$inject=["placeholderService"]}()},7791:()=>{!function(){"use strict";function eSignaturePreparationService(e,t,n,o,r){return{fireErrorMessage,validateDocuments,validateDocumentsForSend:function validateDocumentsForSend(e){return validateDocuments(e)&&function validateCollectionIds(e){var t={};if(e)for(var n=0;n<e.length;n++)checkStatusForSend(e[n],t),Object.keys(t).length||checkCollectionForSend(e[0],e[n],t);if(Object.keys(t).length)return fireErrorMessage(t),!1;return!0}(e)},getReadyForTaggingCollectionId:function getReadyForTaggingCollectionId(e){var n=[t.STATUS_SIGNATURE_NEEDED.toLowerCase(),t.STATUS_SIGNATURE_READY_TO_TAG.toLowerCase()],o=e.filter((function(e){return e.isSelected&&e.documentCollectionId&&!e.docPrepPrepared&&-1!==n.indexOf(e.status.toLowerCase())}));if(!o||0===o.length)return"";var r=o[0].documentCollectionId;return 0===e.filter((function(e){return e.documentCollectionId&&e.documentCollectionId===r&&-1===n.indexOf(e.status.toLowerCase())||e.isSelected&&!e.documentCollectionId})).length?r:""}};function validateDocuments(e){for(var t={},n=!1,o=0;o<e.length;o++){var r=e[o];r.isSelected&&(n=!0,checkFileSize(r,t),checkStatus(r,t),checkExtension(r,t),checkDocPrepPrepared(r,t))}return Object.keys(t).length?(fireErrorMessage(t),!1):n}function checkFileSize(e,t){e.fileSize>=r.ESIGNATURE_MAX_FILE_SIZE&&(t[e.name]||(t[e.name]=[]),t[e.name].push(n.E_SIGNATURE_FILE_SIZE_EXCEEDED))}function checkStatus(e,o){var r=[t.STATUS_IN_FILE.toLowerCase(),t.STATUS_SIGNATURE_NEEDED.toLowerCase(),t.STATUS_SIGNATURE_READY_TO_TAG.toLowerCase()];e.status&&-1!==r.indexOf(e.status.toLowerCase())||(o[e.name]||(o[e.name]=[]),o[e.name].push(n.E_SIGNATURE_STATUS_ERROR))}function checkExtension(e,o){var r=t.ESIGNATURE_ALLOWED_FILE_TYPES;e.file.FileExtension&&-1!==r.indexOf(e.file.FileExtension.toLowerCase())||(o[e.name]||(o[e.name]=[]),o[e.name].push(n.E_SIGNATURE_FILE_TYPE_ERROR))}function checkDocPrepPrepared(e,t){e.docPrepPrepared&&(t[e.name]||(t[e.name]=[]),t[e.name].push(n.E_SIGNATURE_DOC_PREP_ERROR))}function checkStatusForSend(e,o){e.status&&e.status.toLowerCase()===t.STATUS_SIGNATURE_NEEDED.toLowerCase()||(o[e.name]||(o[e.name]=[]),o[e.name].push(n.E_SIGNATURE_SEND_STATUS_ERROR))}function checkCollectionForSend(e,t,o){e.documentCollectionId&&t.documentCollectionId&&e.documentCollectionId===t.documentCollectionId||(o[t.name]||(o[t.name]=[]),o[t.name].push(n.E_Signature_Different_Collection_Error))}function fireErrorMessage(r){e.$broadcast(t.SET_TOAST,{type:o.ERROR,theme:n.THEME_ERROR,body:formatErrorMessage(r)})}function formatErrorMessage(e){for(var t="",n=Object.keys(e),o=0;o<n.length;o++){for(var r=e[n[o]],a=0;a<r.length;a++)t+=0===a?n[o]+": "+r[a]:" "+r[a]+" ";n[o+1]&&(t+="\n\n")}return t}}angular.module("app").service("eSignaturePreparationService",eSignaturePreparationService),eSignaturePreparationService.$inject=["$rootScope","CONSTANTS","ALERT_DIALOG","TOAST_TYPES","FILE"]}()},8846:()=>{!function(){"use strict";function eSignatureService(e,t,n,o,r,a,i,l,s,c){return{sendESignatureDocuments,cancelAllESignatureCollections,cancelESignatureCollection:function cancelESignatureCollection(n,o){var r=s.ERROR,a=l.THEME_ERROR,i=l.ERROR_MSG;o[0]&&o[0].documentCollectionId&&(cancelCollectionAndUpdateStatus(o[0].documentCollectionId,o,n),r=s.SUCCESS,a=l.THEME_SUCCESS,i=l.E_SIGNATURE_CANCEL_SENT_SUCCESS_MSG);e.$broadcast(t.SET_TOAST,{type:r,theme:a,body:i})},confirmCancelAllESignatureCollections:function confirmCancelAllESignatureCollections(t){e.alert={isRendered:!0,theme:l.THEME_WARNING,label:{heading:l.E_SIGNATURE_CANCEL_LABEL,message:l.E_SIGNATURE_CONFIRM_CANCEL,confirm:l.E_SIGNATURE_YES_CANCEL_BTN,cancel:l.E_SIGNATURE_NO_CANCEL_BTN},confirm:function(n){if(e.alert.isRendered=!1,n)return cancelAllESignatureCollections(t)}}},resendESignature:function resendESignature(n){e.alert={isRendered:!0,theme:l.THEME_WARNING,label:{heading:l.E_SIGNATURE_SEND_LABEL,message:l.E_SIGNATURE_CONFIRM_RESEND,confirm:l.OK_BTN,cancel:l.CANCEL_BTN},confirm:function(o){e.alert.isRendered=!1,o&&sendESignatureDocuments(n).then((function(n){var o=s.ERROR,r=l.THEME_ERROR,a=l.ERROR_MSG;n&&(o=s.SUCCESS,r=l.THEME_SUCCESS,a=l.E_SIGNATURE_SENT_SUCCESS_MSG),e.$broadcast(t.SET_TOAST,{type:o,theme:r,body:a})}))}}},getESignatureNonActiveStatuses:function getESignatureNonActiveStatuses(){return[t.STATUS_SIGNATURE_CANCEL_PENDING.toUpperCase(),t.STATUS_SIGNATURE_EXCEPTION.toUpperCase(),t.STATUS_SIGNATURE_PENDING.toUpperCase(),t.STATUS_SIGNED.toUpperCase()]}};function sendESignatureDocuments(e,o){for(var r,a=[],i=c.defer(),l=!1,s=0;s<e.length;s++){var d=e[s];d.isSelected&&d.status&&d.status.toLowerCase()===t.STATUS_SIGNATURE_NEEDED.toLowerCase()&&(a.push(d.documentStoreId),l=d.docPrepPrepared,r=d.documentCollectionId)}return l?n.createCollection(a).then((function(n){n?i=sendCollection(i,e,n,o):i.reject(t.ERROR_EVENT)})):r?i=sendCollection(i,e,r,o):i.reject(t.ERROR_EVENT),i.promise}function sendCollection(e,o,r,a){return n.sendCollection(r,a).then((function(n){n?(angular.forEach(o,(function(e,n){e.isSelected&&e.status&&e.status.toLowerCase()===t.STATUS_SIGNATURE_NEEDED.toLowerCase()&&(e.documentCollectionId=r)})),e.resolve(t.SENT)):e.reject(t.ERROR_EVENT)})),e}function cancelCollectionAndUpdateStatus(e,r,a){a.controller&&(a.controller.showEsignatureCollectionDetailModal=!1),n.cancelSignatureCollection(e).then((function(e){e&&angular.forEach(r,(function(n){i.isESigPendingCanceledException(n.status)&&angular.forEach(e,(function(e){n.documentStoreId===e&&o.performStatusUpdate(a,n,t.STATUS_SIGNATURE_CANCEL_PENDING)}))}))}))}function cancelAllESignatureCollections(o){var r=[];angular.forEach(a.placeholders,(function(e){r.push(e.documentStoreId)})),n.getCollectionIds(r).then((function(n){var r=s.ERROR,i=l.THEME_ERROR,c=l.ERROR_MSG;n&&(angular.forEach(n,(function(e){cancelCollectionAndUpdateStatus(e,a.placeholders,o)})),r=s.SUCCESS,i=l.THEME_SUCCESS,c=l.E_SIGNATURE_CANCEL_SENT_SUCCESS_MSG),e.$broadcast(t.SET_TOAST,{type:r,theme:i,body:c})}))}}angular.module("app").service("eSignatureService",eSignatureService),eSignatureService.$inject=["$rootScope","CONSTANTS","universalDocManRemotingService","commonService","eSignatureNotificationService","placeholderService","permissionService","ALERT_DIALOG","TOAST_TYPES","$q"]}()},5737:()=>{!function(){"use strict";function fileStagingService(e,t,n){var o=this;return o.service={stagedFiles:[],retrieveFileStagingPlaceholders:function retrieveFileStagingPlaceholders(){var r=e.defer();return t.retrieveFileStagingPlaceholders((function(e){n.prepareForUrls(e).then((function(){o.service.stagedFiles=e,r.resolve()}))})),r.promise}},o.service}angular.module("app").service("fileStagingService",fileStagingService),fileStagingService.$inject=["$q","dataService","placeholderService"]}()},4471:()=>{!function(){"use strict";angular.module("app").service("ndsFormService",(function ndsFormService(){function normalizeAttributes(e){for(var t={},n=Object.keys(e),o=0,r=n.length;o<r;o++){var a=n[o],i=e[a];if("[object Object]"===Object.prototype.toString.call(i))for(var l=Object.keys(i),s=0,c=l.length;s<c;s++){var d=l[s];t[a+"."+d]=i[d]}else t[a]=e[a]}return t}return{adjustFieldSetMetadata:function adjustFieldSetMetadata(e){for(var t=0,n=e.length;t<n;t++){var o=e[t];"BOOLEAN"===o.fieldType&&(o.showToggle=!1)}return e},placeholderToEntity:function placeholderToEntity(e){return{identity:e.recordId,attributes:normalizeAttributes(e.fields)}},normalizeAttributes}}))}()},6298:()=>{!function(){"use strict";function permissionService(e,t,n,o,r,a,i,l){var s=this;s.configValues=l.get();var c=[],d=!1,u=!1,f=!1,p=!1,E=!1,m=!1,g=!1,h=!1,v=!1,T=!1,S=!1,P=!1,_=!1,C=!1,D=!1,A=!1,I=!1,N=!1,w=!1,O=!1,L=!1,R=!1,b=!1,M=!1,U=!1,y=!1,F=!1,k=!1,V=!1,x=!1;return s.userRoleName="",s.userProfileName="",s.userLicenseType="",s.userGroupsList=[],s.userDocTypes=null,{hasCollateralImport:function hasCollateralImport(){return x},hasDeleteFilesPermission,hasDeletePlaceholderPermission,hasEditAfterApprovalPermission:function hasEditAfterApprovalPermission(e,t,n){if((!isESignLockedPlaceholder(t)||n)&&(t!=o.STATUS_APPROVED||p))return hasPermission(s.configValues.contextObjectType,e);return!1},hasEditDetailsAndCreatePlaceholderPermission,hasEditDetailsPermission,hasPermission,hasPortalAdminPermission,hasPrepareForESignature:function hasPrepareForESignature(){return(v||E)&&O},hasProductPackageLevelPermission,hasRelationshipImport:function hasRelationshipImport(){return V},hasUniGrantViewerPermission:k,hasRequiredRole,hasRequiredViewerAccess:function hasRequiredViewerAccess(e){var t=[];if(null!=e){if(!function hasRequiredDocType(e){if(null==s.userDocTypes)return!0;var t=e?e.trim().toLowerCase():e;return 0!==s.userDocTypes.length&&s.userDocTypes.indexOf(t)>-1}(e.category))return!1;null!=e.viewerGroups&&e.viewerGroups.trim().length>0&&t.push(function hasRequiredGroup(e){if(!s.userGroupsList)return!1;for(var t=0;t<s.userGroupsList.length;t++)if(checkListForString(e,s.userGroupsList[t].toLowerCase().trim()))return!0;return!1}(e.viewerGroups)),null!=e.viewerProfiles&&e.viewerProfiles.trim().length>0&&t.push(function hasRequiredProfile(e){return checkListForString(e,s.userProfileName)}(e.viewerProfiles)),null!=e.viewerRoles&&e.viewerRoles.trim().length>0&&t.push(hasRequiredRole(e.viewerRoles))}for(var n=0;n<t.length;n++)if(t[n])return!0;if(isDefaultExternalPermissionsEnabled()&&isExternalUser())return!1;return 0===t.length},getViewerPermissions:function getViewerPermissions(e){var t=[];null!=e.viewerGroups&&e.viewerGroups.trim().length>0&&(t=t.concat(getListFromString(e.viewerGroups)));null!=e.viewerProfiles&&e.viewerProfiles.trim().length>0&&(t=t.concat(getListFromString(e.viewerProfiles)));null!=e.viewerRoles&&e.viewerRoles.trim().length>0&&(t=t.concat(getListFromString(e.viewerRoles)));return t},hasReviewDocumentsPermission,initialize:function initialize(t){(function retrieveImportPermissions(){V=l.get().systemPropsMap.get(r.RELATIONSHIP_IMPORT_KEY),x=l.get().systemPropsMap.get(r.COLLATERAL_IMPORT_KEY)})(),setUserGroupsList(s.configValues.userGroupsList),setUserProfileName(s.configValues.userProfileName),setUserLicenseType(s.configValues.userLicenseType),setUserDocTypes(s.configValues.userDocTypes),angular.forEach(t,(function(t,n){var o=t;switch(this.push(t),o){case e.APPROVED:!0;break;case e.EDIT:!0;break;case e.EMPTY_STAGING:!0;break;case e.UPLOAD:!0;break;case e.UNI_CREATE_PLACEHOLDER_NAME:d=!0;break;case e.UNI_UPDATE_PLACEHOLDER_NAME:u=!0;break;case e.UNI_EDIT_AFTER_APPROVAL:p=!0;break;case e.UNI_EDIT_AND_CREATE_PLACEHOLDERS:E=!0;break;case e.UNI_EDIT_AND_CREATE_LOAN_PLACEHOLDERS:m=!0;break;case e.UNI_EDIT_AND_CREATE_TREASURY_PLACEHOLDERS:g=!0;break;case e.UNI_EDIT_AND_CREATE_DEPOSIT_PLACEHOLDERS:h=!0;break;case e.UNI_EDIT_DETAILS:v=!0;break;case e.UNI_EDIT_LOAN_DETAILS:T=!0;break;case e.UNI_EDIT_TREASURY_DETAILS:S=!0;break;case e.UNI_EDIT_DEPOSIT_DETAILS:P=!0;break;case e.UNI_DELETE:f=!0;break;case e.UNI_DELETE_LOAN_FILES:_=!0;break;case e.UNI_DELETE_TREASURY_FILES:C=!0;break;case e.UNI_DELETE_DEPOSIT_FILES:D=!0;break;case e.UNI_PORTAL_ADMIN:U=!0;break;case e.UNI_LOAN_PORTAL_ADMIN:y=!0;break;case e.UNI_DEPOSIT_PORTAL_ADMIN:F=!0;break;case e.UNI_PREPARE_FOR_E_SIGNATURE:O=!0;break;case e.UNI_REVIEW_DOCUMENTS:L=!0;break;case e.UNI_REVIEW_LOAN_DOCUMENTS:R=!0;break;case e.UNI_REVIEW_TREASURY_DOCUMENTS:b=!0;break;case e.UNI_REVIEW_DEPOSIT_DOCUMENTS:M=!0;break;case e.UNI_DELETE_PLACEHOLDERS:A=!0;break;case e.UNI_DELETE_LOAN_PLACEHOLDERS:w=!0;break;case e.UNI_DELETE_DEPOSIT_PLACEHOLDERS:N=!0;break;case e.UNI_DELETE_TREASURY_PLACEHOLDERS:I=!0;break;case e.UNI_GRANT_VIEWER_PERMISSIONS:k=!0}}),c)},isESigPendingCanceledException:function isESigPendingCanceledException(e){var t=e?e.toUpperCase():"";return[o.STATUS_SIGNATURE_CANCEL_PENDING.toUpperCase(),o.STATUS_SIGNATURE_PENDING.toUpperCase(),o.STATUS_SIGNATURE_EXCEPTION.toUpperCase()].indexOf(t)>-1},isDefaultExternalPermissionsEnabled,isESignLockedPlaceholder,isExternalUser,isLockedPlaceholder:function isLockedPlaceholder(e){return isESignLockedPlaceholder(e)},notHaveViewingRole:function notHaveViewingRole(e){return!hasRequiredRole(e)},setUserGroupsList,setUserProfileName,setUserRoleName:function setUserRoleName(e){null!=e&&(s.userRoleName=e.toLowerCase().trim())},setUserDocTypes,setUserLicenseType};function setUserGroupsList(e){s.userGroupsList=e}function setUserProfileName(e){s.userProfileName=e.toLowerCase().trim()}function setUserLicenseType(e){null!=e&&(s.userLicenseType=e.toLowerCase().trim())}function setUserDocTypes(e){if(null!=e){s.userDocTypes=[];for(var t=0;t<e.length;t++)s.userDocTypes.push(e[t].trim().toLowerCase())}else s.userDocTypes=null}function hasPermission(e,t){return e===o.CONTEXT_OBJECT_TYPE_PRODUCT_PACKAGE&&null!=i.selectedProductInProductPackage&&(e=i.selectedProductInProductPackage.objectType)===o.CONTEXT_OBJECT_TYPE_PRODUCT_PACKAGE?hasProductPackageLevelPermission(t):evaluatePermission(e,t)}function evaluatePermission(e,n){if(n===t.UNI_EDIT_AND_CREATE_PLACEHOLDERS)return hasEditDetailsAndCreatePlaceholderPermission(e);if(n===t.UNI_EDIT_DETAILS)return hasEditDetailsPermission(e);if(n===t.UNI_DELETE)return hasDeleteFilesPermission(e);if(n===t.UNI_PORTAL_ADMIN)return hasPortalAdminPermission(e);if(n===t.UNI_REVIEW_DOCUMENTS)return hasReviewDocumentsPermission(e);if(n===t.UNI_DELETE_PLACEHOLDERS)return hasDeletePlaceholderPermission(e);switch(n){case t.UNI_CREATE_PLACEHOLDER_NAME:return d;case t.UNI_UPDATE_PLACEHOLDER_NAME:return u;case t.UNI_GRANT_VIEWER_PERMISSIONS:return k;default:return!1}}function hasProductPackageLevelPermission(e){for(var t=!1,n=i.productPackageProducts,o=0;o<n.length;o++)if(evaluatePermission(n[o].objectType,e)){t=!0;break}return t}function hasDeletePlaceholderPermission(e){return!!e&&(!!A||(e===o.CONTEXT_OBJECT_TYPE_ACCOUNT?w||I||N:e===o.CONTEXT_OBJECT_TYPE_LOAN||e===o.CONTEXT_OBJECT_TYPE_COLLATERAL?w:e===o.CONTEXT_OBJECT_TYPE_TREASURY?I:e===o.CONTEXT_OBJECT_TYPE_DEPOSIT&&N))}function hasEditDetailsAndCreatePlaceholderPermission(e){return!!e&&(!!E||(e===o.CONTEXT_OBJECT_TYPE_ACCOUNT?E||m||h||g:e===o.CONTEXT_OBJECT_TYPE_LOAN||e===o.CONTEXT_OBJECT_TYPE_COLLATERAL?m:e===o.CONTEXT_OBJECT_TYPE_TREASURY?g:e===o.CONTEXT_OBJECT_TYPE_DEPOSIT&&h))}function hasEditDetailsPermission(e){return!!e&&(!(!v&&!hasEditDetailsAndCreatePlaceholderPermission(e))||(e===o.CONTEXT_OBJECT_TYPE_ACCOUNT?v||T||P||S:e===o.CONTEXT_OBJECT_TYPE_LOAN||e===o.CONTEXT_OBJECT_TYPE_COLLATERAL?T:e===o.CONTEXT_OBJECT_TYPE_TREASURY?S:e===o.CONTEXT_OBJECT_TYPE_DEPOSIT&&P))}function hasDeleteFilesPermission(e){return!!e&&(!!f||(e===o.CONTEXT_OBJECT_TYPE_ACCOUNT?f||_||D||C:e===o.CONTEXT_OBJECT_TYPE_LOAN||e===o.CONTEXT_OBJECT_TYPE_COLLATERAL?_:e===o.CONTEXT_OBJECT_TYPE_TREASURY?C:e===o.CONTEXT_OBJECT_TYPE_DEPOSIT&&D))}function hasReviewDocumentsPermission(e){return!!e&&(!!L||(e===o.CONTEXT_OBJECT_TYPE_ACCOUNT?L||R||M||b:e===o.CONTEXT_OBJECT_TYPE_LOAN||e===o.CONTEXT_OBJECT_TYPE_COLLATERAL?R:e===o.CONTEXT_OBJECT_TYPE_TREASURY?b:e===o.CONTEXT_OBJECT_TYPE_DEPOSIT&&M))}function hasPortalAdminPermission(e){return!!e&&(!!U||(e===o.CONTEXT_OBJECT_TYPE_ACCOUNT?y||F:e===o.CONTEXT_OBJECT_TYPE_LOAN?y:e===o.CONTEXT_OBJECT_TYPE_DEPOSIT&&F))}function getListFromString(e){for(var t=e.split(";"),n=0;n<t.length;n++)t[n]=t[n].trim().toLowerCase();return t}function hasRequiredRole(e){return checkListForString(e,s.userRoleName)}function checkListForString(e,t){return null==e||""===e||(!((e=e.trim()).length>0)||(e.indexOf(";")>0?e.toLowerCase().replace(/\s*;\s*/g,";").split(";").indexOf(t)>-1:e.toLowerCase().trim()===t))}function isExternalUser(){return[n.EXTERNAL_APPS.toLowerCase(),n.CUSTOMER_COMMUNITY.toLowerCase(),n.CUSTOMER_COMMUNITY_PLUS.toLowerCase(),n.PARTNER_COMMUNITY.toLowerCase(),n.CHANNEL_ACCOUNT.toLowerCase()].includes(s.userLicenseType)}function isDefaultExternalPermissionsEnabled(){return l.get().systemPropsMap.get(r.EXTERNAL_PLACEHOLDER_DEFAULTS)}function isESignLockedPlaceholder(e){var t=e?e.toUpperCase():"";return[o.STATUS_SIGNATURE_CANCEL_PENDING.toUpperCase(),o.STATUS_SIGNATURE_EXCEPTION.toUpperCase(),o.STATUS_SIGNATURE_NEEDED.toUpperCase(),o.STATUS_SIGNATURE_PENDING.toUpperCase(),o.STATUS_SIGNATURE_READY_TO_TAG.toUpperCase(),o.STATUS_SIGNATURE_UPLOADING.toUpperCase()].indexOf(t)>-1}}angular.module("app").service("permissionService",permissionService),permissionService.$inject=["PERMISSION_NAMES","PERMISSIONS","COMMUNITY_USER_LICENSE_NAMES","CONSTANTS","SYSTEM_PROPERTIES","universalDocManRemotingService","productPackageService","config"]}()},2510:()=>{!function(){"use strict";function documentManagerSearchFilter(e){return function(e,t){if(!t)return e;var n,o=[],r=(""+t).toLowerCase();return angular.forEach(e,(function(e){(n=angular.copy(e)).apexType="",-1!==(""+JSON.stringify(n)).toLowerCase().indexOf(r)&&o.push(e)})),o}}function placeholderViewerRolesFilter(e){return function(t,n){return t.filter((function(t){return!(n||e.isDefaultExternalPermissionsEnabled()&&e.isExternalUser())||e.hasRequiredViewerAccess(t)}))}}angular.module("app").filter("portalEnabledFilter",(function portalEnabledFilter(){return function(e,t){return e.filter((function(e){if(!t||e.portalEnabled)return!0}))}})).filter("readyForEsignatureFilter",(function readyForEsignatureFilter(){return function(e,t){return e.filter((function(e){if(!t||e.readyForEsignature)return!0}))}})).filter("documentManagerSearchFilter",documentManagerSearchFilter).filter("categoriesFilter",(function categoriesFilter(){return function(e,t){if(0===t.length)return e;var n=[];return angular.forEach(e,(function(e){-1!==t.indexOf(e.category)&&n.push(e)})),n}})).filter("placeholderViewerRolesFilter",placeholderViewerRolesFilter),documentManagerSearchFilter.$inject=["CONSTANTS"],placeholderViewerRolesFilter.$inject=["permissionService"]}()},5568:()=>{!function(){"use strict";function placeholderService(e,t,n,o,r,a,i,l,s,c,d,u,f){var p={placeholders:[],placeholderApexTypeToApiNameMap:[],signedStatus:i.get().systemPropsMap.get(l.UNI_ESIGN_SIGNED_STATUSES),statusLists:[],statusTheme:[],uploadingToPlaceholder:{},isTranslated:null,buildImageUrls:function buildImageUrls(n){for(var o=t.defer(),r=0;r<Object.keys(n).length;r++){var a=n[Object.keys(n)[r]];a.file.previewUnavailable=!1,a.file.isPreviewSupported=p.isPreviewSupported(a.file.FileType),a.file.isPreviewSupported?(a.file.previewLink=s.CONTENT_PREVIEW_URL+a.file.Id,a.file.FileExtension&&-1!==c.indexOf(a.file.FileExtension.toLowerCase())?a.file.enlargedPreviewLink=s.CONTENT_ENLARGED_PREVIEW_URL_IMAGES_PART_1+a.file.Id+s.CONTENT_ENLARGED_PREVIEW_URL_IMAGES_PART_2:a.file.enlargedPreviewLink=s.CONTENT_ENLARGED_PREVIEW_URL+a.file.Id+s.CONTENT_ENLARGED_PREVIEW_URL_CONTENTID+a.file.Id+s.CONTENT_ENLARGED_PREVIEW_URL_CURRENTTIME+e.currentTime):a.file.previewUnavailable=!0,sendPreviewLinkURLRequest(a.file.previewLink),sendPreviewLinkURLRequest(a.file.enlargedPreviewLink)}return o.resolve(),o.promise},copyPlaceholderProperties:function copyPlaceholderProperties(e,t){if(!e||!t)return!1;convertPropertyNamesFromCamelCase([e,t]);for(var n=l.WORKFLOW_UPDATE_FIELDS,o="",r=0;r<l.WORKFLOW_UPDATE_FIELDS_PREFIX_NEEDED.length;r++)n.push(window.UniDocMan.namespacePrefix+l.WORKFLOW_UPDATE_FIELDS_PREFIX_NEEDED[r]);if(null!=t.fieldSetSchema)for(r=0;r<t.fieldSetSchema.length;r++){var a=t.fieldSetSchema[r].fieldPath;if(n.indexOf(a)>-1){o=a;break}}for(var i in t)t.hasOwnProperty(i)&&e.hasOwnProperty(i)&&(i===l.YEAR_KEY&&""!=e[i]&&""==t[i]&&t.fields&&(t.fields[o]=e[i]),t[i]=e[i])},convertPropertyNamesFromCamelCase,generateFileMetadata:function generateFileMetadata(e,t){e.fileName=t.name,e.fileSize=t.size,e.mimeType=""===t.type?l.EXTENSION_NATIVE_MIME_TYPE[e.fileName.substring(e.fileName.lastIndexOf(".")+1)]||"":t.type;var n={},o=l.FILE_NAME_CLASSIC,r=l.FILE_SIZE_CLASSIC,a=l.FILE_MIME_TYPE_CLASSIC;e.apexType==l.NAMESPACE_PREFIX+"."+l.CONTEXT_OBJECT_UNIVERSAL_DOC&&(o=l.FILE_NAME_UNIVERSAL,r=l.FILE_SIZE_UNIVERSAL,a=l.FILE_MIME_TYPE_UNIVERSAL);return n[p.placeholderApexTypeToApiNameMap[e.apexType]]={},n[p.placeholderApexTypeToApiNameMap[e.apexType]][o]=t.name,n[p.placeholderApexTypeToApiNameMap[e.apexType]][r]=t.size,n[p.placeholderApexTypeToApiNameMap[e.apexType]][a]=e.mimeType,JSON.stringify(n)},isPreviewSupported:function isPreviewSupported(e){return-1!==s.PREVIEW_SUPPORTED_EXTENSIONS.indexOf(e)},loadRejectionReasonPicklistValues:function loadRejectionReasonPicklistValues(e){var o=t.defer(),a=e.indexOf(".")+1,i=l.PLACEHOLDER_APEX_TYPE_TO_API_NAME[e.substring(a,e.length)];return n.retrieveDependentPicklist(i,l.REJECTION_REASON_FIELD,UniDocMan.namespacePrefix+l.REJECTION_COMMENT_FIELD).then((function(e){var t=[],n=0;angular.forEach(e,(function(e,o){var r={id:n,reason:o,comment:e[0]};t.push(r),n++})),o.resolve(t),r.picklistValues=t})),o.promise},placeholderHasFileOrExternal:function placeholderHasFileOrExternal(e){var t=!1;e&&(e.file&&void 0!==e.file.Id&&e.file.Id||e.documentStorageType&&e.isDocumentExternal)&&(t=!0);return t},populateStatusObjects,prepareForUrls:function prepareForUrls(e){if(e&&e.length>0){p.convertPropertyNamesFromCamelCase(e);for(var n,o=[],r=0;r<e.length;r++)(n=e[r]).file&&n.file.FileType&&n.file.ParentId&&(o[n.file.ParentId]=n);if(Object.keys(o).length>0)return p.buildImageUrls(o)}var a=t.defer();return a.resolve(),a.promise},retrievePlaceholders:function retrievePlaceholders(){var e=t.defer();return t.all([n.retrieveDocuments(),n.getReviewStatusOptions()]).then((function(t){u.setLabels(t[1]),populateStatusObjects(),p.placeholders=t[0],p.convertPropertyNamesFromCamelCase(p.placeholders),p.placeholders&&angular.forEach(p.placeholders,(function(e,t){p.setStatuses(e)})),e.resolve()})).catch((t=>{if(t.includes("ENTITY_IS_LOCKED"))return e.reject("ENTITY_IS_LOCKED");throw new Error(t)})),e.promise},retrieveIsTranslated:function retrieveIsTranslated(){if(null===p.isTranslated){var e=t.defer();return n.retrieveIsTranslated().then((function(t){p.isTranslated=t,e.resolve()})),e.promise}return new Promise((function(e,t){e()}))},sendPreviewLinkURLRequest,setStatuses:function setStatuses(e){var t=!1;e.placeholderApprovalRoles&&!o.hasRequiredRole(e.placeholderApprovalRoles)||(t=!0);var n=strToUpper(e.status);u.getLabel(n)?e.statusTranslation=u.getLabel(n):e.statusTranslation=e.status;e.file&&e.file.Id||e.isDocumentExternal?n===strToUpper(l.STATUS_SIGNATURE_NEEDED)?setStatusListValue(e,d.E_SIGNATURE):n===strToUpper(l.STATUS_SIGNATURE_PENDING)?setStatusListValue(e,d.E_SIGNATURE_PENDING):n===strToUpper(l.STATUS_SIGNATURE_CANCEL_PENDING)?setStatusListValue(e,d.STATUS_SIGNATURE_CANCEL_PENDING):n===strToUpper(l.STATUS_SIGNATURE_EXCEPTION)?setStatusListValue(e,d.STATUS_SIGNATURE_EXCEPTION):n===strToUpper(l.STATUS_SIGNATURE_READY_TO_TAG)?setStatusListValue(e,l.STATUS_SIGNATURE_READY_TO_TAG):n===strToUpper(l.STATUS_SIGNATURE_UPLOADING)?setStatusListValue(e,l.STATUS_SIGNATURE_UPLOADING):e.status===p.signedStatus?setStatusListValue(e,t?d.HAS_FILE_SIGNED_AND_APPROVAL_ROLE:d.HAS_FILE_SIGNED):setStatusListValue(e,t?d.HAS_PLACEHOLDER_APPROVAL_ROLE:d.HAS_FILE):setStatusListValue(e,d.NO_FILE)},setStatusTheme:function setStatusTheme(e){var t=p.statusTheme[e.status];null==t&&(strToUpper(e.status)===strToUpper(l.STATUS_SIGNATURE_PENDING)?t=p.statusTheme[l.STATUS_SIGNATURE_PENDING]:strToUpper(e.status)===strToUpper(l.STATUS_SIGNATURE_NEEDED)?t=p.statusTheme[l.STATUS_SIGNATURE_NEEDED]:strToUpper(e.status)===strToUpper(l.STATUS_SIGNATURE_CANCEL_PENDING)?t=p.statusTheme[l.STATUS_SIGNATURE_CANCEL_PENDING]:strToUpper(e.status)===strToUpper(l.STATUS_SIGNATURE_EXCEPTION)&&(t=p.statusTheme[l.STATUS_SIGNATURE_EXCEPTION]),null==t&&(t=p.statusTheme[e.recordId]));return t},setVersionHistory:function setVersionHistory(e){var o=t.defer();e&&e.recordId?n.getDocumentVersions(e.recordId).then((function(t){e.versions=t,p.convertPropertyNamesFromCamelCase(e.versions),o.resolve()})):o.reject();return o.promise},strToUpper,translatableOrSpecialFieldType:function translatableOrSpecialFieldType(e){return(e=e.toLowerCase())==l.DATE_TYPE||e==l.DATETIME_TYPE||e==l.NUMBER_FIELD_TYPE||e==l.PERCENT_FIELD_TYPE||e==l.CURRENCY_FIELD_TYPE||e==l.URL_FIELD_TYPE},containsHyperlink:function containsHyperlink(e,t,n){if(e&&e.indexOf&&e.indexOf("</a>")>-1&&(t=(t=t.split("."))[t.length-1],n&&n.filter)){var o=n.filter((function(e){return e.fieldPath==t}));if(o&&o.length&&1===o.length)return o[0].isFormula}return!1},uncheckAllPlaceholders:function uncheckAllPlaceholders(){e.$$childTail.$$childTail.toggleState=!1,angular.forEach(p.placeholders,(function(e,t){o.hasRequiredViewerAccess(e)&&(e.isSelected=!1)}))},getContentDocumentByVersion:n.getContentDocumentByVersion,setPreviewConfiguration:n.setPreviewConfiguration,getBulkUpdateScreenSectionData:n.getBulkUpdateScreenSectionData,updateRequirementRemote:n.updateRequirementRemote,unlinkRequirementFromPlaceholder:n.unlinkRequirementFromPlaceholder};return function setPlaceholderApexTypeToApiNameMap(){var e=l.NAMESPACE_PREFIX+l.PERIOD;p.placeholderApexTypeToApiNameMap[e+l.CONTEXT_OBJECT_ACCOUNT_DOC]=l.ACCOUNT_DOC_API_NAME,p.placeholderApexTypeToApiNameMap[e+l.CONTEXT_OBJECT_LOAN_DOC]=l.LOAN_DOC_API_NAME,p.placeholderApexTypeToApiNameMap[e+l.CONTEXT_OBJECT_UNIVERSAL_DOC]=l.DOCUMENT_PLACEHOLDER_API_NAME}(),p;function setStatusListValue(e,t){var n,o=!1;p.statusLists[t]&&(n=p.statusLists[t].length);for(var r=0;r<n;r++)if(e.status&&strToUpper(p.statusLists[t][r].name)===strToUpper(e.status)){o=!0;break}!o&&n?(p.statusLists[e.recordId]=p.statusLists[t].slice(),p.statusLists[e.recordId].push({name:e.status,theme:"slds-theme--shade",translation:u.getLabel(e.status)}),p.statusTheme[e.recordId]="slds-theme--shade",e.statusListValue=e.recordId):e.statusListValue=t}function populateStatusObjects(){var e={};e[l.STATUS_SIGNATURE_NEEDED]="slds-theme--warning",e[l.STATUS_SIGNATURE_PENDING]="slds-theme--info",e[l.STATUS_SIGNATURE_CANCEL_PENDING]="slds-theme--warning",e[l.STATUS_SIGNATURE_EXCEPTION]="slds-theme--error",e[p.signedStatus]="slds-theme--alt-inverse",e[l.STATUS_REVIEWED]="slds-theme--alt-inverse",e[l.STATUS_OPEN]="slds-theme--default openStatusIcon",e[l.STATUS_APPROVED]="slds-theme--success",e[l.STATUS_IN_FILE]="slds-theme--warning",e[l.STATUS_EXCEPTION]="slds-theme--error",e[l.STATUS_WAIVED]="",e[l.STATUS_SIGNATURE_UPLOADING]="uploading-status-theme",e[l.STATUS_SIGNATURE_READY_TO_TAG]="ready-to-tag-status-theme",e[l.STATUS_AWAITING_REVIEW]="slds-badge_inverse";var t,n={};n[d.NO_FILE]=[l.STATUS_EXCEPTION,l.STATUS_OPEN,l.STATUS_WAIVED],n[d.E_SIGNATURE]=[l.STATUS_EXCEPTION,l.STATUS_IN_FILE,l.STATUS_WAIVED],n[d.E_SIGNATURE_PENDING]=[l.STATUS_SIGNATURE_PENDING],n[d.STATUS_SIGNATURE_CANCEL_PENDING]=[l.STATUS_SIGNATURE_CANCEL_PENDING],n[d.STATUS_SIGNATURE_EXCEPTION]=[l.STATUS_SIGNATURE_EXCEPTION],n[d.HAS_FILE]=[l.STATUS_IN_FILE,l.STATUS_EXCEPTION,l.STATUS_REVIEWED,l.STATUS_WAIVED],n[d.HAS_FILE_SIGNED]=[p.signedStatus,l.STATUS_IN_FILE,l.STATUS_EXCEPTION,l.STATUS_REVIEWED,l.STATUS_WAIVED],n[d.HAS_FILE_SIGNED_AND_APPROVAL_ROLE]=[p.signedStatus,l.STATUS_APPROVED,l.STATUS_IN_FILE,l.STATUS_EXCEPTION,l.STATUS_REVIEWED,l.STATUS_WAIVED],n[d.HAS_PLACEHOLDER_APPROVAL_ROLE]=[l.STATUS_IN_FILE,l.STATUS_APPROVED,l.STATUS_EXCEPTION,l.STATUS_REVIEWED,l.STATUS_WAIVED],n[l.STATUS_SIGNATURE_UPLOADING]=[],n[l.STATUS_SIGNATURE_READY_TO_TAG]=[],t=i.get().contextObjectType===l.CONTEXT_OBJECT_TYPE_LOAN?i.get().loanDocumentReviewStatuses:i.get().contextObjectType===l.CONTEXT_OBJECT_TYPE_ACCOUNT?i.get().accountDocumentReviewStatuses:i.get().contextObjectType===l.CONTEXT_OBJECT_TYPE_PRODUCT_PACKAGE&&a.selectedProductInProductPackage&&a.selectedProductInProductPackage.objectType===l.CONTEXT_OBJECT_TYPE_LOAN?i.get().loanDocumentReviewStatuses:i.get().universalDocumentReviewStatuses;var o=[];angular.forEach(t,(function(t,n){l.DEFAULT_STATUSES.indexOf(t)<0&&(o.push({name:t,theme:"slds-theme--alt-inverse",translation:u.getLabel(t)}),e[t]="slds-theme--alt-inverse")})),o.length>0&&angular.forEach(n,(function(e,t){angular.forEach(o,(function(t,n){e.push(t.name)}))})),Object.keys(n).forEach((function(t){p.statusLists[t]=[],Object.keys(e).forEach((function(o){if(p.statusTheme[o]=e[o],-1!=n[t].indexOf(o)){p.statusLists[t].push({name:o,theme:e[o],translation:u.getLabel(o)});var r=p.statusLists[t].slice(0);r.sort((function(e,t){return e.translation&&t.translation?e.translation.toLowerCase().localeCompare(t.translation.toLowerCase()):e.name.toLowerCase().localeCompare(t.name.toLowerCase())})),p.statusLists[t]=r}}))}))}function strToUpper(e){return null!=e?e.toUpperCase():""}function sendPreviewLinkURLRequest(e){jQuery("#docmanapp").append('<img id="hiddenImage" hidden="hidden" src="/>'),jQuery("#hiddenImage").attr("src",e),jQuery("#hiddenImage").remove()}function convertPropertyNamesFromCamelCase(e){angular.forEach(e,(function(e){e.file&&e.file.recordType?mapObjectProperties(e.file):e.recordType&&mapObjectProperties(e)}))}function mapObjectProperties(e){angular.forEach(f,(function(t,n){e.hasOwnProperty(n)&&(Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(e,n)),delete e[n])}))}}angular.module("app").service("placeholderService",placeholderService),placeholderService.$inject=["$rootScope","$q","universalDocManRemotingService","permissionService","picklistValueService","productPackageService","config","CONSTANTS","FILE","IMAGE_FILE_EXTENSIONS","STATUS_LIST","labels","DOCUMENT_VERSION_PROPERTY_MAP"]}()},78:()=>{!function(){"use strict";function productPackageService(e,t){var n={productPackageProducts:[],selectedProductInProductPackage:null,productPackageDocManWithoutProducts:!1,setProductPackageProducts:function setProductPackageProducts(o){o.LLC_BI__Product_Package__c&&(n.productPackageProducts=o.LLC_BI__Product_Package__c);e.get().includeProductPackageDocMan===t.STRING_VALUE_FALSE&&n.productPackageProducts.splice(0,1);n.productPackageProducts.length>0?(n.selectedProductInProductPackage=n.productPackageProducts[0],window.DocManId=n.selectedProductInProductPackage.recordId,jQuery("#placeholderSearchBar").removeClass("col-xs-12"),jQuery("#placeholderSearchBar").addClass("col-xs-8")):n.productPackageDocManWithoutProducts=!0}};return n}angular.module("app").service("productPackageService",productPackageService),productPackageService.$inject=["config","CONSTANTS"]}()},494:()=>{!function(){"use strict";function ssfbService(e,t,n,o){return{buildPlaceholderFromSection:function buildPlaceholderFromSection(){var e={};return angular.forEach(n.formBuilder.fields,(function(t,o){var r=n.formBuilder.fields[o];if(r)for(var a=0;a<r.length;a++)e[n.formBuilder.fields[o][a].fieldName]=n.formBuilder.fields[o][a].value})),e},clearScreenSections,getFields:function getFields(e,t,n){e=e.map((function(e){return e.toLowerCase()}));var o=[];for(var r in t)for(var a=t[r],i=0;i<a.length;i++){var l=a[i];if(-1!==e.indexOf(l.fieldName.toLowerCase())&&(o.push(l),n))return o[0]}if(n)return{};return o},getPlaceholderCategory:function getPlaceholderCategory(e){var n=e.screenSectionFields;for(var o in n)for(var r=n[o],a=0;a<r.length;a++){var i=r[a];if(i.fieldName.toLowerCase()===t.ID_PATH.toLowerCase())return i.value}return null},hasVisibleFields:function hasVisibleFields(e){var t=n.get(e);if(t&&t.guid)return n.formBuilder.getVisibleFields(t.guid).length>0;return!1},mapValues:function mapValues(e,t){var n=Object.keys(t);if(e&&n)for(var o=0;o<n.length;o++)e[n[o]]=t[n[o]]},updateScreenSections:function updateScreenSections(t){void 0===t&&(t=!1);var n=e.defer();return o.getScreenSectionsForContextObject(t).then((function(e){clearScreenSections(),n.resolve(e)})),n.promise},clearFields:function clearFields(e){var t=n.formBuilder.fields,o=[];for(var r in t)t[r].forEach(((t,n)=>{e.includes(t.fieldName)&&o.push([r,n])}));o.forEach((e=>{let[t,o]=e;n.formBuilder.fields[t][o].value=null,function clearInputFieldById(e,t=!0){var n;n=t?`input[id*="${e}"]`:`input[id="${e}"]`;var o=document.querySelector(n);null!=o&&(o.value=null)}(`${t}${n.formBuilder.fields[t][o].guid}`,!0)}))}};function clearScreenSections(){n.clear()}}angular.module("app").service("ssfbService",ssfbService),ssfbService.$inject=["$q","CATEGORY_FIELD","screenSection","universalDocManRemotingService"]}()},9605:()=>{!function(){"use strict";function universalDocManRemotingService(e,t){var n=this;return n.config=t.get(),n.namespacePrefix=n.config.namespacePrefix?n.config.namespacePrefix.replace("__","."):"nDOC.",{archivePlaceholderFromFileStaging:function archivePlaceholderFromFileStaging(t){var o=e.defer();return Visualforce.remoting.Manager.invokeAction(n.namespacePrefix+"UniversalDocManController.archivePlaceholderFromFileStaging",window.DocManId,t,(function(e,t){t.status?o.resolve(e):(UniDocMan.dispatchErrorEvent(t.type,t.message,t.where),o.reject(t.message))}),{escape:!1,buffer:!1}),o.promise},createFileStagingPlaceholder:function createFileStagingPlaceholder(){var t=e.defer();return Visualforce.remoting.Manager.invokeAction(n.namespacePrefix+"UniversalDocManController.createFileStagingPlaceholder",window.DocManId,(function(e,n){n.status?t.resolve(e):(UniDocMan.dispatchErrorEvent(n.type,n.message,n.where),t.reject(n.message))}),{escape:!1,buffer:!1}),t.promise},archivePlaceholdersFromFileStaging:function archivePlaceholdersFromFileStaging(t){var o=e.defer();return Visualforce.remoting.Manager.invokeAction(n.namespacePrefix+"UniversalDocManController.archivePlaceholdersFromFileStaging",window.DocManId,t,(function(e,t){t.status?o.resolve(e):(UniDocMan.dispatchErrorEvent(t.type,t.message,t.where),o.reject(t.message))}),{escape:!1,buffer:!1}),o.promise},archiveExistingDocument:function archiveExistingDocument(t,o){var r=e.defer();return Visualforce.remoting.Manager.invokeAction(n.namespacePrefix+"UniversalDocManController.archiveExistingDocument",window.DocManId,t,o,(function(e,t){t.status?r.resolve(e):r.reject(t.message)}),{escape:!1,buffer:!1}),r.promise},retrievePlaceholderFieldSetAdd:function retrievePlaceholderFieldSetAdd(t){var o=e.defer();return Visualforce.remoting.Manager.invokeAction(n.namespacePrefix+"PlaceholderDataController.retrievePlaceholderFieldSetAdd",t,(function(e,t){t.status?o.resolve(e):o.reject(t.message)}),{escape:!1,buffer:!1}),o.promise},takeOwnershipOfDocument:function takeOwnershipOfDocument(t){var o=e.defer();return Visualforce.remoting.Manager.invokeAction(n.namespacePrefix+"SuperUserUtils.takeOwnershipOfDocument",t,(function(e,t){t.status?o.resolve(e):o.reject(t.message)}),{escape:!1,buffer:!1}),o.promise},retrievePlaceholderNames:function retrievePlaceholderNames(t){var o=e.defer();return Visualforce.remoting.Manager.invokeAction(n.namespacePrefix+"PlaceholderDataController.getPlaceholderNames",t,(function(e,t){t.status?o.resolve(e):o.reject(t.message)}),{escape:!1,buffer:!1}),o.promise},retrievePledgedCollateral:function retrievePledgedCollateral(){var t=e.defer();return Visualforce.remoting.Manager.invokeAction(n.namespacePrefix+"PlaceholderDataController.getPledgedCollateral",window.DocManId,(function(e,n){n.status?t.resolve(e):t.reject(n.message)}),{escape:!1,buffer:!1}),t.promise},retrieveSystemPropertyAsBoolean:function retrieveSystemPropertyAsBoolean(t,o){var r=e.defer();return Visualforce.remoting.Manager.invokeAction(n.namespacePrefix+"UniversalDocManController.retrieveSystemPropertyAsBoolean",t,o,(function(e,t){t.status?r.resolve(e):r.reject(t.message)}),{escape:!1,buffer:!1}),r.promise},isDocStoreShared:function isDocStoreShared(t){var o=e.defer();return Visualforce.remoting.Manager.invokeAction(n.namespacePrefix+"UniversalDocManController.isDocStoreShared",t,(function(e,t){t.status?o.resolve(e):o.reject(t.message)}),{escape:!1,buffer:!1}),o.promise},savePlaceholderData:function savePlaceholderData(t,o,r){var a=e.defer();return Visualforce.remoting.Manager.invokeAction(n.namespacePrefix+"PlaceholderDataController.savePlaceholderData",window.DocManId,t,o,r,(function(e,t){t.status?a.resolve(e):a.reject(t.message)}),{escape:!1,buffer:!1}),a.promise},savePlaceholderViewerPerms:function savePlaceholderViewerPerms(t,o){var r=e.defer();return Visualforce.remoting.Manager.invokeAction("nFORCE.RemoteActionController.invoke",n.namespacePrefix+"PlaceholderDataController.SavePlaceholderViewerPerms",{contextObjectId:window.DocManId,placeholderId:t,placeholderViewerPerms:JSON.stringify(o)},(function(e,t){t.status?r.resolve(e):r.reject(t.message)}),{escape:!1,buffer:!1}),r.promise},getPlaceholderPermOptions:function getPlaceholderPermOptions(){var t=e.defer();return Visualforce.remoting.Manager.invokeAction("nFORCE.RemoteActionController.invoke",n.namespacePrefix+"PlaceholderDataController.GetPlaceholderPermOptions",{},(function(e,n){n.status?t.resolve(e):t.reject(n.message)}),{escape:!1,buffer:!1}),t.promise},savePlaceholderPortalData:function savePlaceholderPortalData(t,o,r){var a=e.defer();return Visualforce.remoting.Manager.invokeAction("nFORCE.RemoteActionController.invoke",n.namespacePrefix+"PlaceholderDataController.SavePlaceholderPortalDataEndpoint",{contextObjectId:window.DocManId,placeholderId:t,placeholder:JSON.stringify(o),fieldsToNull:JSON.stringify(r)},(function(e,t){t.status?a.resolve(e):a.reject(t.message)}),{escape:!1,buffer:!1}),a.promise},savePortalRejectionReasons:function savePortalRejectionReasons(t,o){var r=e.defer();return Visualforce.remoting.Manager.invokeAction(n.namespacePrefix+"UniversalDocManController.savePortalRejectionReasons",window.DocManId,t,o,(function(e,t){t.status?r.resolve(e):r.reject(t.message)}),{escape:!1,buffer:!1}),r.promise},removeFileFromPlaceholders:function removeFilesFromPlaceholders(t){var o=e.defer();return Visualforce.remoting.Manager.invokeAction(n.namespacePrefix+"UniversalDocManController.removeFilesFromPlaceholders",window.DocManId,t,(function(e,t){t.status?o.resolve(e):(UniDocMan.dispatchErrorEvent(t.type,t.message,t.where),o.reject(t.message))}),{escape:!1,buffer:!1}),o.promise},renameMultipleContentDocuments:function renameMultipleContentDocuments(t){var o=e.defer();return Visualforce.remoting.Manager.invokeAction(n.namespacePrefix+"UniversalDocManController.renameMultipleContentDocuments",t,(function(e,t){t.status?o.resolve(e):o.reject(t.message)}),{escape:!1,buffer:!1}),o.promise},retrieveAttachment:function retrieveAttachment(t){var o=e.defer();return Visualforce.remoting.Manager.invokeAction(n.namespacePrefix+"PlaceholderDataController.retrieveAttachment",t,(function(e,t){t.status?o.resolve(e):o.reject(t.message)}),{escape:!1,buffer:!1},{buffer:!1}),o.promise},updatePlaceholderFields:function updatePlaceholderFields(t,o){var r=e.defer();return Visualforce.remoting.Manager.invokeAction(n.namespacePrefix+"UniversalDocManController.updatePlaceholderFields",window.DocManId,t,o,(function(e,t){t.status?r.resolve(e):r.reject(t.message)}),{escape:!1,buffer:!1}),r.promise},retrieveDocuments:function retrieveDocuments(){var t=e.defer();""===window.DocManId&&(window.DocManId=n.config.contextIdPageParam);return Visualforce.remoting.Manager.invokeAction(n.namespacePrefix+"UniversalDocManController.retrieveDocuments",window.DocManId,(function(e,n){n.status?t.resolve(e):t.reject(n.message)}),{escape:!1,buffer:!1}),t.promise},retrieveIsTranslated:function retrieveIsTranslated(){var t=e.defer();return Visualforce.remoting.Manager.invokeAction("nFORCE.RemoteActionController.invoke",n.namespacePrefix+"UniversalDocManController.RetrieveIsTranslated",{},(function(e,n){n.status?t.resolve(e):t.reject(n.message)}),{buffer:!1,escape:!1}),t.promise},retrieveMultiplePledgedCollateral:function retrieveMultiplePledgedCollateral(t){var o=e.defer();return Visualforce.remoting.Manager.invokeAction(n.namespacePrefix+"PlaceholderDataController.getMultiplePledgedCollateral",t,(function(e,t){t.status?o.resolve(e):o.reject(t.message)}),{escape:!1,buffer:!1}),o.promise},retrieveLegalEntities:function retrieveLegalEntities(t){var o=e.defer();return Visualforce.remoting.Manager.invokeAction(n.namespacePrefix+"UniversalDocManController.retrieveLegalEntities",t,(function(e,t){t.status?o.resolve(e):o.reject(t.message)}),{escape:!1,buffer:!1}),o.promise},getContentDocumentLink:function getContentDocumentLink(t){var o=e.defer();return Visualforce.remoting.Manager.invokeAction(n.namespacePrefix+"UniversalDocManController.getContentDocumentLink",t,(function(e,t){t.status?o.resolve(e):o.reject(t.message)}),{escape:!1,buffer:!0}),o.promise},getContentDocumentLinks:function getContentDocumentLinks(t){var o=e.defer();return Visualforce.remoting.Manager.invokeAction(n.namespacePrefix+"UniversalDocManController.getContentDocumentLinks",t,(function(e,t){t.status?o.resolve(e):o.reject(t.message)}),{escape:!1,buffer:!0}),o.promise},getDocumentVersions:function getDocumentVersions(t){var o=e.defer();return Visualforce.remoting.Manager.invokeAction("nFORCE.RemoteActionController.invoke",n.namespacePrefix+"UniDocManRemoteActionController.getDocumentVersions",{placeholderId:t},(function(e,t){t.status?o.resolve(e):o.reject(t.message)}),{escape:!1,buffer:!0}),o.promise},getContentDocumentByVersion:function getContentDocumentByVersion(t,o){var r=e.defer();return Visualforce.remoting.Manager.invokeAction("nFORCE.RemoteActionController.invoke",n.namespacePrefix+"UniDocManRemoteActionController.getContentDocumentByVersion",{contentVersionId:t,contentDocumentId:o},(function(e,t){t.status?r.resolve(e):(UniDocMan.dispatchErrorEvent(t.type,t.message,t.where),r.reject(t.message))}),{escape:!1,buffer:!1}),r.promise},setPreviewConfiguration:function setPreviewConfiguration(t,o,r){var a=e.defer();return Visualforce.remoting.Manager.invokeAction("nFORCE.RemoteActionController.invoke",n.namespacePrefix+"UniDocManRemoteActionController.setPreviewConfiguration",{contentVersionId:t,previewUrlCount:o,previewFormat:r},(function(e,t){t.status?a.resolve(e):(UniDocMan.dispatchErrorEvent(t.type,t.message,t.where),a.reject(t.message))}),{escape:!1,buffer:!1}),a.promise},linkRelationshipDocuments:function linkRelationshipDocuments(t,o,r,a){var i=e.defer();return Visualforce.remoting.Manager.invokeAction(n.namespacePrefix+"UniversalDocManController.linkRelationshipDocumentsWithAddtionalProperties",t,o,r,a,(function(e,t){t.status?i.resolve(e):(UniDocMan.dispatchErrorEvent(t.type,t.message,t.where),i.reject(t.message))}),{escape:!1,buffer:!1}),i.promise},createDocumentStorageMetadata:function createDocumentStorageMetadata(t,o,r,a){var i=e.defer();return Visualforce.remoting.Manager.invokeAction(n.namespacePrefix+"UniversalDocManController.createDocumentStorageMetadataWithAdditionalParameters",t,o,r,a,(function(e,t){t.status?i.resolve(e):(UniDocMan.dispatchErrorEvent(t.type,t.message,t.where),i.reject(t.message))}),{escape:!1,buffer:!1}),i.promise},createExternalDocumentStorageMetadata:function createExternalDocumentStorageMetadata(t,o,r){var a=e.defer();return Visualforce.remoting.Manager.invokeAction("nFORCE.RemoteActionController.invoke",n.namespacePrefix+"UniDocManRemoteActionController.createExternalDocumentStorageMetadata",{placeholderId:t,fileName:o,additionalProperties:r},(function(e,t){t.status?a.resolve(e):(UniDocMan.dispatchErrorEvent(t.type,t.message,t.where),a.reject(t.message))}),{escape:!1,buffer:!1}),a.promise},getConfigurableColumns:function getConfigurableColumns(t){var o=e.defer();return Visualforce.remoting.Manager.invokeAction(n.namespacePrefix+"UniversalDocManController.retrieveConfigurableColumns",t,(function(e,t){t.status?o.resolve(e):(UniDocMan.dispatchErrorEvent(t.type,t.message,t.where),o.reject(t.message))}),{escape:!1,buffer:!1}),o.promise},createCollection:function createCollection(t,o){var r=e.defer(),callback=function(e,t){t.status?r.resolve(e):(UniDocMan.dispatchErrorEvent(t.type,t.message,t.where),r.reject(t.message))};o?Visualforce.remoting.Manager.invokeAction("nFORCE.RemoteActionController.invoke",n.namespacePrefix+"UniDocManRemoteActionController.CreateCollection",{contextId:window.DocManId,docStoreIds:JSON.stringify(t)},callback,{escape:!1,buffer:!1}):Visualforce.remoting.Manager.invokeAction(n.namespacePrefix+"UniversalDocManController.createCollection",t,callback,{escape:!1,buffer:!1});return r.promise},deleteCollection:function deleteCollection(t){var o=e.defer();return Visualforce.remoting.Manager.invokeAction("nFORCE.RemoteActionController.invoke",n.namespacePrefix+"UniDocManRemoteActionController.deleteCollection",{collectionId:t},(function(e,t){t.status?o.resolve(e):(UniDocMan.dispatchErrorEvent(t.type,t.message,t.where),o.reject(t.message))}),{escape:!1,buffer:!1}),o.promise},sendCollection:function sendCollection(t,o){var r=e.defer();return Visualforce.remoting.Manager.invokeAction("nFORCE.RemoteActionController.invoke",n.namespacePrefix+"UniDocManRemoteActionController.sendCollectionForSignature",{collectionId:t,signerMessage:o,contextObjectId:window.DocManId},(function(e,t){e.sendResult?r.resolve(e.sendResult):(UniDocMan.dispatchErrorEvent(t.type,e.errorMessage,t.where),r.reject(e.errorMessage))}),{escape:!1,buffer:!1}),r.promise},getCollectionIds:function getCollectionIds(t){var o=e.defer();return Visualforce.remoting.Manager.invokeAction(n.namespacePrefix+"UniversalDocManController.getCollectionIds",t,(function(e,t){t.status?o.resolve(e):(UniDocMan.dispatchErrorEvent(t.type,t.message,t.where),o.reject(t.message))}),{escape:!1,buffer:!1}),o.promise},cancelSignatureCollection:function cancelSignatureCollection(t){var o=e.defer();return Visualforce.remoting.Manager.invokeAction(n.namespacePrefix+"UniversalDocManController.cancelSignatureCollection",t,(function(e,t){t.status?o.resolve(e):(UniDocMan.dispatchErrorEvent(t.type,t.message,t.where),o.reject(t.message))}),{escape:!1,buffer:!1}),o.promise},getESignatureDefaultMessage:function getESignatureDefaultMessage(){var t=e.defer();return Visualforce.remoting.Manager.invokeAction("nFORCE.RemoteActionController.invoke",n.namespacePrefix+"UniDocManRemoteActionController.getESignatureDefaultMessage",{contextObjectId:window.DocManId},(function(e,n){n.status?t.resolve(e):(UniDocMan.dispatchErrorEvent(n.type,n.message,n.where),t.reject(n.message))}),{escape:!1,buffer:!1}),t.promise},linkDocumentVersion:function linkDocumentVersion(t,o,r,a,i,l,s){var c=e.defer();return Visualforce.remoting.Manager.invokeAction("nFORCE.RemoteActionController.invoke",n.namespacePrefix+"UniDocManRemoteActionController.LinkDocumentVersion",{sourceContentVersionId:t,targetPlaceholderId:o,additionalProperties:r,isImported:a,isExternalDocument:i,fileName:l,sourceDocumentVersionId:s},(function(e,t){t.status?c.resolve(e):(UniDocMan.dispatchErrorEvent(t.type,t.message,t.where),c.reject(t.message))}),{escape:!1,buffer:!1}),c.promise},retrieveDependentPicklist:function retrieveDependentPicklist(t,o,r){var a=e.defer();return Visualforce.remoting.Manager.invokeAction("nFORCE.RemoteActionController.invoke",n.namespacePrefix+"UniDocManRemoteActionController.retrieveDependentPicklist",{objectType:t,controllingField:o,dependentField:r},(function(e,t){t.status?a.resolve(e):a.reject(t.message)}),{escape:!1,buffer:!1}),a.promise},getReviewStatusOptions:function getReviewStatusOptions(){var t=e.defer();""===window.DocManId&&(window.DocManId=n.config.contextIdPageParam);return Visualforce.remoting.Manager.invokeAction("nFORCE.RemoteActionController.invoke",n.namespacePrefix+"UniDocManRemoteActionController.retrieveReviewStatusOptions",{contextObjectId:window.DocManId},(function(e,n){n.status?t.resolve(e):(UniDocMan.dispatchErrorEvent(n.type,n.message,n.where),t.reject(n.message))}),{escape:!1,buffer:!1}),t.promise},requestPortalDocuments:function requestPortalDocuments(t){var o=e.defer(),r=JSON.stringify(t);return Visualforce.remoting.Manager.invokeAction("nFORCE.RemoteActionController.invoke",n.namespacePrefix+"UniDocManRemoteActionController.requestPortalDocuments",{placeholders:r,contextObjectId:window.DocManId},(function(e,t){t.status?o.resolve(e):(UniDocMan.dispatchErrorEvent(t.type,t.message,t.where),o.reject(t.message))}),{escape:!1,buffer:!1}),o.promise},cancelPortalRequests:function cancelPortalRequests(t){var o=e.defer(),r=JSON.stringify(t);return Visualforce.remoting.Manager.invokeAction("nFORCE.RemoteActionController.invoke",n.namespacePrefix+"UniDocManRemoteActionController.cancelPortalRequests",{placeholderIds:r,contextObjectId:window.DocManId},(function(e,t){t.status?o.resolve(e):(UniDocMan.dispatchErrorEvent(t.type,t.message,t.where),o.reject(t.message))}),{escape:!1,buffer:!1}),o.promise},getBulkUpdateScreenSectionData:function getBulkUpdateScreenSectionData(t,o){var r=e.defer();return Visualforce.remoting.Manager.invokeAction("nFORCE.RemoteActionController.invoke",n.namespacePrefix+"UniDocManRemoteActionController.getBulkUpdateScreenSectionData",{contextId:t,placeholderIds:JSON.stringify(o)},(function(e,t){t.status?r.resolve(e):(UniDocMan.dispatchErrorEvent(t.type,t.message,t.where),r.reject(t.message))}),{escape:!1,buffer:!1}),r.promise},updateRequirementRemote:function updateRequirementRemote(t){var o=e.defer();return Visualforce.remoting.Manager.invokeAction("nFORCE.RemoteActionController.invoke",n.namespacePrefix+"UniDocManRemoteActionController.updateRequirementRemote",{placeholderIds:JSON.stringify(t)},(function(e,t){t.status?o.resolve(e):(UniDocMan.dispatchErrorEvent(t.type,t.message,t.where),o.reject(t.message))}),{escape:!1,buffer:!1}),o.promise},retrieveActiveDocumentCollections:function retrieveActiveDocumentCollections(t){var o=e.defer();return Visualforce.remoting.Manager.invokeAction("nFORCE.RemoteActionController.invoke",n.namespacePrefix+"UniDocManRemoteActionController.RetrieveActiveDocumentCollections",{collectionIds:JSON.stringify(t)},(function(e,t){t.status?o.resolve(e):(UniDocMan.dispatchErrorEvent(t.type,t.message,t.where),o.reject(t.message))}),{escape:!1,buffer:!1}),o.promise},associateDocsToCollection:function associateDocsToCollection(t,o){var r=e.defer();return Visualforce.remoting.Manager.invokeAction("nFORCE.RemoteActionController.invoke",n.namespacePrefix+"UniDocManRemoteActionController.AssociateDocsToCollection",{contextId:window.DocManId,docStoreIds:JSON.stringify(t),collectionId:o},(function(e,t){t.status?r.resolve(e,t):(UniDocMan.dispatchErrorEvent(t.type,t.message,t.where),r.reject(t.message))}),{escape:!1,buffer:!1}),r.promise},createVendorCollection:function createVendorCollection(t,o){var r=e.defer();return Visualforce.remoting.Manager.invokeAction("nFORCE.RemoteActionController.invoke",n.namespacePrefix+"UniDocManRemoteActionController.CreateVendorCollection",{contextId:window.DocManId,docStoreIds:JSON.stringify(t),collectionId:o},(function(e,t){t.status?r.resolve(e):(UniDocMan.dispatchErrorEvent(t.type,t.message,t.where),r.reject(t.message))}),{escape:!1,buffer:!1}),r.promise},unlinkRequirementFromPlaceholder:function unlinkRequirementFromPlaceholder(t){var o=e.defer();return Visualforce.remoting.Manager.invokeAction("nFORCE.RemoteActionController.invoke",n.namespacePrefix+"UniDocManRemoteActionController.unlinkRequirementFromPlaceholder",{placeholderIds:JSON.stringify(t)},(function(e,t){t.status?o.resolve(e):(UniDocMan.dispatchErrorEvent(t.type,t.message,t.where),o.reject(t.message))}),{escape:!1,buffer:!1}),o.promise},getESignatureTaggingUrl:function getESignatureTaggingUrl(t){var o=e.defer();return Visualforce.remoting.Manager.invokeAction("nFORCE.RemoteActionController.invoke",n.namespacePrefix+"UniDocManRemoteActionController.GetESignatureTaggingUrl",{collectionId:t},(function(e,t){t.status?o.resolve(e):(UniDocMan.dispatchErrorEvent(t.type,t.message,t.where),o.reject(t.message))}),{escape:!1,buffer:!1}),o.promise},retrieveFieldSetMetadata:function retrieveFieldSetMetadata(t,n){var o=e.defer();return Visualforce.remoting.Manager.invokeAction("nFORCE.RemoteActionController.invoke","LLC_BI.FieldSetMetadataLoaderRemote_v1.Load",{args:JSON.stringify({filters:{contextType:t,identities:n}})},(function(e,t){t.status?o.resolve(e):(UniDocMan.dispatchErrorEvent(t.type,t.message,t.where),o.reject(t.message))}),{escape:!1,buffer:!1}),o.promise},getScreenSectionsForContextObject:function getScreenSectionsForContextObject(t){var o=e.defer();return Visualforce.remoting.Manager.invokeAction("nFORCE.RemoteActionController.invoke",n.namespacePrefix+"UniDocManRemoteActionController.retrieveScreenSections",{contextObjectId:window.DocManId,addNew:t},(function(e,t){t.status?o.resolve(e):o.reject(t.message)}),{escape:!1,buffer:!1}),o.promise}}}angular.module("app").service("universalDocManRemotingService",universalDocManRemotingService),universalDocManRemotingService.$inject=["$q","config"]}()},5894:()=>{!function(){"use strict";function uploadService(e,t,n,o,r,a,i,l,s,c){var d=this;return d.service={archiveExistingDocument:function archiveExistingDocument(e){if(e.isExternalReference){var t=l.defer();return t.resolve(),t.promise}return a.archiveExistingDocument(e.recordId,e.file.Id)},uploadContentDocument:function uploadContentDocument(o,a,l,c,u){var f=o.name.substr(o.name.lastIndexOf(".")+1).toLowerCase();if(null!==e.allowedFileExtensions&&e.allowedFileExtensions.length>0&&-1===e.allowedFileExtensions.indexOf(f))return void e.$evalAsync((function(){d.service.showToast=!0,e.$broadcast(n.ERROR_TOAST_SHOWN)}));var p=s.get().systemPropsMap.get(r.UNI_DOCMAN_FILE_SIZE_LIMIT);if(null!==p&&p){if(Math.round(10*o.size/1024e3)/10>p)return void e.$evalAsync((function(){d.service.showSizeToast=!0,e.$broadcast(n.ERROR_TOAST_SHOWN)}))}var E=i.uploadingToPlaceholder;i.uploadingToPlaceholder.file&&i.uploadingToPlaceholder.file.ParentId?d.service.shouldOverwrite().then((function(r){r?(d.service.archiveExistingDocument(i.uploadingToPlaceholder).then((function(){t.retrieveArchivedDocumentsWithAttachments((function(t){e.archivedFiles=t,i.convertPropertyNamesFromCamelCase(e.archivedFiles)}))})),i.uploadingToPlaceholder={},upload(o,a,E,l,c,u)):(i.uploadingToPlaceholder={},c(n.CANCEL_OVERWRITE))})):(i.uploadingToPlaceholder={},upload(o,a,E,l,c,u))},shouldOverwrite:function shouldOverwrite(){var t=l.defer();return e.$broadcast(n.SHOW_OVERWRITE_MODAL),e.$on(n.OVERWRITE_CONFIRM,(function(e,n){t.resolve(n)})),t.promise},showToast:!1,showSizeToast:!1},d.service;function upload(r,l,s,d,u,f){if(function uploadExtensionExists(){return void 0!==c.before&&typeof c.before===n.FUNCTION&&void 0!==c.after&&typeof c.after===n.FUNCTION&&void 0!==c.execute&&typeof c.execute===n.FUNCTION}()&&!0===c.before()){var p={isExternal:!0},E=i.generateFileMetadata(s,r);a.createExternalDocumentStorageMetadata(s.recordId,r.name,E).then((function(t){var o={contextId:window.DocManId,documentVersionId:t.documentVersionId,placeholderId:s.recordId,documentStoreId:t.parentId};c.execute(r,l,o).then((function(t){c.after(t),e.$broadcast(n.UPDATE_PLACEHOLDER_STATUS,s,n.STATUS_IN_FILE),d(p)}),(function(e){c.after(e),u(p)}))}))}else{var m={Origin:"C",PathOnClient:r.name,Title:r.name};!function createBlob(e,n,r,a,i){var l=new forcetk.Client(null,null,null);o.SITE_PREFIX&&(l.setSessionToken=function(e,t,n){this.sessionId=e,this.apiVersion=null==t?"v41.0":t,this.instanceUrl=null==n?"https://"+location.hostname+o.SITE_PREFIX:n,this.proxyUrl=null,this.visualforce=!1});l.setSessionToken(t.sessionId,"v41.0"),l.createBlob("ContentVersion",n,e.name,"VersionData",e,r,a,null,i)}(r,m,d,u,f)}}}angular.module("app").service("uploadService",uploadService),uploadService.$inject=["$rootScope","dataService","CONSTANTS","FILE","SYSTEM_PROPERTIES","universalDocManRemotingService","placeholderService","$q","config","fileUploadService"]}()},3045:()=>{!function(){"use strict";function picklistMetadataService(e){return{read:function read(t,n){for(var o='<?xml version="1.0" encoding="UTF-8"?><env:Envelope xmlns:env="http://schemas.xmlsoap.org/soap/envelope/" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><env:Header><SessionHeader xmlns="http://soap.sforce.com/2006/04/metadata"><sessionId>'+UniDocMan.sessionId+'</sessionId></SessionHeader></env:Header><env:Body><readMetadata xmlns="http://soap.sforce.com/2006/04/metadata"><type>'+t+"</type>",r=0;r<n.length;r++)o+="<fullNames>"+n[r]+"</fullNames>";return e({method:"POST",url:"/services/Soap/m/37.0",headers:{"Content-Type":"text/xml",SOAPAction:'""'},data:o+="</readMetadata></env:Body></env:Envelope>"})},update:function update(t){for(var n='<?xml version="1.0" encoding="UTF-8"?><env:Envelope xmlns:env="http://schemas.xmlsoap.org/soap/envelope/" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><env:Header><SessionHeader xmlns="http://soap.sforce.com/2006/04/metadata"><sessionId>'+UniDocMan.sessionId+'</sessionId></SessionHeader></env:Header><env:Body><updateMetadata xmlns="http://soap.sforce.com/2006/04/metadata">',o=0;o<t.length;o++)n+=t[o];return e({method:"POST",url:"/services/Soap/m/37.0",headers:{"Content-Type":"text/xml",SOAPAction:'""'},data:n+="</updateMetadata></env:Body></env:Envelope>"})},createPicklistXml:function createPicklistXml(e,t,n){var o="<picklist>";t&&(o+="<controllingField>"+t+"</controllingField>");for(var r=0;r<e.length;r++){if(o+="<picklistValues><fullName>"+e[r].name+"</fullName><default>false</default>",t)for(var a=0;a<e[r].controllingFieldValues.length;a++)o+="<controllingFieldValues>"+e[r].controllingFieldValues[a]+"</controllingFieldValues>";o+="</picklistValues>"}t&&n&&(o+="<restrictedPicklist>"+n+"</restrictedPicklist>");return o+="<sorted>false</sorted></picklist>"}}}angular.module("docman.picklist.manager").service("picklistMetadataService",picklistMetadataService),picklistMetadataService.$inject=["$http"]}()},7685:()=>{!function(){"use strict";function picklistValueService(e,t){var n=this;n.loadPicklistValues=function loadPicklistValues(o){var r=t.defer();return e.read("CustomField",o).then((function(e){jQuery(e.data).find("picklist").each((function(e,t){0===e?(n.picklistValues=[],jQuery(this).find("picklistValues").each((function(e,t){var o=jQuery(this).children("fullName").text();n.picklistValues.push({id:e,reason:o,comment:""})}))):1===e&&jQuery(this).find("picklistValues").each((function(){var e=jQuery(this).children("fullName").text();jQuery(this).find("controllingFieldValues").each((function(){for(var t=jQuery(this).text(),o=0;o<n.picklistValues.length;o++)n.picklistValues[o].reason===t&&(n.picklistValues[o].comment=e)}))}))})),r.resolve(n.picklistValues)})),r.promise},n.picklistValues=[]}angular.module("docman.picklist.manager").service("picklistValueService",picklistValueService),picklistValueService.$inject=["picklistMetadataService","$q"]}()},6991:()=>{!function(){"use strict";angular.module("docman.picklist.manager",[])}()}},t={};function __webpack_require__(n){var o=t[n];if(void 0!==o)return o.exports;var r=t[n]={exports:{}};return e[n](r,r.exports,__webpack_require__),r.exports}__webpack_require__.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},__webpack_require__(8373),__webpack_require__(549),__webpack_require__(5275),__webpack_require__(2790),__webpack_require__(3424),__webpack_require__(79),__webpack_require__(3804),__webpack_require__(5477),__webpack_require__(4072),__webpack_require__(6991),__webpack_require__(3045),__webpack_require__(7685),__webpack_require__(5894),__webpack_require__(5188),__webpack_require__(8901),__webpack_require__(494),__webpack_require__(586),__webpack_require__(9003),__webpack_require__(9605),__webpack_require__(9012),__webpack_require__(6298),__webpack_require__(5568),__webpack_require__(78),__webpack_require__(2510),__webpack_require__(5737),__webpack_require__(8846),__webpack_require__(5322),__webpack_require__(7791),__webpack_require__(2808),__webpack_require__(4471),__webpack_require__(2780),__webpack_require__(8760),__webpack_require__(9871),__webpack_require__(7369),__webpack_require__(9505),__webpack_require__(9479),__webpack_require__(2301),__webpack_require__(6387),__webpack_require__(9795),__webpack_require__(5726),__webpack_require__(5375),__webpack_require__(5367),__webpack_require__(8211),__webpack_require__(7300),__webpack_require__(2412),__webpack_require__(4881),__webpack_require__(6307),__webpack_require__(9304),__webpack_require__(8508),__webpack_require__(852),__webpack_require__(9523),__webpack_require__(1361),__webpack_require__(8932),__webpack_require__(5850),__webpack_require__(2729),__webpack_require__(7003),__webpack_require__(5521),__webpack_require__(6879)})();