!function(modules){var installedModules={};function __webpack_require__(moduleId){var module;return(installedModules[moduleId]||(module=installedModules[moduleId]={i:moduleId,l:!1,exports:{}},modules[moduleId].call(module.exports,module,module.exports,__webpack_require__),module.l=!0,module)).exports}__webpack_require__.m=modules,__webpack_require__.c=installedModules,__webpack_require__.d=function(exports,name,getter){__webpack_require__.o(exports,name)||Object.defineProperty(exports,name,{enumerable:!0,get:getter})},__webpack_require__.r=function(exports){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(exports,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(exports,"__esModule",{value:!0})},__webpack_require__.t=function(value,mode){if(1&mode&&(value=__webpack_require__(value)),8&mode)return value;if(4&mode&&"object"==typeof value&&value&&value.__esModule)return value;var ns=Object.create(null);if(__webpack_require__.r(ns),Object.defineProperty(ns,"default",{enumerable:!0,value:value}),2&mode&&"string"!=typeof value)for(var key in value)__webpack_require__.d(ns,key,function(key){return value[key]}.bind(null,key));return ns},__webpack_require__.n=function(module){var getter=module&&module.__esModule?function getDefault(){return module.default}:function getModuleExports(){return module};return __webpack_require__.d(getter,"a",getter),getter},__webpack_require__.o=function(object,property){return Object.prototype.hasOwnProperty.call(object,property)},__webpack_require__.p="",__webpack_require__(__webpack_require__.s=101)}({101:function(module,exports,__webpack_require__){module.exports=__webpack_require__(102)},102:function(module,exports,__webpack_require__){__webpack_require__(103),__webpack_require__(104),__webpack_require__(105)},103:function(module,exports){function App(){return this.register=function(appName,appData){registrationApp.registerExtension(function(event,registrationApp){var app;registrationApp.registerAppName(appName),(app=registrationApp.registeredApps[appName]).parentApp=function(){var selfIndex,potentialParentApps=LifeCycle.RegistrationApp.getAppsByName("LayoutViewer");return potentialParentApps.length&&0<(selfIndex=potentialParentApps.indexOf(app))?potentialParentApps[selfIndex-1]:null},app.preRun=function(data){return app.blockUI=function(){},app.unblockUI=function(){},null!=appData?appData:data},app.postRun=function(vm){return vm.screenSectionId&&(app.performingAjax(!0),vm.loadConfigurationData()),!0},registrationApp.log(appName+" App initialized.")}),registrationApp.registerModels(appName,LifeCycle.LayoutViewer.Models),registrationApp.registerViewModel(appName,LifeCycle.LayoutViewer.ViewModel)},this}var registrationApp;registrationApp=LifeCycle.RegistrationApp,null==LifeCycle.LayoutViewer&&(LifeCycle.LayoutViewer={}),null==LifeCycle.LayoutViewer.App&&(LifeCycle.LayoutViewer.App=App)},104:function(module,exports){null==LifeCycle.LayoutViewer&&(LifeCycle.LayoutViewer={}),null==LifeCycle.LayoutViewer.Models&&(LifeCycle.LayoutViewer.Models=function(event,app){app.Field=function(data,descriptor){return this.descriptor=descriptor||{},this.data=data||{},this.value=ko.observable(this.data.value||(this.isNumeric()&&!isNaN(this.data.value)?this.data.value:!this.isBooleanType()&&null)),this},Object.defineProperties(app.Field.prototype,{contextIdentifier:{get:function(){return this.descriptor.contextIdentifier||this.data.contextIdentifier||null}},controllingGuid:{get:function(){return this.descriptor.controllingGuid||this.data.controllingGuid||null}},displayOrder:{get:function(){return this.descriptor.displayOrder||this.data.displayOrder||null}},displayValue:{get:function(){return this.data.displayValue||null}},fieldLabel:{get:function(){return this.descriptor.fieldLabel||this.data.fieldLabel||null}},fieldLength:{get:function(){return this.descriptor.fieldLength||this.data.fieldLength||null}},fieldName:{get:function(){return this.descriptor.fieldName||this.data.fieldName||null}},fieldType:{get:function(){return this.descriptor.fieldType||this.data.fieldType||null}},inlineHelpText:{get:function(){return this.descriptor.inlineHelpText||this.data.inlineHelpText||null}},guid:{get:function(){return this.data.guid||null}},isCalculated:{get:function(){return this.descriptor.isCalculated||this.data.isCalculated||!1}},isDependent:{get:function(){return this.descriptor.isDependent||this.data.isDependent||!1}},isDirty:{get:function(){return this.data.isDirty||!1}},isHtmlFormatted:{get:function(){return this.descriptor.isHtmlFormatted||this.data.isHtmlFormatted||!1}},isReadOnly:{get:function(){return this.descriptor.isReadOnly||this.data.isReadOnly||!1}},isRequired:{get:function(){return this.descriptor.isRequired||this.data.isRequired||!1}},isVisible:{get:function(){return this.descriptor.isVisible||this.data.isVisible||!0}},masked:{get:function(){return this.descriptor.masked||this.data.masked||!1}},options:{get:function(){return this.descriptor.options||this.data.options||[]}},precision:{get:function(){return this.descriptor.precision||this.data.precision||null}},referenceContext:{get:function(){return this.descriptor.referenceContext||this.data.referenceContext||null}},scale:{get:function(){return this.descriptor.scale||this.data.scale||null}},selectedOption:{value:function(){if(this.isPicklistType()){for(var value=this.value(),options=this.options,i=0;i<options.length;i++)if(options[i].value==value)return new app.Option(options[i]);return new app.Option({value:value})}}},selectedOptions:{value:function(){return this.isMultiPicklistType()&&this.value()?this.value().split(";"):[]}},isFieldType:{value:function(type,comparison){return(comparison=_.isUndefined(comparison)?this.fieldType:comparison)==type}},isCurrencyType:{value:function(comparison){return this.isFieldType(Layout.DATA.fieldTypes.CURRENCY,comparison)}},isDateType:{value:function(comparison){return this.isFieldType(Layout.DATA.fieldTypes.DATE,comparison)}},isDateTimeType:{value:function(comparison){return this.isFieldType(Layout.DATA.fieldTypes.DATETIME,comparison)}},isDoubleType:{value:function(comparison){return this.isFieldType(Layout.DATA.fieldTypes.DOUBLE,comparison)}},isIntegerType:{value:function(comparison){return this.isFieldType(Layout.DATA.fieldTypes.INTEGER,comparison)}},isMultiPicklistType:{value:function(comparison){return this.isFieldType(Layout.DATA.fieldTypes.MULTIPICKLIST,comparison)}},isNumeric:{value:function(comparison){return this.isCurrencyType(comparison)||this.isDoubleType(comparison)||this.isIntegerType(comparison)||this.isPercentType(comparison)}},isBooleanType:{value:function(comparison){return this.isFieldType(Layout.DATA.fieldTypes.BOOLEAN,comparison)}},isPercentType:{value:function(comparison){return this.isFieldType(Layout.DATA.fieldTypes.PERCENT,comparison)}},isPicklistType:{value:function(comparison){return this.isFieldType(Layout.DATA.fieldTypes.PICKLIST,comparison)}},isReferenceType:{value:function(comparison){return this.isFieldType(Layout.DATA.fieldTypes.REFERENCE,comparison)}}}),app.FieldsMap=function(parent){return this.parent=parent,this},Object.defineProperties(app.FieldsMap.prototype,{getFields:{value:function(){return _.filter(_.values(this),function(value){return value instanceof app.Field})}},setFields:{value:function(data){var descriptors=this.parent.descriptors||{fields:{}};_.each(data,function(value,key){this[key]=new app.Field(value,descriptors.fields[value.guid])},this)}},getParent:{value:function(){return this.parent}},hasContent:{value:function(fieldNamePropertyName){var fieldNamePropertyName=fieldNamePropertyName.split("."),fieldName=fieldNamePropertyName[0],fieldNamePropertyName=fieldNamePropertyName[1],ret=!1;return ret=this[fieldName]&&(void 0===fieldNamePropertyName||this[fieldName][fieldNamePropertyName])?!0:ret}},getContent:{value:function(fieldNamePropertyName,isFunction,subPropertyName){var ret,fieldNamePropertyName=fieldNamePropertyName.split("."),fieldName=fieldNamePropertyName[0],fieldNamePropertyName=fieldNamePropertyName[1];return isFunction=void 0!==isFunction&&!!isFunction,void 0!==this[fieldName]&&(isFunction&&"function"==typeof this[fieldName][fieldNamePropertyName]?(ret=this[fieldName][fieldNamePropertyName](),void 0!==subPropertyName&&(ret=ret[subPropertyName])):void 0!==this[fieldName][fieldNamePropertyName]&&null!==this[fieldName][fieldNamePropertyName]?ret=this[fieldName][fieldNamePropertyName]:void 0!==this[fieldName].data[fieldNamePropertyName]&&(ret=this[fieldName].data[fieldNamePropertyName])),ret}}}),app.Option=function(data){return this.data=data||{},this},Object.defineProperties(app.Option.prototype,{active:{get:function(){return this.data.active||!0}},defaultValue:{get:function(){return this.data.defaultValue||!1}},label:{get:function(){return this.data.label||this.data.value}},value:{get:function(){return this.data.value||null}}}),app.ScreenResource=function(data){return this.data=data||{},this.propertyBag=new app.FieldsMap(this),this.children=ko.observableArray(),this},Object.defineProperties(app.ScreenResource.prototype,{descriptors:{get:function(){return this.data.descriptors||null}},apexType:{value:function(){return this.data.apexType||null}},guid:{value:function(){return this.data.guid||null}},remainingIds:{value:function(){return this.data.remainingIds||null}},limitValue:{value:function(){return this.data.configuration.limitValue||null}},isAccessible:{value:function(){return this.data.isAccessible||null}},isCreateable:{value:function(){return this.data.isCreateable||null}},isDeleteable:{value:function(){return this.data.isDeleteable||null}},isUpdateable:{value:function(){return this.data.isUpdateable||null}},isHierarchy:{value:function(){return this.data.isHierarchy||null}},isList:{value:function(){return this.data.isList||null}},isFlat:{value:function(){return!(this.isHierarchy()||this.isList())}},hasChildren:{value:function(){return this.children&&this.children()&&0<this.children().length}},getViewModel:{value:function(){return app.viewModel}},addChildren:{value:function(children){if(children)for(var i=0;i<children.length;i++)this.addChild(children[i])}},addChild:{value:function(child){var newResource=new app.ScreenResource(child);return newResource.propertyBag.setFields(child.propertyBag),this.children.push(newResource),newResource.addChildren(child.children),newResource}}}),app.ScreenResourcesMap=function(data){for(var prop in data){var resource,prop=data[prop];prop.guid&&((resource=new app.ScreenResource(prop)).propertyBag.setFields(resource.data.propertyBag),resource.addChildren(resource.data.children),this[prop.guid]=resource)}return this},app.WidgetMap=function(data){var self=this,defaultData=(self.PARAM_SET_DELIM=";",self.PARAM_VAL_DELIM=":",{widgetParams:""});return null!=data&&_.extend(defaultData,data),app.mapFromJS(defaultData,app.getMapping(),self),self.isLoading=ko.observable(!1),self.progressBarPercentage=ko.observable("0%"),self.isActive=ko.observable(!1),self.loadingText=LifeCycle.msgs.label_widget_loading_text,self.waitingText=LifeCycle.msgs.label_widget_please_wait_text,self.isLoading.subscribe(function(newValue){0==newValue&&self.progressBarPercentage("100%")}),self.progressBarMessage=ko.computed({read:function(){return self.progressBarPercentage()+" loaded"}}),self.height=ko.computed({read:function(){return self.isActive()||_.isUndefined(self.widgetParams().height)?"auto":self.widgetParams().height()},deferEvaluation:!0}),self},app.setMapping({copy:["descriptors","options"],ignore:["data","descriptor","parent"],screenResources:{create:function(options){return new app.ScreenResourcesMap(options.data)}},widget:{create:function(options){return new app.WidgetMap(options.data)}},widgetParams:{create:function(options){return ko.observable({})},update:function(options){var params={};return _.isString(options.data)&&!_.isEmpty(options.data)&&_.map(options.data.split(options.parent.PARAM_SET_DELIM),function(element){element=element.split(options.parent.PARAM_VAL_DELIM);params[element[0]]=element[1]}),app.mapFromJS(params,app.getMapping(),options.target)}}}),app.log("Models initialized.")})},105:function(module,exports){null==LifeCycle.LayoutViewer.ViewModel&&(LifeCycle.LayoutViewer.ViewModel=function(event,app){app.ViewModel=function(data){var self=this,defaultData=(self.app=app,{guid:null,screenResources:ko.observable(),sectionName:"",isHeadless:!1,isEditing:!1,isPreviewing:!1,isViewing:!1,isEditable:!0,isDefaultEditable:!1,instructions:"",breakPageAfter:!1,breakPageBefore:!1,disablePrint:!1,displayOrder:null,hasWidget:!1,widget:ko.observable(),displayToggleEffect:null,hasDisplayToggleHeader:!0,saveBodyAsAttachment:!1,showLoader:!0});return null!=data&&_.extend(defaultData,data),app.mapFromJS(defaultData,app.getMapping(),self),self.hasDisplayToggleEffect=ko.observable(!1),self.uniqueChildren={},self.screenResource=ko.computed({read:function(){return _.first(_.filter(self.screenResources(),function(resource){return resource instanceof app.ScreenResource}))},deferEvaluation:!0}),self.anchorVM=ko.computed(function(){for(var anchorApp=self.app;null!=anchorApp.parentApp();){if(!ko.unwrap(anchorApp.viewModel.isHeadless()))return anchorApp.viewModel;anchorApp=anchorApp.parentApp()}return anchorApp.viewModel}),self.getApp=function(){return self.app},self.pageBreakStatus=ko.computed(function(){return self.breakPageAfter()?"stitchedActive":"stitched"}),self.pageBreakTextStatus=ko.computed(function(){return self.breakPageAfter()?"page-break-text-active":"page-break-text"}),self.isUnique=function(resource){if(resource&&resource.data.configuration){var idField=resource.data.configuration.sObjectType+"_Id",recordId=_.filter(_.values(resource.propertyBag),function(property){return property.data.hasOwnProperty("guid")&&property.data.guid===idField}).shift();if(recordId&&!self.uniqueChildren[recordId.value()])return self.uniqueChildren[recordId.value()]=resource}return null},self.unique=function(children){var toReturn=[];return _.each(children(),function(child){child=self.isUnique(child);child&&toReturn.push(child)}),toReturn},self.hasData=function(resource){return!!(resource&&resource.data&&resource.data.configuration&&"NoLayout"!==resource.data.configuration.layoutName)&&!!resource.data.guid},self.hasValidChildren=function($data,depthsToInclude){for(var isValid=!0,i=0;i<depthsToInclude.length;i++){for(var isValid=!0,context=$data,k=0;k<=depthsToInclude[i];k++)if(!(context=0<k?context.children()[0]:context)){isValid=!1;break}if(isValid=isValid&&this.hasData(context))break}return isValid},self.isExpanded=ko.computed(function(){return self.isViewing()}),self.toggleExpand=function(){self.isViewing(!self.isViewing())},self.togglePageBreak=function(){self.breakPageAfter(!self.breakPageAfter()),self.screenResources=[];var data=app.mapToJS(self,{useOptimizedMapper:!0,maxDepth:0,maxHeight:0});delete data.showLoader,Layout.saveSectionData(data,function(data){},function(event,result){console.log(event.message)})},self.loadConfigurationData=function(){Layout.readLayoutData(self.screenSectionId(),self.guid(),app.mapToJS(self.contextObject),function(data){for(var rootResource in app.mapFromJS(data,app.getMapping(),self),self.screenResources()){var resource=self.screenResources()[rootResource];if(resource instanceof app.ScreenResource){var numberOfChildren=resource.children().length;if(0<numberOfChildren&&!LifeCycle.infiniteScrollLoad)for(var i=0;i<resource.children().length;i++)self.loadMoreData(resource.children()[i],function(){--numberOfChildren<=0&&self.signalLoadEnd()});else self.signalLoadEnd()}}},function(event,result){app.performingAjax(!1),Layout.errorFunction(event,result)})},self.loadMoreChildren=function(){for(var rootResource in self.screenResources()){var numberOfChildren,rootResource=self.screenResources()[rootResource];rootResource instanceof app.ScreenResource&&(0<(numberOfChildren=rootResource.children().length)?jQuery.each(rootResource.children(),function(index,listResource){self.loadMoreData(listResource,function(){--numberOfChildren<=0&&self.signalLoadEnd()})}):self.signalLoadEnd())}},self.loadMoreData=function(listResource,finishedLoading){var idsToQuery,childClone;LifeCycle.infiniteScrollLoad&&self.showLoader(!0),listResource.remainingIds&&listResource.remainingIds()&&0<listResource.remainingIds().length?(idsToQuery=listResource.remainingIds().splice(0,listResource.limitValue()),(childClone=_.clone(listResource.data)).remainingIds=idsToQuery,childClone.children=[],Layout.readMoreData(childClone,function(data){LifeCycle.infiniteScrollLoad||self.loadMoreData(listResource,finishedLoading),listResource.addChildren(data.children),self.showLoader(!1)})):finishedLoading()},self.saveAttachment=function(screenSectionId){var dataBinds;self.screenSectionId()!=screenSectionId||_.isUndefined(LifeCycle.Service)||(screenSectionId=jQuery("#"+self.screenSectionId()).clone(),dataBinds=jQuery(screenSectionId).find("*[data-bind]"),jQuery(dataBinds).attr("data-bind",""),LifeCycle.Service.saveAttachment(self.screenSectionId(),LifeCycle.msgs.msg_rendered_view_filename,LifeCycle.msgs.msg_text_plain,screenSectionId.html(),!0,!1,function(){},function(){}))},self.signalLoadEnd=function(){self.showLoader(!1),self.widget().isKnockout()&&self.signalWidgets(),!self.widget().isNarrative()&&self.saveBodyAsAttachment()&&app.publish("layoutDesigner.saveRenderedView",self.screenSectionId()),jQuery(".force .form-control").first().focus(),jQuery(window).scrollTop(0),app.performingAjax(!1)},self.print=function(){self.disablePrint()||window.print()},self.setFocusFirstFormControl=function(isRenderingComplete){isRenderingComplete&&jQuery(".force .form-control:first").focus()},self.expandAll=function(){return self.actionParentApps(function(vm){vm.isViewing(!0)})},self.hideAll=function(){return self.actionParentApps(function(vm){vm.isViewing(!1),vm.isEditing(!1),vm.isPreviewing(!1)})},self.actionParentApps=function(action){for(var anchorApp=self.app;null!=anchorApp;)action(anchorApp.viewModel),anchorApp=anchorApp.parentApp();return!1},self.signalWidgets=function(){jQuery(document).trigger(jQuery.Event(self.screenSectionId()),[self])},self.saveBodyAsAttachment()&&app.subscribe("layoutDesigner.saveRenderedView",self.saveAttachment),self.editingContent=void 0,self.saveNarrative=function(vm){var sHtml,activeEditorId=jQuery("#wysiwyg_"+vm.guid()).data("liveEdit").getActiveEditorId();activeEditorId&&(sHtml=jQuery("#"+activeEditorId).data("liveEdit").getXHTMLBody(),Layout.saveNarrativeData(jQuery("#wysiwyg_id_"+vm.guid()).val(),sHtml,function(){self.editingContent=void 0,jQuery("#"+activeEditorId).css({minHeight:"0"}).data("liveEdit").finishedit(),self.toggleWysiwig(vm.guid())},function(){}))},self.enterWysiwig=function(vm){var activeWidget=jQuery("#wysiwyg_"+vm.guid());activeWidget.liveEdit({css:["bootstrap/css/bootstrap.min.css","bootstrap/bootstrap_extend.css"],groups:[["group1","",["Bold","Italic","Underline","FontName","ForeColor","RemoveFormat"]],["group2","",["Bullets","Numbering","Indent","Outdent"]],["group3","",["Paragraph","FontSize"]],["group4","",["LinkDialog","ImageDialog","TableDialog"]],["group5","",["Undo","Redo","FullScreen"]]]}),activeWidget.css({minHeight:"20em"}).data("liveEdit").startedit(),self.editingContent=activeWidget.data("liveEdit").getXHTMLBody(),self.toggleWysiwig(vm.guid())},self.cancelWysiwig=function(vm){var activeEditorId=jQuery("#wysiwyg_"+vm.guid()).data("liveEdit").getActiveEditorId();activeEditorId&&(activeEditorId=jQuery("#"+activeEditorId),_.isUndefined(self.editingContent)||(activeEditorId.data("liveEdit").loadHTML(self.editingContent),self.editingContent=void 0),activeEditorId.css({minHeight:"0"}).data("liveEdit").finishedit(),self.toggleWysiwig(vm.guid()))},self.toggleWysiwig=function(guid){jQuery("#wysiwyg_controls_"+guid).is(":visible")?(self.widget().isActive(!1),jQuery("#wysiwyg_controls_"+guid).hide(),jQuery("#wysiwyg_edit_link_"+guid).show(),jQuery('button[id^="wysiwyg_edit_link_"]').removeAttr("disabled").removeAttr("title")):(self.widget().isActive(!0),jQuery("#wysiwyg_controls_"+guid).show(),jQuery("#wysiwyg_edit_link_"+guid).hide(),jQuery('button[id^="wysiwyg_edit_link_"]').attr("disabled","disabled").attr("title",LifeCycle.msgs.msgs_narrative_edit_blocked))},LifeCycle.infiniteScrollLoad&&(app.subscribe("Infinite_Scroll_Load_More",self.loadMoreChildren),jQuery(window).scroll(function(){window.innerHeight+window.scrollY>=document.body.offsetHeight&&(self.showLoader()||app.publish("Infinite_Scroll_Load_More"))})),app.log("ViewModel instantiated."),self},app.log("ViewModel initialized.")})}});