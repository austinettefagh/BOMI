(()=>{var __webpack_modules__={3930:module=>{module.exports='<div class="nds-section__header">\n\t<message ng-if="::$ctrl.showMessages"></message>\n\t<div class="slds-p-bottom--small slds-size--0-of-12">\n\t\t<span role="heading" aria-level="3" class="slds-text-heading--small">{{::$ctrl.getTitle()}}</span>\n\t\t<nc-edit-field-set-button\n\t\t\tclass="pull-right"\n\t\t\tng-if="$ctrl.isEditFieldSet() && $ctrl.showEditFieldSetButton"\n\t\t\tentity="{{$ctrl.getChildSectionConfig(\'sObjectType\')}}"\n\t\t\tfield-set-key="{{$ctrl.getChildSectionConfig(\'fieldSetKey\')}}"\n\t\t>\n\t\t</nc-edit-field-set-button>\n\t</div>\n\t<div\n\t\tclass="slds-text-title slds-p-bottom--small slds-size--0-of-12"\n\t\tng-if="$ctrl.getDescription()"\n\t>\n\t\t{{::$ctrl.getDescription()}}\n\t</div>\n\t<div\n\t\tclass="slds-text-body--regular slds-p-top--small slds-p-bottom--small slds-size--0-of-12"\n\t\tng-bind="::$ctrl.getInstructions()"\n\t\tng-show="$ctrl.getInstructions().length"\n\t/>\n</div>\n<div class="nds-section__body slds-p-bottom--none">\n\t<nc-data-table\n\t\tguid="{{$ctrl.guid}}"\n\t\tsection-id="{{$ctrl.sectionId}}"\n\t\tcontext-id="{{$ctrl.contextId}}"\n\t\tcolumn-size="$ctrl.columnSize"\n\t\tadd-record="$ctrl.addRecord()"\n\t\tadd-button-label="{{$ctrl.labels.addRecordLabel}}"\n\t\tedit-record="$ctrl.editRecord(record)"\n\t\tedit-button-label="{{$ctrl.labels.Edit}}"\n\t\tdelete-record="$ctrl.deleteRecord(record)"\n\t\tdelete-button-label="{{$ctrl.labels.Delete}}"\n\t\tmodal-cancel-button="$ctrl.cancelSaveRecord()"\n\t\tmodal-cancel-button-label="{{$ctrl.labels.Cancel}}"\n\t\tmodal-continue-button="$ctrl.saveRecord()"\n\t\tmodal-continue-button-label="{{$ctrl.labels.Continue}}"\n\t\tmodal-text-heading-add-mode="{{$ctrl.labels.Add_Record}}"\n\t\tmodal-text-heading-edit-mode="{{$ctrl.labels.Edit_Record}}"\n\t\talert-box-labels="::$ctrl.alertBoxLabels"\n\t\tactions="$ctrl.actions"\n\t\tadd-edit-modal-content="{{$ctrl.addEditModalContent}}"\n\t\tdisable-modal="$ctrl.getDisableModal()"\n\t\tare-columns-sortable="$ctrl.areColumnsSortable"\n\t\thide-actions="$ctrl.hideActions"\n\t\thas-pagination="$ctrl.hasPagination"\n\t\tcurrent-page="$ctrl.getCurrentPageNumber()"\n\t\ttotal-pages="$ctrl.totalPages"\n\t>\n\t</nc-data-table>\n</div>\n<div\n\tng-if="$ctrl.showLoader"\n\trole="status"\n\tclass="slds-spinner slds-spinner--medium slds-spinner--brand related-list-spinner"\n>\n\t<span class="slds-assistive-text">Loading</span>\n\t<div class="slds-spinner__dot-a"></div>\n\t<div class="slds-spinner__dot-b"></div>\n</div>\n'},5069:()=>{!function(){"use strict";angular.module("ncRelatedList",["ncDataTable","ncFieldSetConfigurator"])}()},5261:()=>{!function(){"use strict";angular.element(document).ready((function(){angular.bootstrap(document.getElementById("ncRelatedList"),["ncRelatedList"])}))}()},165:(__unused_webpack_module,__unused_webpack_exports,__webpack_require__)=>{!function(){"use strict";angular.module("ncRelatedList").component("ncRelatedList",{bindings:{sectionId:"@",guid:"@",contextId:"@",actions:"<?",instructions:"@?",addEditModalContent:"@?",columnSize:"<?",title:"@?",description:"@?",addNewActionOverride:"@?",addNewActionLabel:"@?",areColumnsSortable:"<?",showEditFieldSetButton:"<?",hideMessages:"<?",readOnly:"<?"},controller:["relatedList","pubsub","$scope","picklistService",function(relatedList,pubsub,$scope,picklistService){var ctrl=this;ctrl.$onInit=function(){ctrl.showLoader=!1,ctrl.labels=relatedList.labels,ctrl.columnSize=ctrl.columnSize?ctrl.columnSize+1:5,ctrl.labels.addRecordLabel=ctrl.labels.Add_Record,ctrl.showMessages=void 0===ctrl.hideMessages||!ctrl.hideMessages,ctrl.alertBoxLabels={heading:ctrl.labels.Confirm_Delete_Record,message:ctrl.labels.Delete_Record_Warning,cancel:ctrl.labels.Cancel,confirm:ctrl.labels.Yes_Delete},ctrl.hideActions=!0===ctrl.readOnly||"true"===ctrl.readOnly,ctrl.hasPagination=!1,ctrl.totalPages=1,ctrl.listResource=null,ctrl.setAlternateButtonLabels(),relatedList.init(ctrl.guid),ctrl.getRecords()},ctrl.getInstructions=function(){return ctrl.instructions},ctrl.getTitle=function(){return ctrl.title?ctrl.title:ctrl.getSectionName()},ctrl.getDescription=function(){return ctrl.description?ctrl.description:""},ctrl.getSectionName=function(){return relatedList.getSectionName(ctrl.sectionId)},ctrl.getChildSectionConfig=function(property){return relatedList.getChildSectionConfig(ctrl.sectionId,property)},ctrl.isEditFieldSet=function(){return relatedList.isEditFieldSet(ctrl.sectionId,["sObjectType","fieldSetKey"])},ctrl.addRecord=function(){ctrl.addNewActionOverride?LifeCycle.Navigator.navigateToRoute(ctrl.addNewActionOverride):(relatedList.ui.block(),relatedList.setGuid(ctrl.guid),relatedList.addRecord(ctrl.sectionId,ctrl.contextId).then((function(resource){relatedList.loadSelection(resource),relatedList.ui.unblock()}),(function(error){relatedList.setMessage(error),relatedList.ui.unblock()})))},ctrl.deleteRecord=function(record){record&&(relatedList.ui.block(),relatedList.deleteRecord(record).then((function(){ctrl.getRecords()}),(function(error){relatedList.setMessage(error),relatedList.ui.unblock()})))},ctrl.saveRecord=function(){return relatedList.ui.block(),relatedList.saveData().then((function(){pubsub.publish(pubsub.topics.MODAL_FORM_SUCCESS),relatedList.screenSection.notifyCallbacks(relatedList.screenSection.saveCallbacks),relatedList.clearSelection(),relatedList.screenSection.notifyLightningUI(),picklistService.clearMaps(),ctrl.getRecords()}),(function(error){relatedList.setMessage(error,"modal"),relatedList.screenSection.notifyLightningUI(),relatedList.ui.unblock()}))},ctrl.cancelSaveRecord=function(){relatedList.screenSection.notifyCallbacks(relatedList.screenSection.cancelCallbacks),picklistService.clearMaps(),relatedList.screenSection.notifyLightningUI(),ctrl.getRecords()},ctrl.getRecords=function(){return relatedList.ui.block(),relatedList.getRecords(ctrl.sectionId,ctrl.guid,ctrl.contextId).then((function(screenSection){ctrl.listResource=relatedList.screenSection.getListResource(ctrl.sectionId),ctrl.listResource&&ctrl.listResource.configuration&&(ctrl.hasPagination=ctrl.listResource.configuration.offsetByLimit),ctrl.hasPagination&&(relatedList.resetPagination(),ctrl.totalPages=ctrl.getTotalPages()),relatedList.ui.unblock()}),(function(error){relatedList.setMessage(error),relatedList.ui.unblock()}))},ctrl.getAdditionalRecords=function(){relatedList.getAdditionalRecords(ctrl.listResource)},ctrl.getPreviousRecords=function(){relatedList.getPreviousRecords(ctrl.listResource)},ctrl.getCurrentPageNumber=function(){return relatedList.getCurrentPageNumber()},ctrl.getTotalPages=function(){return relatedList.getTotalPages(ctrl.listResource)},ctrl.setAlternateButtonLabels=function(){ctrl.addNewActionLabel&&(ctrl.labels.addRecordLabel=ctrl.addNewActionLabel)},ctrl.getDisableModal=function(){return void 0!==ctrl.addNewActionOverride&&ctrl.addNewActionOverride.length>0},pubsub.subscribe(pubsub.topics.GET_NEXT_PAGE,ctrl.getAdditionalRecords),pubsub.subscribe(pubsub.topics.GET_PREVIOUS_PAGE,ctrl.getPreviousRecords)}],template:__webpack_require__(3930)})}()},9285:()=>{!function(){"use strict";angular.module("ncRelatedList").provider("relatedListRemoting",(function(){var self=this;self.endpoints={},self.$get=function($q){return{deleteRecord:function(record){var deferred=$q.defer();return Visualforce.remoting.Manager.invokeAction(self.endpoints.deleteRecord,angular.fromJson(angular.toJson(record))||null,"screen-resource-delete-container-bean",(function(result,event){event.status?deferred.resolve(result,event):deferred.reject(event.message)}),{escape:!1}),deferred.promise},getRecords:function(sectionId,guid,contextId){var deferred=$q.defer();return Visualforce.remoting.Manager.invokeAction(self.endpoints.loadData,sectionId||null,guid||null,contextId||null,(function(result,event){event.status?deferred.resolve(result,event):deferred.reject(event.message)}),{escape:!1}),deferred.promise},getAdditionalRecords:function(listResource){var deferred=$q.defer();return Visualforce.remoting.Manager.invokeAction(self.endpoints.loadAdditionalData,listResource,(function(result,event){event.status?deferred.resolve(result,event):deferred.reject(event.message)}),{escape:!1}),deferred.promise},createNew:function(screenResource){var deferred=$q.defer();return Visualforce.remoting.Manager.invokeAction(self.endpoints.createNew,angular.fromJson(angular.toJson(screenResource))||null,(function(result,event){event.status?deferred.resolve(result,event):deferred.reject(event.message)}),{escape:!1}),deferred.promise},saveData:function(screenResource){var deferred=$q.defer();return Visualforce.remoting.Manager.invokeAction(self.endpoints.saveData,angular.fromJson(angular.toJson(screenResource))||null,(function(result,event){event.status?deferred.resolve(result,event):deferred.reject(event.message)}),{escape:!1}),deferred.promise}}},self.setEndpoint=function(endpoint){self.endpoint=angular.merge(self.endpoints,endpoint)}}))}()},3757:()=>{!function(){"use strict";function RelatedList(screenSection,visualForceMarkup,relatedListRemoting,ui,label,messageService,$q,pubsub){var self=this;self.ui=ui,self.screenSection=screenSection,self.labels=label.getLabels(),self.loadedPages=[],self.currentPage=0,self.init=function(guid){self.screenSection.formBuilder.setGuid(guid),self.setGuid(guid)},self.getGuid=function(){return self.guid},self.getSectionName=function(screenSectionId){var section;return(section=screenSection.get(screenSectionId))?section.sectionName:section},self.getChildSectionConfig=function(screenSectionId,property){var config;property&&(config=screenSection.getConfiguration(screenSectionId));var isProperty=config&&config.childConfigurations&&config.childConfigurations.length>0&&config.childConfigurations[0].hasOwnProperty(property);return isProperty?config.childConfigurations[0][property]:(isProperty=config&&config.hasOwnProperty(property))?config[property]:void 0},self.isEditFieldSet=function(screenSectionId,requirements){return requirements&&requirements instanceof Array&&requirements.filter((function(property){return void 0!==self.getChildSectionConfig(screenSectionId,property)})).length>0},self.addRecord=function(screenSectionId,contextId){var baseSection=screenSection.get(screenSectionId),resource=screenSection.getResourceFromSection(baseSection),template=angular.copy(resource.children[0]);if(self.removeChildData(template),!template.isList&&template.apexType){var parts=template.apexType.split(".");template.apexType=parts[0]+".ConfiguredSObjectListScreenResource",_.values(template.propertyBag).filter((function(field){field.value=void 0}))}var deferred=$q.defer();return relatedListRemoting.createNew(template).then((function(result){self.getPicklistValues(screenSectionId,contextId,baseSection,!0).then((function(){deferred.resolve(result)}),(function(reason){screenSection.errorHandler(reason),deferred.reject(reason)}))})),deferred.promise},self.removeChildData=function(resource){resource.hasOwnProperty("children")&&(resource.children=[]),resource.hasOwnProperty("remainingIds")&&(resource.remainingIds=[])},self.loadSelection=function(resource){screenSection.loadChildSection(resource,self.guid),screenSection.set(screenSection.getSelectedChild())},self.clearSelection=function(){screenSection.clearSelectedChild()},self.deleteRecord=function(record){return relatedListRemoting.deleteRecord(record)},self.saveData=function(){var resource,selectedChild=screenSection.getSelectedChild();resource=selectedChild.isList?selectedChild.children[0]:selectedChild;const errorString=screenSection.checkAndPublishErrors([resource]);if(errorString){var deferred=$q.defer();return deferred.reject(errorString),deferred.promise}return relatedListRemoting.saveData(resource)},self.getRecords=function(screenSectionId,guid,contextId){var deferred=$q.defer();return relatedListRemoting.getRecords(screenSectionId,guid,contextId).then((function(result){for(var resource in self.setRecord(result),result.screenResources)self.inflatePropertiesFromDescriptors(result.screenResources[resource]);self.getPicklistValues(screenSectionId,contextId,result,!1).then((function(){deferred.resolve(result)}),(function(reason){screenSection.errorHandler(reason),deferred.reject(reason)}))})),deferred.promise},self.getAdditionalRecords=function(listResource){if(self.currentPage<self.loadedPages.length-1)self.currentPage++,listResource.children=self.loadedPages[self.currentPage],self.inflatePropertiesFromDescriptors(listResource);else if(listResource&&listResource.remainingIds&&listResource.remainingIds.length){0===self.loadedPages.length&&self.loadedPages.push(listResource.children);var deferred=$q.defer(),idsToQuery=listResource.remainingIds.splice(0,listResource.configuration.limitValue),listResourceCopy=angular.copy(listResource);return listResourceCopy.remainingIds=idsToQuery,listResourceCopy.children=[],relatedListRemoting.getAdditionalRecords(listResourceCopy).then((function(result){self.loadedPages.push(result.children),listResource.children=result.children,self.inflatePropertiesFromDescriptors(listResource),self.currentPage++,deferred.resolve()}),(function(result){deferred.resolve()})),deferred.promise}},self.getPreviousRecords=function(listResource){listResource&&listResource.children&&self.currentPage>0&&(self.currentPage--,listResource.children=self.loadedPages[self.currentPage],self.inflatePropertiesFromDescriptors(listResource))},self.getCurrentPageNumber=function(){return self.currentPage+1},self.getTotalPages=function(listResource){if(listResource&&listResource.remainingIds&&listResource.remainingIds.length){var limit=listResource.configuration.limitValue,total=listResource.remainingIds.length+limit;return Math.ceil(total/limit)}return 1},self.resetPagination=function(){self.currentPage=0,self.loadedPages=[]},self.setGuid=function(guid){self.guid=guid},self.setRecord=function(resource){screenSection.set(resource)},self.setMessage=function(message,context){messageService.setMessage({type:messageService.messageTypes.error,text:message,context},!0)},self.getPicklistValues=function(screenSectionId,contextId,rootResource,isAddNew){var deferred=$q.defer(),options={isRelatedList:!0,isAddNewModal:isAddNew},resources=_.values(rootResource.screenResources);return self.setOptionValues(resources,options),visualForceMarkup.retrieve(screenSectionId,contextId,rootResource,options).then((function(){deferred.resolve()}),(function(reason){screenSection.errorHandler(reason),deferred.reject(reason)})),deferred.promise},self.inflatePropertiesFromDescriptors=function(resource){if(resource.configuration){var childResources=self.screenSection.getChildren(resource.configuration.screenSectionId);if(childResources&&childResources.length&&childResources[0].descriptors)for(var i=0,j=childResources.length;i<j;i++)self.screenSection.mergeDescriptorsIntoPropertyBag(childResources[i])}return resource},self.setOptionValues=function(resources,options){resources&&(resources.length>0&&resources[0].children&&resources[0].children.length>0?self.setOptionValues(resources[0].children,options):resources.length>0&&resources[0].configuration?(options.fieldSetKey=resources[0].configuration.fieldSetKey,options.sObjectType=resources[0].configuration.sObjectType):resources.configuration&&(options.fieldSetKey=resources.configuration.fieldSetKey,options.sObjectType=resources.configuration.sObjectType))}}angular.module("ncRelatedList").service("relatedList",RelatedList),RelatedList.$inject=["screenSection","visualForceMarkup","relatedListRemoting","ui","label","messageService","$q","pubsub"]}()}},__webpack_module_cache__={};function __webpack_require__(moduleId){var cachedModule=__webpack_module_cache__[moduleId];if(void 0!==cachedModule)return cachedModule.exports;var module=__webpack_module_cache__[moduleId]={exports:{}};return __webpack_modules__[moduleId](module,module.exports,__webpack_require__),module.exports}__webpack_require__(5069),__webpack_require__(5261),__webpack_require__(165),__webpack_require__(9285),__webpack_require__(3757)})();